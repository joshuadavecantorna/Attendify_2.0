import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-CnyaKS-G.js";import{d as U,r as F,a as m,o as _,b as n,e as t,h as T,w as e,f as d,i as s,F as v,g as $,j as p,t as u,k as j}from"./app-C48M2Hbf.js";import{_ as k,b as y,c as C,a as b,d as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-C_SXf6sx.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLf32hWL.js";import{_ as A}from"./index-BK1wJ5rr.js";import{_ as L,a as P,b as E,c as G,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-q1QW1QZo.js";import{_ as M,a as q,b as g,c as i,d as z,e as r}from"./TableHeader.vue_vue_type_script_setup_true_lang-ePHcBOps.js";import"./useForwardExpose-DZx6DsPP.js";import"./users-B1vNMOg3.js";import"./RovingFocusGroup-DTuHG1ky.js";import"./check-BuM2rGYF.js";const H={class:"container mx-auto p-6 space-y-6"},J={class:"flex gap-4 items-end"},K={class:"flex-1"},O={key:0,class:"text-center py-8"},Q={class:"font-medium"},W={class:"text-sm text-muted-foreground"},X={class:"text-green-600 font-medium"},Y={class:"text-red-600 font-medium"},Z={class:"flex items-center gap-2"},h={class:"font-medium"},it=U({__name:"AttendanceReports",props:{teacher:{},classes:{},sessions:{},selectedClassId:{}},setup(S){const D=S,N=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Reports",href:"/teacher/reports"},{title:"Attendance Reports",href:"/teacher/reports/attendance"}],f=F(D.selectedClassId?.toString()||"all"),V=()=>{f.value&&f.value!=="all"?window.location.href=`/teacher/reports/attendance?class_id=${f.value}`:window.location.href="/teacher/reports/attendance"},c=(o,a)=>a>0?Math.round(o/a*100):0,B=o=>o>=90?"default":o>=75?"secondary":o>=60?"outline":"destructive";return(o,a)=>(_(),m(v,null,[n(t(T),{title:"Attendance Reports"}),n(R,{breadcrumbs:N},{default:e(()=>[d("div",H,[a[18]||(a[18]=d("div",{class:"space-y-2"},[d("h1",{class:"text-3xl font-bold tracking-tight"},"Attendance Reports"),d("p",{class:"text-muted-foreground"}," Detailed attendance analytics and trends for your classes ")],-1)),n(t(k),null,{default:e(()=>[n(t(y),null,{default:e(()=>[n(t(C),null,{default:e(()=>a[2]||(a[2]=[s("Filters",-1)])),_:1,__:[2]})]),_:1}),n(t(b),null,{default:e(()=>[d("div",J,[d("div",K,[a[4]||(a[4]=d("label",{class:"text-sm font-medium"},"Class",-1)),n(t(L),{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=l=>f.value=l)},{default:e(()=>[n(t(P),null,{default:e(()=>[n(t(E),{placeholder:"All Classes"})]),_:1}),n(t(G),null,{default:e(()=>[n(t(w),{value:"all"},{default:e(()=>a[3]||(a[3]=[s("All Classes",-1)])),_:1,__:[3]}),(_(!0),m(v,null,$(o.classes,l=>(_(),p(t(w),{key:l.id,value:l.id.toString()},{default:e(()=>[s(u(l.name)+" ("+u(l.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n(t(x),{onClick:V},{default:e(()=>a[5]||(a[5]=[s("Apply Filter",-1)])),_:1,__:[5]})])]),_:1})]),_:1}),n(t(k),null,{default:e(()=>[n(t(y),null,{default:e(()=>[n(t(C),null,{default:e(()=>a[6]||(a[6]=[s("Attendance Sessions",-1)])),_:1,__:[6]}),n(t(I),null,{default:e(()=>[s(u(o.sessions.length)+" session(s) found ",1)]),_:1})]),_:1}),n(t(b),null,{default:e(()=>[o.sessions.length===0?(_(),m("div",O,[a[8]||(a[8]=d("p",{class:"text-muted-foreground"},"No attendance sessions found.",-1)),n(t(x),{onClick:a[1]||(a[1]=l=>o.$inertia.visit("/teacher/attendance")),class:"mt-4"},{default:e(()=>a[7]||(a[7]=[s(" Start Taking Attendance ",-1)])),_:1,__:[7]})])):(_(),p(t(M),{key:1},{default:e(()=>[n(t(q),null,{default:e(()=>[n(t(g),null,{default:e(()=>[n(t(i),null,{default:e(()=>a[9]||(a[9]=[s("Class",-1)])),_:1,__:[9]}),n(t(i),null,{default:e(()=>a[10]||(a[10]=[s("Session",-1)])),_:1,__:[10]}),n(t(i),null,{default:e(()=>a[11]||(a[11]=[s("Date",-1)])),_:1,__:[11]}),n(t(i),null,{default:e(()=>a[12]||(a[12]=[s("Present",-1)])),_:1,__:[12]}),n(t(i),null,{default:e(()=>a[13]||(a[13]=[s("Absent",-1)])),_:1,__:[13]}),n(t(i),null,{default:e(()=>a[14]||(a[14]=[s("Total",-1)])),_:1,__:[14]}),n(t(i),null,{default:e(()=>a[15]||(a[15]=[s("Attendance Rate",-1)])),_:1,__:[15]}),n(t(i),null,{default:e(()=>a[16]||(a[16]=[s("Status",-1)])),_:1,__:[16]})]),_:1})]),_:1}),n(t(z),null,{default:e(()=>[(_(!0),m(v,null,$(o.sessions.filter(l=>l&&l.id),l=>(_(),p(t(g),{key:l.id},{default:e(()=>[n(t(r),null,{default:e(()=>[d("div",null,[d("div",Q,u(l.class_name||"Unknown Class"),1),d("div",W,u(l.course||"Unknown")+" - "+u(l.section||"Unknown"),1)])]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.session_name||"Unnamed Session"),1)]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.session_date?new Date(l.session_date).toLocaleDateString():"Unknown Date"),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("span",X,u(l.present_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("span",Y,u(l.absent_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.total_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("div",Z,[d("span",h,u(c(l.present_count||0,l.total_count||0))+"%",1),n(t(A),{variant:B(c(l.present_count||0,l.total_count||0))},{default:e(()=>[s(u(c(l.present_count||0,l.total_count||0)>=75?"Good":"Needs Attention"),1)]),_:2},1032,["variant"])])]),_:2},1024),n(t(r),null,{default:e(()=>[n(t(A),{variant:l.status==="active"?"default":"secondary"},{default:e(()=>[s(u(l.status||"unknown"),1)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024))),128)),!o.sessions||o.sessions.length===0?(_(),p(t(g),{key:0},{default:e(()=>[n(t(r),{colspan:"8",class:"text-center text-muted-foreground py-8"},{default:e(()=>a[17]||(a[17]=[s(" No attendance sessions found ",-1)])),_:1,__:[17]})]),_:1})):j("",!0)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1})],64))}});export{it as default};
