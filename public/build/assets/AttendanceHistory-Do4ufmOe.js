import{X as q,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as J,r as K,c as k,a as h,o as i,b as t,e as s,h as O,w as a,f as l,i as o,t as u,F as w,g as A,j,k as Q,l as W,n as Y,m as Z}from"./app-DW-4G1vZ.js";import{_ as m,b as _,c as g,a as x,d as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as ee}from"./index-r1g3ib2J.js";import{_ as te}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-DnmVy0AL.js";import{_ as B,a as N,b as R,c as U,d as b}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqZ9_JK4.js";import{C}from"./calendar-hrTOBv_O.js";import{C as H}from"./circle-check-big-BJq8CkBX.js";import{C as E}from"./circle-x-DdLfTClc.js";import{C as L}from"./circle-alert-BcdFzL-g.js";import{F as se}from"./filter-B31gylWk.js";import{S as ae}from"./search-s7xshAGp.js";import"./useForwardExpose-CYdwRePy.js";import"./users-BhZaHBdP.js";import"./RovingFocusGroup-Dsi-dyvh.js";import"./check-DCQm1Fl6.js";const le={class:"flex h-full flex-1 flex-col gap-6 p-6"},re={class:"grid gap-4 md:grid-cols-4"},oe={class:"text-2xl font-bold"},ne={class:"text-2xl font-bold text-green-600"},de={class:"text-xs text-muted-foreground"},ue={class:"text-2xl font-bold text-red-600"},ce={class:"text-2xl font-bold text-yellow-600"},ie={class:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-5"},fe={class:"space-y-2 sm:col-span-2 lg:col-span-1"},me={class:"relative"},_e={class:"space-y-2"},ge={class:"space-y-2"},xe={class:"space-y-2"},be={class:"space-y-2"},pe={class:"space-y-4"},ve={class:"space-y-3"},he={class:"flex items-center space-x-4 mb-3 sm:mb-0"},ye={class:"min-w-0 flex-1"},ke={class:"font-medium text-foreground truncate"},we={class:"text-sm text-muted-foreground"},Ce={class:"flex items-center justify-between sm:justify-end space-x-4"},Se={class:"text-left sm:text-right"},Ve={class:"text-sm font-medium text-foreground"},$e={class:"text-xs text-muted-foreground"},Ae={key:0,class:"text-center py-12"},Ge=J({__name:"AttendanceHistory",props:{student:{},classes:{},records:{},selected_class_id:{}},setup(T){var V;const S=T,I=[{title:"Dashboard",href:"/student/dashboard"},{title:"Attendance History",href:"#"}],d=K({class:((V=S.selected_class_id)==null?void 0:V.toString())||"all",search:"",status:"all",startDate:""}),p=k(()=>{var n;return((n=S.records)==null?void 0:n.data)||[]}),y=k(()=>{const n=(d.value.search||"").toLowerCase(),e=d.value.class;return p.value.filter(r=>{var $;const f=!e||e==="all"||String(r.class_id)===String(e),c=!n||(($=r.class_name)==null?void 0:$.toLowerCase().includes(n));return f&&c})}),P=()=>{Z.get("/student/attendance-history",{class_id:d.value.class==="all"?"":d.value.class},{preserveState:!0,preserveScroll:!0})},v=k(()=>{const n=p.value.length,e=p.value.filter(c=>c.status==="present").length,r=p.value.filter(c=>c.status==="absent").length,f=p.value.filter(c=>c.status==="excused").length;return{total:n,present:e,absent:r,excused:f,presentRate:n>0?Math.round(e/n*100):0}}),X=n=>{switch(n){case"present":return H;case"absent":return E;case"excused":return L;default:return C}},z=n=>{switch(n){case"present":return"default";case"absent":return"destructive";case"excused":return"secondary";default:return"outline"}},M=()=>{d.value={class:"",search:"",status:"",startDate:""},P()};return(n,e)=>(i(),h(w,null,[t(s(O),{title:"Attendance History"}),t(G,{breadcrumbs:I},{default:a(()=>[l("div",le,[e[24]||(e[24]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Attendance History"),l("p",{class:"text-muted-foreground"},"View your complete attendance record across all classes")],-1)),l("div",re,[t(s(m),null,{default:a(()=>[t(s(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(g),{class:"text-sm font-medium"},{default:a(()=>e[4]||(e[4]=[o("Total Sessions",-1)])),_:1,__:[4]}),t(s(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(x),null,{default:a(()=>[l("div",oe,u(v.value.total),1)]),_:1})]),_:1}),t(s(m),null,{default:a(()=>[t(s(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(g),{class:"text-sm font-medium"},{default:a(()=>e[5]||(e[5]=[o("Present",-1)])),_:1,__:[5]}),t(s(H),{class:"h-4 w-4 text-green-600"})]),_:1}),t(s(x),null,{default:a(()=>[l("div",ne,u(v.value.present),1),l("p",de,u(v.value.presentRate)+"% attendance rate",1)]),_:1})]),_:1}),t(s(m),null,{default:a(()=>[t(s(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(g),{class:"text-sm font-medium"},{default:a(()=>e[6]||(e[6]=[o("Absent",-1)])),_:1,__:[6]}),t(s(E),{class:"h-4 w-4 text-red-600"})]),_:1}),t(s(x),null,{default:a(()=>[l("div",ue,u(v.value.absent),1)]),_:1})]),_:1}),t(s(m),null,{default:a(()=>[t(s(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(g),{class:"text-sm font-medium"},{default:a(()=>e[7]||(e[7]=[o("Excused",-1)])),_:1,__:[7]}),t(s(L),{class:"h-4 w-4 text-yellow-600"})]),_:1}),t(s(x),null,{default:a(()=>[l("div",ce,u(v.value.excused),1)]),_:1})]),_:1})]),t(s(m),null,{default:a(()=>[t(s(_),null,{default:a(()=>[t(s(g),{class:"flex items-center gap-2"},{default:a(()=>[t(s(se),{class:"h-5 w-5"}),e[8]||(e[8]=o(" Filters ",-1))]),_:1,__:[8]}),t(s(F),null,{default:a(()=>e[9]||(e[9]=[o("Filter your attendance records by class, status, or date range",-1)])),_:1,__:[9]})]),_:1}),t(s(x),null,{default:a(()=>[l("div",ie,[l("div",fe,[e[10]||(e[10]=l("label",{class:"text-sm font-medium text-foreground"},"Search",-1)),l("div",me,[t(s(ae),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t(s(D),{modelValue:d.value.search,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value.search=r),placeholder:"Search classes...",class:"pl-10 bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input dark:text-foreground"},null,8,["modelValue"])])]),l("div",_e,[e[12]||(e[12]=l("label",{class:"text-sm font-medium text-foreground"},"Class",-1)),t(s(B),{modelValue:d.value.class,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value.class=r)},{default:a(()=>[t(s(N),{class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input"},{default:a(()=>[t(s(R),{placeholder:"All classes",class:"text-foreground"})]),_:1}),t(s(U),{class:"bg-background border-input dark:bg-background dark:border-input"},{default:a(()=>[t(s(b),{value:"all",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[11]||(e[11]=[o("All classes",-1)])),_:1,__:[11]}),(i(!0),h(w,null,A(n.classes,r=>(i(),j(s(b),{key:r.value,value:r.value,class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>[o(u(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",ge,[e[17]||(e[17]=l("label",{class:"text-sm font-medium text-foreground"},"Status",-1)),t(s(B),{modelValue:d.value.status,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value.status=r)},{default:a(()=>[t(s(N),{class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input"},{default:a(()=>[t(s(R),{placeholder:"All statuses",class:"text-foreground"})]),_:1}),t(s(U),{class:"bg-background border-input dark:bg-background dark:border-input"},{default:a(()=>[t(s(b),{value:"all",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[13]||(e[13]=[o("All statuses",-1)])),_:1,__:[13]}),t(s(b),{value:"present",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[14]||(e[14]=[o("Present",-1)])),_:1,__:[14]}),t(s(b),{value:"absent",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[15]||(e[15]=[o("Absent",-1)])),_:1,__:[15]}),t(s(b),{value:"excused",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[16]||(e[16]=[o("Excused",-1)])),_:1,__:[16]})]),_:1})]),_:1},8,["modelValue"])]),l("div",xe,[e[18]||(e[18]=l("label",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),t(s(D),{modelValue:d.value.startDate,"onUpdate:modelValue":e[3]||(e[3]=r=>d.value.startDate=r),type:"date",class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input dark:text-foreground"},null,8,["modelValue"])]),l("div",be,[e[20]||(e[20]=l("label",{class:"text-sm font-medium invisible"},"Clear",-1)),t(s(te),{onClick:M,variant:"outline",class:"w-full hover:bg-accent hover:text-accent-foreground transition-colors"},{default:a(()=>[t(s(q),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=o(" Clear Filters ",-1))]),_:1,__:[19]})])])]),_:1})]),_:1}),t(s(m),null,{default:a(()=>[t(s(_),null,{default:a(()=>[t(s(g),null,{default:a(()=>e[21]||(e[21]=[o("Attendance Records",-1)])),_:1,__:[21]}),t(s(F),null,{default:a(()=>[o(u(y.value.length)+" records found",1)]),_:1})]),_:1}),t(s(x),null,{default:a(()=>[l("div",pe,[l("div",ve,[(i(!0),h(w,null,A(y.value,r=>{var f;return i(),h("div",{key:r.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors bg-card"},[l("div",he,[(i(),j(W(X(r.status)),{class:Y(["h-5 w-5 flex-shrink-0",r.status==="present"?"text-green-600 dark:text-green-400":r.status==="absent"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"])},null,8,["class"])),l("div",ye,[l("div",ke,u(r.class_name),1),l("div",we,"Session "+u(r.session_date),1)])]),l("div",Ce,[l("div",Se,[l("div",Ve,u(r.session_date),1),l("div",$e,"Start: "+u(((f=r.start_time)==null?void 0:f.slice(11,16))||"â€”"),1)]),t(s(ee),{variant:z(r.status),class:"flex-shrink-0"},{default:a(()=>[o(u(r.status.charAt(0).toUpperCase()+r.status.slice(1)),1)]),_:2},1032,["variant"])])])}),128))]),y.value.length===0?(i(),h("div",Ae,[t(s(C),{class:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e[22]||(e[22]=l("h3",{class:"text-lg font-medium text-foreground mb-2"},"No records found",-1)),e[23]||(e[23]=l("p",{class:"text-muted-foreground max-w-md mx-auto"},"Try adjusting your filters to see more results, or check back later for new attendance records.",-1))])):Q("",!0)])]),_:1})]),_:1})])]),_:1})],64))}});export{Ge as default};
