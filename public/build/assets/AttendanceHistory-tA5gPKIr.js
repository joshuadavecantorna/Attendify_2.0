import{X as z,_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-ixThIx_M.js";import{d as q,r as G,c as k,a as v,o as i,b as t,e as s,h as J,w as a,f as l,i as o,t as u,F as w,g as V,j as $,k as K,l as O,n as Q,m as W}from"./app-rHDwbb4Q.js";import{_ as f,b as m,c as _,a as g,d as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-BppFqV3Y.js";import{_ as Y}from"./index-B_lcBpmg.js";import{_ as Z}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CBQ0C5ms.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-BLbWLp8i.js";import{_ as F,a as D,b as B,c as N,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-xlvIVxY4.js";import{C}from"./calendar-DbaUrS8a.js";import{C as R}from"./circle-check-big-C9JIRdFo.js";import{C as U}from"./circle-x-CtIqt0dt.js";import{C as H}from"./circle-alert-CcqWG5hI.js";import{F as ee}from"./filter-DG8_52s2.js";import{S as te}from"./search-XdPM8n4I.js";import"./useForwardExpose-lDhQ7ytw.js";import"./users-Du_3ypOv.js";import"./RovingFocusGroup-Crs4BQ3o.js";import"./check-CHUXsVyQ.js";const se={class:"flex h-full flex-1 flex-col gap-6 p-6"},ae={class:"grid gap-4 md:grid-cols-4"},le={class:"text-2xl font-bold"},re={class:"text-2xl font-bold text-green-600"},oe={class:"text-xs text-muted-foreground"},ne={class:"text-2xl font-bold text-red-600"},de={class:"text-2xl font-bold text-yellow-600"},ue={class:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-5"},ce={class:"space-y-2 sm:col-span-2 lg:col-span-1"},ie={class:"relative"},fe={class:"space-y-2"},me={class:"space-y-2"},_e={class:"space-y-2"},ge={class:"space-y-2"},xe={class:"space-y-4"},be={class:"space-y-3"},pe={class:"flex items-center space-x-4 mb-3 sm:mb-0"},ve={class:"min-w-0 flex-1"},he={class:"font-medium text-foreground truncate"},ye={class:"text-sm text-muted-foreground"},ke={class:"flex items-center justify-between sm:justify-end space-x-4"},we={class:"text-left sm:text-right"},Ce={class:"text-sm font-medium text-foreground"},Se={class:"text-xs text-muted-foreground"},Ve={key:0,class:"text-center py-12"},Me=q({__name:"AttendanceHistory",props:{student:{},classes:{},records:{},selected_class_id:{}},setup(E){const S=E,L=[{title:"Dashboard",href:"/student/dashboard"},{title:"Attendance History",href:"#"}],n=G({class:S.selected_class_id?.toString()||"all",search:"",status:"all",startDate:""}),b=k(()=>S.records?.data||[]),h=k(()=>{const d=(n.value.search||"").toLowerCase(),e=n.value.class;return b.value.filter(r=>{const y=!e||e==="all"||String(r.class_id)===String(e),c=!d||r.class_name?.toLowerCase().includes(d);return y&&c})}),T=()=>{W.get("/student/attendance-history",{class_id:n.value.class==="all"?"":n.value.class},{preserveState:!0,preserveScroll:!0})},p=k(()=>{const d=b.value.length,e=b.value.filter(c=>c.status==="present").length,r=b.value.filter(c=>c.status==="absent").length,y=b.value.filter(c=>c.status==="excused").length;return{total:d,present:e,absent:r,excused:y,presentRate:d>0?Math.round(e/d*100):0}}),I=d=>{switch(d){case"present":return R;case"absent":return U;case"excused":return H;default:return C}},P=d=>{switch(d){case"present":return"default";case"absent":return"destructive";case"excused":return"secondary";default:return"outline"}},X=()=>{n.value={class:"",search:"",status:"",startDate:""},T()};return(d,e)=>(i(),v(w,null,[t(s(J),{title:"Attendance History"}),t(M,{breadcrumbs:L},{default:a(()=>[l("div",se,[e[24]||(e[24]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Attendance History"),l("p",{class:"text-muted-foreground"},"View your complete attendance record across all classes")],-1)),l("div",ae,[t(s(f),null,{default:a(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(_),{class:"text-sm font-medium"},{default:a(()=>e[4]||(e[4]=[o("Total Sessions",-1)])),_:1,__:[4]}),t(s(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(g),null,{default:a(()=>[l("div",le,u(p.value.total),1)]),_:1})]),_:1}),t(s(f),null,{default:a(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(_),{class:"text-sm font-medium"},{default:a(()=>e[5]||(e[5]=[o("Present",-1)])),_:1,__:[5]}),t(s(R),{class:"h-4 w-4 text-green-600"})]),_:1}),t(s(g),null,{default:a(()=>[l("div",re,u(p.value.present),1),l("p",oe,u(p.value.presentRate)+"% attendance rate",1)]),_:1})]),_:1}),t(s(f),null,{default:a(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(_),{class:"text-sm font-medium"},{default:a(()=>e[6]||(e[6]=[o("Absent",-1)])),_:1,__:[6]}),t(s(U),{class:"h-4 w-4 text-red-600"})]),_:1}),t(s(g),null,{default:a(()=>[l("div",ne,u(p.value.absent),1)]),_:1})]),_:1}),t(s(f),null,{default:a(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(s(_),{class:"text-sm font-medium"},{default:a(()=>e[7]||(e[7]=[o("Excused",-1)])),_:1,__:[7]}),t(s(H),{class:"h-4 w-4 text-yellow-600"})]),_:1}),t(s(g),null,{default:a(()=>[l("div",de,u(p.value.excused),1)]),_:1})]),_:1})]),t(s(f),null,{default:a(()=>[t(s(m),null,{default:a(()=>[t(s(_),{class:"flex items-center gap-2"},{default:a(()=>[t(s(ee),{class:"h-5 w-5"}),e[8]||(e[8]=o(" Filters ",-1))]),_:1,__:[8]}),t(s(A),null,{default:a(()=>e[9]||(e[9]=[o("Filter your attendance records by class, status, or date range",-1)])),_:1,__:[9]})]),_:1}),t(s(g),null,{default:a(()=>[l("div",ue,[l("div",ce,[e[10]||(e[10]=l("label",{class:"text-sm font-medium text-foreground"},"Search",-1)),l("div",ie,[t(s(te),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t(s(j),{modelValue:n.value.search,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value.search=r),placeholder:"Search classes...",class:"pl-10 bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input dark:text-foreground"},null,8,["modelValue"])])]),l("div",fe,[e[12]||(e[12]=l("label",{class:"text-sm font-medium text-foreground"},"Class",-1)),t(s(F),{modelValue:n.value.class,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value.class=r)},{default:a(()=>[t(s(D),{class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input"},{default:a(()=>[t(s(B),{placeholder:"All classes",class:"text-foreground"})]),_:1}),t(s(N),{class:"bg-background border-input dark:bg-background dark:border-input"},{default:a(()=>[t(s(x),{value:"all",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[11]||(e[11]=[o("All classes",-1)])),_:1,__:[11]}),(i(!0),v(w,null,V(d.classes,r=>(i(),$(s(x),{key:r.value,value:r.value,class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>[o(u(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",me,[e[17]||(e[17]=l("label",{class:"text-sm font-medium text-foreground"},"Status",-1)),t(s(F),{modelValue:n.value.status,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value.status=r)},{default:a(()=>[t(s(D),{class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input"},{default:a(()=>[t(s(B),{placeholder:"All statuses",class:"text-foreground"})]),_:1}),t(s(N),{class:"bg-background border-input dark:bg-background dark:border-input"},{default:a(()=>[t(s(x),{value:"all",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[13]||(e[13]=[o("All statuses",-1)])),_:1,__:[13]}),t(s(x),{value:"present",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[14]||(e[14]=[o("Present",-1)])),_:1,__:[14]}),t(s(x),{value:"absent",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[15]||(e[15]=[o("Absent",-1)])),_:1,__:[15]}),t(s(x),{value:"excused",class:"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"},{default:a(()=>e[16]||(e[16]=[o("Excused",-1)])),_:1,__:[16]})]),_:1})]),_:1},8,["modelValue"])]),l("div",_e,[e[18]||(e[18]=l("label",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),t(s(j),{modelValue:n.value.startDate,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value.startDate=r),type:"date",class:"bg-background border-input hover:border-ring focus:border-ring transition-colors dark:bg-background dark:border-input dark:text-foreground"},null,8,["modelValue"])]),l("div",ge,[e[20]||(e[20]=l("label",{class:"text-sm font-medium invisible"},"Clear",-1)),t(s(Z),{onClick:X,variant:"outline",class:"w-full hover:bg-accent hover:text-accent-foreground transition-colors"},{default:a(()=>[t(s(z),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=o(" Clear Filters ",-1))]),_:1,__:[19]})])])]),_:1})]),_:1}),t(s(f),null,{default:a(()=>[t(s(m),null,{default:a(()=>[t(s(_),null,{default:a(()=>e[21]||(e[21]=[o("Attendance Records",-1)])),_:1,__:[21]}),t(s(A),null,{default:a(()=>[o(u(h.value.length)+" records found",1)]),_:1})]),_:1}),t(s(g),null,{default:a(()=>[l("div",xe,[l("div",be,[(i(!0),v(w,null,V(h.value,r=>(i(),v("div",{key:r.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors bg-card"},[l("div",pe,[(i(),$(O(I(r.status)),{class:Q(["h-5 w-5 flex-shrink-0",r.status==="present"?"text-green-600 dark:text-green-400":r.status==="absent"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"])},null,8,["class"])),l("div",ve,[l("div",he,u(r.class_name),1),l("div",ye,"Session "+u(r.session_date),1)])]),l("div",ke,[l("div",we,[l("div",Ce,u(r.session_date),1),l("div",Se,"Start: "+u(r.start_time?.slice(11,16)||"â€”"),1)]),t(s(Y),{variant:P(r.status),class:"flex-shrink-0"},{default:a(()=>[o(u(r.status.charAt(0).toUpperCase()+r.status.slice(1)),1)]),_:2},1032,["variant"])])]))),128))]),h.value.length===0?(i(),v("div",Ve,[t(s(C),{class:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e[22]||(e[22]=l("h3",{class:"text-lg font-medium text-foreground mb-2"},"No records found",-1)),e[23]||(e[23]=l("p",{class:"text-muted-foreground max-w-md mx-auto"},"Try adjusting your filters to see more results, or check back later for new attendance records.",-1))])):K("",!0)])]),_:1})]),_:1})])]),_:1})],64))}});export{Me as default};
