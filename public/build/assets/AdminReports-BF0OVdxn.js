import{F as Z,_ as pe}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as ce,r as R,u as ve,c as N,a as f,o as r,b as s,e as t,h as ye,w as a,f as n,t as o,F as v,g,i as u,j as S,k as w,l as xe,n as ee,m as te}from"./app-DW-4G1vZ.js";import{_ as y,a as x,b as B,c as I,d as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as E}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as be}from"./index-r1g3ib2J.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-DnmVy0AL.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-PYw3eRzO.js";import{_ as h,a as C,b as V,c as $,d as k,C as ge,e as ke}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqZ9_JK4.js";import{_ as we,a as Se,b as he,c as Ce,d as Ve}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B2g3MDQd.js";import{_ as $e}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DNdUMzvb.js";import{U as se}from"./users-BhZaHBdP.js";import{U as le}from"./user-check-D5nAARhN.js";import{U as Ae}from"./user-x-DRVKnuMx.js";import{T as De}from"./triangle-alert-yy_V6cyR.js";import{C as Ee}from"./clock-DQA8MFeI.js";import{F as Ue}from"./filter-B31gylWk.js";import{D as Te}from"./download-r_jayyTT.js";import{M as je}from"./mail-DdYlTcZx.js";import"./useForwardExpose-CYdwRePy.js";import"./RovingFocusGroup-Dsi-dyvh.js";import"./check-DCQm1Fl6.js";const Fe={class:"flex flex-1 flex-col gap-4 p-4 pt-4"},Re={class:"flex h-full flex-1 flex-col gap-6"},Ne={class:"grid gap-4 md:grid-cols-5"},Be={class:"flex items-center justify-between mb-2"},Ie={class:"text-2xl font-bold mt-1"},Le={class:"flex items-center justify-between mb-2"},Oe={class:"text-2xl font-bold mt-1 text-green-600"},Pe={class:"flex items-center justify-between mb-2"},Me={class:"text-2xl font-bold mt-1 text-red-600"},Ye={class:"flex items-center justify-between mb-2"},qe={class:"text-2xl font-bold mt-1 text-yellow-600"},ze={class:"flex items-center justify-between mb-2"},Ge={class:"text-2xl font-bold mt-1 text-orange-600"},Xe={class:"grid gap-4 md:grid-cols-4"},He={class:"flex items-center justify-between mb-2"},Je={class:"text-2xl font-bold mt-1"},Ke={class:"flex items-center justify-between mb-2"},Qe={class:"text-2xl font-bold mt-1 text-emerald-600"},We={class:"space-y-1"},Ze={class:"font-medium"},et={class:"space-y-1"},tt={class:"font-medium"},st={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-5"},lt={class:"space-y-2"},at={class:"space-y-2"},nt={class:"space-y-2"},dt={class:"space-y-2"},ot={class:"space-y-2"},ut={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-6 mt-4"},it={class:"space-y-2"},rt={class:"space-y-2"},_t={class:"space-y-2"},mt={class:"space-y-2"},ft={class:"space-y-2"},pt={class:"space-y-2"},ct={class:"space-y-2"},vt={class:"flex flex-wrap gap-3"},yt={class:"overflow-x-auto"},xt={class:"w-full"},bt={class:"border-b"},gt=["onClick"],kt={class:"flex items-center gap-2"},wt={class:"px-4 py-3"},St={class:"font-medium"},ht={class:"text-sm text-muted-foreground"},Ct={class:"px-4 py-3"},Vt={class:"font-medium"},$t={class:"text-sm text-muted-foreground"},At={class:"px-4 py-3"},Dt={class:"px-4 py-3"},Et={class:"px-4 py-3"},Ut={class:"px-4 py-3"},Tt={class:"px-4 py-3"},jt={key:0},Ft={class:"space-y-4"},Rt={class:"space-y-2"},Nt={key:0,class:"text-sm text-red-600"},Bt={class:"text-sm text-gray-800 dark:text-gray-200"},It={class:"list-disc list-inside space-y-1 mt-2 text-gray-700 dark:text-gray-300"},Lt={key:0},Ot={key:1},Pt={key:2},Mt={key:3},Yt={key:4},qt={key:5},zt={key:6},Gt={class:"text-sm bg-blue-50 dark:bg-blue-900 p-3 rounded border"},Xt={class:"text-gray-900 dark:text-gray-100"},Ht={class:"font-semibold"},Jt={key:0},Kt={key:1},xs=ce({__name:"AdminReports",props:{summaryStats:{},studentStats:{},attendanceRecords:{},departments:{},teachers:{},classes:{},students:{},courses:{},sections:{},years:{},filters:{}},setup(ae){var M,Y,q,z,G,X,H,J,K,Q;const _=ae,ne=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"#"}],d=R({department:((M=_.filters)==null?void 0:M.department)||"",teacher_id:((Y=_.filters)==null?void 0:Y.teacher_id)||"",class_id:((q=_.filters)==null?void 0:q.class_id)||"",student_id:((z=_.filters)==null?void 0:z.student_id)||"",course:((G=_.filters)==null?void 0:G.course)||"",section:((X=_.filters)==null?void 0:X.section)||"",year:((H=_.filters)==null?void 0:H.year)||"",date_from:((J=_.filters)==null?void 0:J.date_from)||"",date_to:((K=_.filters)==null?void 0:K.date_to)||"",status:((Q=_.filters)==null?void 0:Q.status)||""}),c=ve({email:"",department:"",teacher_id:"",class_id:"",date_from:"",date_to:"",status:""}),T=R(!1);N(()=>_.classes||[]);const A=R({key:"student_name",direction:"asc"}),F=N(()=>{var i;return((i=_.attendanceRecords)==null?void 0:i.data)||[]}),j=N(()=>!F.value||!Array.isArray(F.value)?[]:F.value.map(i=>({id:i.id,student_name:i.student_name,student_id:i.student_number,student_course:i.student_course,student_section:i.student_section,student_year:i.student_year,class_name:i.class_name,class_course:i.class_course,teacher_name:`${i.teacher_first_name} ${i.teacher_last_name}`,department:i.department,date:i.session_date,time_in:i.start_time,time_out:i.end_time,status:i.status,marked_at:i.marked_at}))),de=i=>{A.value.key===i?A.value.direction=A.value.direction==="asc"?"desc":"asc":(A.value.key=i,A.value.direction="asc")},oe=()=>{te.get("/admin/reports",d.value,{preserveState:!0,preserveScroll:!0,only:["attendanceRecords","summaryStats"]})},ue=()=>{d.value={department:"",teacher_id:"",class_id:"",student_id:"",course:"",section:"",year:"",date_from:"",date_to:"",status:""},te.get("/admin/reports",{},{preserveState:!0,preserveScroll:!0,only:["attendanceRecords","summaryStats"]})},ie=()=>{const e=[["Student Name","Student ID","Class","Course","Teacher","Department","Date","Status","Time In","Time Out","Marked At"].join(","),...j.value.map(p=>[`"${p.student_name}"`,`"${p.student_id}"`,`"${p.class_name}"`,`"${p.class_course}"`,`"${p.teacher_name}"`,`"${p.department}"`,`"${p.date}"`,`"${p.status}"`,`"${p.time_in}"`,`"${p.time_out}"`,`"${p.marked_at||"N/A"}"`].join(","))].join(`
`),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");if(m.download!==void 0){const p=URL.createObjectURL(l);m.setAttribute("href",p),m.setAttribute("download",`attendance-report-${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}},re=()=>{var l;const i=document.createElement("form");i.method="POST",i.action="/admin/reports/export-pdf",i.target="_blank";const e=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");if(e){const m=document.createElement("input");m.type="hidden",m.name="_token",m.value=e,i.appendChild(m)}Object.entries(d.value).forEach(([m,p])=>{if(p!==""&&p!==null&&p!==void 0){const D=document.createElement("input");D.type="hidden",D.name=m,D.value=p.toString(),i.appendChild(D)}}),document.body.appendChild(i),i.submit(),document.body.removeChild(i)},_e=()=>{c.department=d.value.department,c.teacher_id=d.value.teacher_id,c.class_id=d.value.class_id,c.date_from=d.value.date_from,c.date_to=d.value.date_to,c.status=d.value.status,T.value=!0},me=()=>{c.post("/admin/reports/email",{onSuccess:()=>{T.value=!1,c.reset()},onError:i=>{console.error("Email send errors:",i)}})},fe=i=>{switch(i.toLowerCase()){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"excused":return"bg-yellow-100 text-yellow-800";case"late":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},P=i=>A.value.key!==i?null:A.value.direction==="asc"?ge:ke;return(i,e)=>(r(),f(v,null,[s(t(ye),{title:"Reports"}),s(pe,{breadcrumbs:ne},{default:a(()=>[n("div",Fe,[n("div",Re,[e[55]||(e[55]=n("div",null,[n("h1",{class:"text-3xl font-bold"},"Attendance Reports"),n("p",{class:"text-muted-foreground"},"Generate and export comprehensive attendance reports")],-1)),n("div",Ne,[s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",Be,[s(t(se),{class:"h-5 w-5 text-blue-500"}),e[13]||(e[13]=n("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1))]),e[14]||(e[14]=n("span",{class:"text-sm font-medium"},"Total Records",-1)),n("div",Ie,o(((l=_.summaryStats)==null?void 0:l.total)||0),1)]}),_:1,__:[14]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",Le,[s(t(le),{class:"h-5 w-5 text-green-500"}),e[15]||(e[15]=n("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1))]),e[16]||(e[16]=n("span",{class:"text-sm font-medium"},"Present",-1)),n("div",Oe,o(((l=_.summaryStats)==null?void 0:l.present)||0),1)]}),_:1,__:[16]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",Pe,[s(t(Ae),{class:"h-5 w-5 text-red-500"}),e[17]||(e[17]=n("div",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1))]),e[18]||(e[18]=n("span",{class:"text-sm font-medium"},"Absent",-1)),n("div",Me,o(((l=_.summaryStats)==null?void 0:l.absent)||0),1)]}),_:1,__:[18]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",Ye,[s(t(De),{class:"h-5 w-5 text-yellow-500"}),e[19]||(e[19]=n("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"},null,-1))]),e[20]||(e[20]=n("span",{class:"text-sm font-medium"},"Excused",-1)),n("div",qe,o(((l=_.summaryStats)==null?void 0:l.excused)||0),1)]}),_:1,__:[20]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",ze,[s(t(Ee),{class:"h-5 w-5 text-orange-500"}),e[21]||(e[21]=n("div",{class:"w-2 h-2 bg-orange-500 rounded-full"},null,-1))]),e[22]||(e[22]=n("span",{class:"text-sm font-medium"},"Late",-1)),n("div",Ge,o(((l=_.summaryStats)==null?void 0:l.late)||0),1)]}),_:1,__:[22]})]),_:1})]),n("div",Xe,[s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",He,[s(t(se),{class:"h-5 w-5 text-purple-500"}),e[23]||(e[23]=n("div",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1))]),e[24]||(e[24]=n("span",{class:"text-sm font-medium"},"Total Students",-1)),n("div",Je,o(((l=_.studentStats)==null?void 0:l.total_students)||0),1)]}),_:1,__:[24]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[n("div",Ke,[s(t(le),{class:"h-5 w-5 text-emerald-500"}),e[25]||(e[25]=n("div",{class:"w-2 h-2 bg-emerald-500 rounded-full"},null,-1))]),e[26]||(e[26]=n("span",{class:"text-sm font-medium"},"Active Students",-1)),n("div",Qe,o(((l=_.studentStats)==null?void 0:l.active_students)||0),1)]}),_:1,__:[26]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[e[27]||(e[27]=n("div",{class:"flex items-center justify-between mb-2"},[n("span",{class:"text-sm font-medium"},"Students by Course")],-1)),n("div",We,[(r(!0),f(v,null,g((((l=_.studentStats)==null?void 0:l.students_by_course)||[]).slice(0,3),m=>(r(),f("div",{key:m.course,class:"flex justify-between text-sm"},[n("span",null,o(m.course),1),n("span",Ze,o(m.count),1)]))),128))])]}),_:1,__:[27]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>{var l;return[e[28]||(e[28]=n("div",{class:"flex items-center justify-between mb-2"},[n("span",{class:"text-sm font-medium"},"Students by Year")],-1)),n("div",et,[(r(!0),f(v,null,g((((l=_.studentStats)==null?void 0:l.students_by_year)||[]).slice(0,3),m=>(r(),f("div",{key:m.year,class:"flex justify-between text-sm"},[n("span",null,o(m.year),1),n("span",tt,o(m.count),1)]))),128))])]}),_:1,__:[28]})]),_:1})]),s(t(y),null,{default:a(()=>[s(t(B),null,{default:a(()=>[s(t(I),{class:"flex items-center gap-2"},{default:a(()=>[s(t(Ue),{class:"h-5 w-5"}),e[29]||(e[29]=u(" Filters ",-1))]),_:1,__:[29]}),s(t(L),null,{default:a(()=>e[30]||(e[30]=[u("Filter attendance records by class, date range, and status",-1)])),_:1,__:[30]})]),_:1}),s(t(x),null,{default:a(()=>[n("div",st,[n("div",lt,[s(t(b),null,{default:a(()=>e[31]||(e[31]=[u("Department",-1)])),_:1,__:[31]}),s(t(h),{modelValue:d.value.department,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.department=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Departments"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.departments||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",at,[s(t(b),null,{default:a(()=>e[32]||(e[32]=[u("Teacher",-1)])),_:1,__:[32]}),s(t(h),{modelValue:d.value.teacher_id,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.teacher_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Teachers"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.teachers||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",nt,[s(t(b),null,{default:a(()=>e[33]||(e[33]=[u("Class",-1)])),_:1,__:[33]}),s(t(h),{modelValue:d.value.class_id,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.class_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Classes"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.classes||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name)+" ("+o(l.course)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",dt,[s(t(b),null,{default:a(()=>e[34]||(e[34]=[u("Student",-1)])),_:1,__:[34]}),s(t(h),{modelValue:d.value.student_id,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.student_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Students"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.students||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name)+" ("+o(l.student_id)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",ot,[s(t(b),null,{default:a(()=>e[35]||(e[35]=[u("Course",-1)])),_:1,__:[35]}),s(t(h),{modelValue:d.value.course,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value.course=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Courses"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.courses||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),n("div",ut,[n("div",it,[s(t(b),null,{default:a(()=>e[36]||(e[36]=[u("Section",-1)])),_:1,__:[36]}),s(t(h),{modelValue:d.value.section,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value.section=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Sections"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.sections||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",rt,[s(t(b),null,{default:a(()=>e[37]||(e[37]=[u("Year",-1)])),_:1,__:[37]}),s(t(h),{modelValue:d.value.year,"onUpdate:modelValue":e[6]||(e[6]=l=>d.value.year=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Years"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),f(v,null,g(_.years||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",_t,[s(t(b),null,{default:a(()=>e[38]||(e[38]=[u("Start Date",-1)])),_:1,__:[38]}),s(t(O),{type:"date",modelValue:d.value.date_from,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.date_from=l)},null,8,["modelValue"])]),n("div",mt,[s(t(b),null,{default:a(()=>e[39]||(e[39]=[u("End Date",-1)])),_:1,__:[39]}),s(t(O),{type:"date",modelValue:d.value.date_to,"onUpdate:modelValue":e[8]||(e[8]=l=>d.value.date_to=l)},null,8,["modelValue"])]),n("div",ft,[s(t(b),null,{default:a(()=>e[40]||(e[40]=[u("Status",-1)])),_:1,__:[40]}),s(t(h),{modelValue:d.value.status,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value.status=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Status"})]),_:1}),s(t($),null,{default:a(()=>[s(t(k),{value:"present"},{default:a(()=>e[41]||(e[41]=[u("Present",-1)])),_:1,__:[41]}),s(t(k),{value:"absent"},{default:a(()=>e[42]||(e[42]=[u("Absent",-1)])),_:1,__:[42]}),s(t(k),{value:"excused"},{default:a(()=>e[43]||(e[43]=[u("Excused",-1)])),_:1,__:[43]}),s(t(k),{value:"late"},{default:a(()=>e[44]||(e[44]=[u("Late",-1)])),_:1,__:[44]})]),_:1})]),_:1},8,["modelValue"])]),n("div",pt,[s(t(b),null,{default:a(()=>e[45]||(e[45]=[u("Â ",-1)])),_:1,__:[45]}),n("div",ct,[s(t(E),{onClick:oe,class:"w-full"},{default:a(()=>e[46]||(e[46]=[u(" Apply Filters ",-1)])),_:1,__:[46]}),s(t(E),{variant:"outline",onClick:ue,class:"w-full"},{default:a(()=>e[47]||(e[47]=[u(" Clear Filters ",-1)])),_:1,__:[47]})])])])]),_:1})]),_:1}),s(t(y),null,{default:a(()=>[s(t(B),null,{default:a(()=>[s(t(I),{class:"flex items-center gap-2"},{default:a(()=>[s(t(Te),{class:"h-5 w-5"}),e[48]||(e[48]=u(" Export & Share ",-1))]),_:1,__:[48]}),s(t(L),null,{default:a(()=>e[49]||(e[49]=[u("Download reports or send via email",-1)])),_:1,__:[49]})]),_:1}),s(t(x),null,{default:a(()=>[n("div",vt,[s(t(E),{onClick:ie,class:"flex items-center gap-2"},{default:a(()=>[s(t(Z),{class:"h-4 w-4"}),e[50]||(e[50]=u(" Export to Excel ",-1))]),_:1,__:[50]}),s(t(E),{onClick:re,variant:"outline",class:"flex items-center gap-2"},{default:a(()=>[s(t(Z),{class:"h-4 w-4"}),e[51]||(e[51]=u(" Export to PDF ",-1))]),_:1,__:[51]}),s(t(E),{onClick:_e,variant:"outline",class:"flex items-center gap-2"},{default:a(()=>[s(t(je),{class:"h-4 w-4"}),e[52]||(e[52]=u(" Email Report ",-1))]),_:1,__:[52]})])]),_:1})]),_:1}),s(t(y),null,{default:a(()=>[s(t(B),null,{default:a(()=>[s(t(I),null,{default:a(()=>e[53]||(e[53]=[u("Attendance Records",-1)])),_:1,__:[53]}),s(t(L),null,{default:a(()=>[u(o(j.value.length)+" records found",1)]),_:1})]),_:1}),s(t(x),null,{default:a(()=>[n("div",yt,[n("table",xt,[n("thead",null,[n("tr",bt,[(r(),f(v,null,g([{key:"student_name",label:"Student"},{key:"student_course",label:"Course"},{key:"class_name",label:"Class"},{key:"teacher_name",label:"Teacher"},{key:"date",label:"Date"},{key:"status",label:"Status"},{key:"time_in",label:"Time In"}],l=>n("th",{key:l.key,onClick:m=>de(l.key),class:"px-4 py-3 text-left font-medium text-sm cursor-pointer hover:bg-gray-50 transition-colors"},[n("div",kt,[u(o(l.label)+" ",1),P(l.key)?(r(),S(xe(P(l.key)),{key:0,class:"h-4 w-4"})):w("",!0)])],8,gt)),64))])]),n("tbody",null,[(r(!0),f(v,null,g(j.value,l=>(r(),f("tr",{key:l.id,class:"border-b hover:bg-gray-50"},[n("td",wt,[n("div",null,[n("div",St,o(l.student_name),1),n("div",ht,o(l.student_id),1)])]),n("td",Ct,[n("div",null,[n("div",Vt,o(l.student_course),1),n("div",$t,o(l.student_section)+" - "+o(l.student_year),1)])]),n("td",At,o(l.class_name),1),n("td",Dt,o(l.teacher_name),1),n("td",Et,o(l.date),1),n("td",Ut,[s(t(be),{class:ee(fe(l.status))},{default:a(()=>[u(o(l.status.charAt(0).toUpperCase()+l.status.slice(1)),1)]),_:2},1032,["class"])]),n("td",Tt,o(l.time_in),1)]))),128)),j.value.length===0?(r(),f("tr",jt,e[54]||(e[54]=[n("td",{colspan:"7",class:"px-4 py-8 text-center text-muted-foreground"}," No records found matching your filters. ",-1)]))):w("",!0)])])])]),_:1})]),_:1})])]),s(t(we),{open:T.value,"onUpdate:open":e[12]||(e[12]=l=>T.value=l)},{default:a(()=>[s(t(Se),{class:"sm:max-w-[425px] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"},{default:a(()=>{var l,m,p,D,W;return[s(t(he),null,{default:a(()=>[s(t(Ce),{class:"text-gray-900 dark:text-gray-100"},{default:a(()=>e[56]||(e[56]=[u("Email Report",-1)])),_:1,__:[56]}),s(t(Ve),{class:"text-gray-600 dark:text-gray-400"},{default:a(()=>e[57]||(e[57]=[u(" Send the attendance report to an email address as a PDF attachment. ",-1)])),_:1,__:[57]})]),_:1}),n("div",Ft,[n("div",Rt,[s(t(b),{for:"email"},{default:a(()=>e[58]||(e[58]=[u("Email Address *",-1)])),_:1,__:[58]}),s(t(O),{id:"email",type:"email",modelValue:t(c).email,"onUpdate:modelValue":e[10]||(e[10]=U=>t(c).email=U),placeholder:"Enter email address",class:ee({"border-red-500":t(c).errors.email})},null,8,["modelValue","class"]),t(c).errors.email?(r(),f("div",Nt,o(t(c).errors.email),1)):w("",!0)]),n("div",Bt,[e[59]||(e[59]=n("p",{class:"font-semibold text-gray-900 dark:text-gray-100"},"Current Filters:",-1)),n("ul",It,[d.value.department?(r(),f("li",Lt,"Department: "+o(d.value.department),1)):w("",!0),d.value.teacher_id?(r(),f("li",Ot,"Teacher: "+o((m=(l=_.teachers)==null?void 0:l.find(U=>U.id.toString()===d.value.teacher_id))==null?void 0:m.name),1)):w("",!0),d.value.class_id?(r(),f("li",Pt,"Class: "+o((D=(p=_.classes)==null?void 0:p.find(U=>U.id.toString()===d.value.class_id))==null?void 0:D.name),1)):w("",!0),d.value.date_from?(r(),f("li",Mt,"From: "+o(d.value.date_from),1)):w("",!0),d.value.date_to?(r(),f("li",Yt,"To: "+o(d.value.date_to),1)):w("",!0),d.value.status?(r(),f("li",qt,"Status: "+o(d.value.status),1)):w("",!0),Object.values(d.value).some(Boolean)?w("",!0):(r(),f("li",zt,"No filters applied (all records)"))])]),n("div",Gt,[n("p",Xt,[n("span",Ht,o(((W=_.summaryStats)==null?void 0:W.total)||0),1),e[60]||(e[60]=u(" records will be included in the report.",-1))])])]),s(t($e),null,{default:a(()=>[s(t(E),{type:"button",variant:"outline",onClick:e[11]||(e[11]=U=>T.value=!1)},{default:a(()=>e[61]||(e[61]=[u(" Cancel ",-1)])),_:1,__:[61]}),s(t(E),{type:"submit",onClick:me,disabled:t(c).processing},{default:a(()=>[t(c).processing?(r(),f("span",Jt,"Sending...")):(r(),f("span",Kt,"Send Report"))]),_:1},8,["disabled"])]),_:1})]}),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{xs as default};
