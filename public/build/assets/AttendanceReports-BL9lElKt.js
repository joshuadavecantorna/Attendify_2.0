import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as F,r as T,a as m,o as _,b as n,e as t,h as j,w as e,f as d,i as s,F as v,g as k,j as p,t as u,k as I}from"./app-DW-4G1vZ.js";import{_ as y,b as C,c as b,a as x,d as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as A}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as w}from"./index-r1g3ib2J.js";import{_ as P,a as E,b as G,c as M,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqZ9_JK4.js";import{_ as q,a as z,b as g,c as i,d as H,e as r}from"./TableHeader.vue_vue_type_script_setup_true_lang-BWbqAahd.js";import"./useForwardExpose-CYdwRePy.js";import"./users-BhZaHBdP.js";import"./RovingFocusGroup-Dsi-dyvh.js";import"./check-DCQm1Fl6.js";const J={class:"container mx-auto p-6 space-y-6"},K={class:"flex gap-4 items-end"},O={class:"flex-1"},Q={key:0,class:"text-center py-8"},W={class:"font-medium"},X={class:"text-sm text-muted-foreground"},Y={class:"text-green-600 font-medium"},Z={class:"text-red-600 font-medium"},h={class:"flex items-center gap-2"},tt={class:"font-medium"},ft=F({__name:"AttendanceReports",props:{teacher:{},classes:{},sessions:{},selectedClassId:{}},setup(D){var $;const N=D,V=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Reports",href:"/teacher/reports"},{title:"Attendance Reports",href:"/teacher/reports/attendance"}],f=T((($=N.selectedClassId)==null?void 0:$.toString())||"all"),B=()=>{f.value&&f.value!=="all"?window.location.href=`/teacher/reports/attendance?class_id=${f.value}`:window.location.href="/teacher/reports/attendance"},c=(o,a)=>a>0?Math.round(o/a*100):0,R=o=>o>=90?"default":o>=75?"secondary":o>=60?"outline":"destructive";return(o,a)=>(_(),m(v,null,[n(t(j),{title:"Attendance Reports"}),n(U,{breadcrumbs:V},{default:e(()=>[d("div",J,[a[18]||(a[18]=d("div",{class:"space-y-2"},[d("h1",{class:"text-3xl font-bold tracking-tight"},"Attendance Reports"),d("p",{class:"text-muted-foreground"}," Detailed attendance analytics and trends for your classes ")],-1)),n(t(y),null,{default:e(()=>[n(t(C),null,{default:e(()=>[n(t(b),null,{default:e(()=>a[2]||(a[2]=[s("Filters",-1)])),_:1,__:[2]})]),_:1}),n(t(x),null,{default:e(()=>[d("div",K,[d("div",O,[a[4]||(a[4]=d("label",{class:"text-sm font-medium"},"Class",-1)),n(t(P),{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=l=>f.value=l)},{default:e(()=>[n(t(E),null,{default:e(()=>[n(t(G),{placeholder:"All Classes"})]),_:1}),n(t(M),null,{default:e(()=>[n(t(S),{value:"all"},{default:e(()=>a[3]||(a[3]=[s("All Classes",-1)])),_:1,__:[3]}),(_(!0),m(v,null,k(o.classes,l=>(_(),p(t(S),{key:l.id,value:l.id.toString()},{default:e(()=>[s(u(l.name)+" ("+u(l.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n(t(A),{onClick:B},{default:e(()=>a[5]||(a[5]=[s("Apply Filter",-1)])),_:1,__:[5]})])]),_:1})]),_:1}),n(t(y),null,{default:e(()=>[n(t(C),null,{default:e(()=>[n(t(b),null,{default:e(()=>a[6]||(a[6]=[s("Attendance Sessions",-1)])),_:1,__:[6]}),n(t(L),null,{default:e(()=>[s(u(o.sessions.length)+" session(s) found ",1)]),_:1})]),_:1}),n(t(x),null,{default:e(()=>[o.sessions.length===0?(_(),m("div",Q,[a[8]||(a[8]=d("p",{class:"text-muted-foreground"},"No attendance sessions found.",-1)),n(t(A),{onClick:a[1]||(a[1]=l=>o.$inertia.visit("/teacher/attendance")),class:"mt-4"},{default:e(()=>a[7]||(a[7]=[s(" Start Taking Attendance ",-1)])),_:1,__:[7]})])):(_(),p(t(q),{key:1},{default:e(()=>[n(t(z),null,{default:e(()=>[n(t(g),null,{default:e(()=>[n(t(i),null,{default:e(()=>a[9]||(a[9]=[s("Class",-1)])),_:1,__:[9]}),n(t(i),null,{default:e(()=>a[10]||(a[10]=[s("Session",-1)])),_:1,__:[10]}),n(t(i),null,{default:e(()=>a[11]||(a[11]=[s("Date",-1)])),_:1,__:[11]}),n(t(i),null,{default:e(()=>a[12]||(a[12]=[s("Present",-1)])),_:1,__:[12]}),n(t(i),null,{default:e(()=>a[13]||(a[13]=[s("Absent",-1)])),_:1,__:[13]}),n(t(i),null,{default:e(()=>a[14]||(a[14]=[s("Total",-1)])),_:1,__:[14]}),n(t(i),null,{default:e(()=>a[15]||(a[15]=[s("Attendance Rate",-1)])),_:1,__:[15]}),n(t(i),null,{default:e(()=>a[16]||(a[16]=[s("Status",-1)])),_:1,__:[16]})]),_:1})]),_:1}),n(t(H),null,{default:e(()=>[(_(!0),m(v,null,k(o.sessions.filter(l=>l&&l.id),l=>(_(),p(t(g),{key:l.id},{default:e(()=>[n(t(r),null,{default:e(()=>[d("div",null,[d("div",W,u(l.class_name||"Unknown Class"),1),d("div",X,u(l.course||"Unknown")+" - "+u(l.section||"Unknown"),1)])]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.session_name||"Unnamed Session"),1)]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.session_date?new Date(l.session_date).toLocaleDateString():"Unknown Date"),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("span",Y,u(l.present_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("span",Z,u(l.absent_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[s(u(l.total_count||0),1)]),_:2},1024),n(t(r),null,{default:e(()=>[d("div",h,[d("span",tt,u(c(l.present_count||0,l.total_count||0))+"%",1),n(t(w),{variant:R(c(l.present_count||0,l.total_count||0))},{default:e(()=>[s(u(c(l.present_count||0,l.total_count||0)>=75?"Good":"Needs Attention"),1)]),_:2},1032,["variant"])])]),_:2},1024),n(t(r),null,{default:e(()=>[n(t(w),{variant:l.status==="active"?"default":"secondary"},{default:e(()=>[s(u(l.status||"unknown"),1)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024))),128)),!o.sessions||o.sessions.length===0?(_(),p(t(g),{key:0},{default:e(()=>[n(t(r),{colspan:"8",class:"text-center text-muted-foreground py-8"},{default:e(()=>a[17]||(a[17]=[s(" No attendance sessions found ",-1)])),_:1,__:[17]})]),_:1})):I("",!0)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1})],64))}});export{ft as default};
