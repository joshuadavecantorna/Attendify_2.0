import{F as O,_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-CQKvJ_Ct.js";import{d as se,r as j,u as le,c as F,a as m,o as r,b as s,e as t,h as ae,w as a,f as n,t as o,F as v,g,i as u,j as S,k as w,l as ne,n as P,m as M}from"./app-OXmU166Q.js";import{_ as y,a as x,b as R,c as N,d as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-FXh4yG6b.js";import{_ as D}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CGIYOqcj.js";import{_ as de}from"./index-DpPOakUB.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-B7F0P19X.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-B0_ysysQ.js";import{_ as h,a as C,b as V,c as $,d as k,C as oe,e as ue}from"./SelectValue.vue_vue_type_script_setup_true_lang-DS3K1WjJ.js";import{_ as ie,a as re,b as _e,c as me,d as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-6XzyZbOz.js";import{_ as pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CqT1EXV_.js";import{U as Y}from"./users-CgcVcNzr.js";import{U as q}from"./user-check-lULhbVeV.js";import{U as ce}from"./user-x-DeIHMvp_.js";import{T as ve}from"./triangle-alert-D9h4T98I.js";import{C as ye}from"./clock-BndlhL6d.js";import{F as xe}from"./filter-_ztNEPEK.js";import{D as be}from"./download-Dr_Nksky.js";import{M as ge}from"./mail-CLkALIrQ.js";import"./useForwardExpose-Dn3oH0KL.js";import"./RovingFocusGroup-BlJuKAAH.js";import"./check-DxhJGc9p.js";const ke={class:"flex flex-1 flex-col gap-4 p-4 pt-4"},we={class:"flex h-full flex-1 flex-col gap-6"},Se={class:"grid gap-4 md:grid-cols-5"},he={class:"flex items-center justify-between mb-2"},Ce={class:"text-2xl font-bold mt-1"},Ve={class:"flex items-center justify-between mb-2"},$e={class:"text-2xl font-bold mt-1 text-green-600"},Ae={class:"flex items-center justify-between mb-2"},De={class:"text-2xl font-bold mt-1 text-red-600"},Ee={class:"flex items-center justify-between mb-2"},Ue={class:"text-2xl font-bold mt-1 text-yellow-600"},Te={class:"flex items-center justify-between mb-2"},je={class:"text-2xl font-bold mt-1 text-orange-600"},Fe={class:"grid gap-4 md:grid-cols-4"},Re={class:"flex items-center justify-between mb-2"},Ne={class:"text-2xl font-bold mt-1"},Be={class:"flex items-center justify-between mb-2"},Ie={class:"text-2xl font-bold mt-1 text-emerald-600"},Le={class:"space-y-1"},Oe={class:"font-medium"},Pe={class:"space-y-1"},Me={class:"font-medium"},Ye={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-5"},qe={class:"space-y-2"},ze={class:"space-y-2"},Ge={class:"space-y-2"},Xe={class:"space-y-2"},He={class:"space-y-2"},Je={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-6 mt-4"},Ke={class:"space-y-2"},Qe={class:"space-y-2"},We={class:"space-y-2"},Ze={class:"space-y-2"},et={class:"space-y-2"},tt={class:"space-y-2"},st={class:"space-y-2"},lt={class:"flex flex-wrap gap-3"},at={class:"overflow-x-auto"},nt={class:"w-full"},dt={class:"border-b"},ot=["onClick"],ut={class:"flex items-center gap-2"},it={class:"px-4 py-3"},rt={class:"font-medium"},_t={class:"text-sm text-muted-foreground"},mt={class:"px-4 py-3"},ft={class:"font-medium"},pt={class:"text-sm text-muted-foreground"},ct={class:"px-4 py-3"},vt={class:"px-4 py-3"},yt={class:"px-4 py-3"},xt={class:"px-4 py-3"},bt={class:"px-4 py-3"},gt={key:0},kt={class:"space-y-4"},wt={class:"space-y-2"},St={key:0,class:"text-sm text-red-600"},ht={class:"text-sm text-gray-800 dark:text-gray-200"},Ct={class:"list-disc list-inside space-y-1 mt-2 text-gray-700 dark:text-gray-300"},Vt={key:0},$t={key:1},At={key:2},Dt={key:3},Et={key:4},Ut={key:5},Tt={key:6},jt={class:"text-sm bg-blue-50 dark:bg-blue-900 p-3 rounded border"},Ft={class:"text-gray-900 dark:text-gray-100"},Rt={class:"font-semibold"},Nt={key:0},Bt={key:1},ns=se({__name:"AdminReports",props:{summaryStats:{},studentStats:{},attendanceRecords:{},departments:{},teachers:{},classes:{},students:{},courses:{},sections:{},years:{},filters:{}},setup(z){const _=z,G=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"#"}],d=j({department:_.filters?.department||"",teacher_id:_.filters?.teacher_id||"",class_id:_.filters?.class_id||"",student_id:_.filters?.student_id||"",course:_.filters?.course||"",section:_.filters?.section||"",year:_.filters?.year||"",date_from:_.filters?.date_from||"",date_to:_.filters?.date_to||"",status:_.filters?.status||""}),p=le({email:"",department:"",teacher_id:"",class_id:"",date_from:"",date_to:"",status:""}),E=j(!1);F(()=>_.classes||[]);const A=j({key:"student_name",direction:"asc"}),T=F(()=>_.attendanceRecords?.data||[]),U=F(()=>!T.value||!Array.isArray(T.value)?[]:T.value.map(i=>({id:i.id,student_name:i.student_name,student_id:i.student_number,student_course:i.student_course,student_section:i.student_section,student_year:i.student_year,class_name:i.class_name,class_course:i.class_course,teacher_name:`${i.teacher_first_name} ${i.teacher_last_name}`,department:i.department,date:i.session_date,time_in:i.start_time,time_out:i.end_time,status:i.status,marked_at:i.marked_at}))),X=i=>{A.value.key===i?A.value.direction=A.value.direction==="asc"?"desc":"asc":(A.value.key=i,A.value.direction="asc")},H=()=>{M.get("/admin/reports",d.value,{preserveState:!0,preserveScroll:!0,only:["attendanceRecords","summaryStats"]})},J=()=>{d.value={department:"",teacher_id:"",class_id:"",student_id:"",course:"",section:"",year:"",date_from:"",date_to:"",status:""},M.get("/admin/reports",{},{preserveState:!0,preserveScroll:!0,only:["attendanceRecords","summaryStats"]})},K=()=>{const e=[["Student Name","Student ID","Class","Course","Teacher","Department","Date","Status","Time In","Time Out","Marked At"].join(","),...U.value.map(f=>[`"${f.student_name}"`,`"${f.student_id}"`,`"${f.class_name}"`,`"${f.class_course}"`,`"${f.teacher_name}"`,`"${f.department}"`,`"${f.date}"`,`"${f.status}"`,`"${f.time_in}"`,`"${f.time_out}"`,`"${f.marked_at||"N/A"}"`].join(","))].join(`
`),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(c.download!==void 0){const f=URL.createObjectURL(l);c.setAttribute("href",f),c.setAttribute("download",`attendance-report-${new Date().toISOString().split("T")[0]}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}},Q=()=>{const i=document.createElement("form");i.method="POST",i.action="/admin/reports/export-pdf",i.target="_blank";const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(e){const l=document.createElement("input");l.type="hidden",l.name="_token",l.value=e,i.appendChild(l)}Object.entries(d.value).forEach(([l,c])=>{if(c!==""&&c!==null&&c!==void 0){const f=document.createElement("input");f.type="hidden",f.name=l,f.value=c.toString(),i.appendChild(f)}}),document.body.appendChild(i),i.submit(),document.body.removeChild(i)},W=()=>{p.department=d.value.department,p.teacher_id=d.value.teacher_id,p.class_id=d.value.class_id,p.date_from=d.value.date_from,p.date_to=d.value.date_to,p.status=d.value.status,E.value=!0},Z=()=>{p.post("/admin/reports/email",{onSuccess:()=>{E.value=!1,p.reset()},onError:i=>{console.error("Email send errors:",i)}})},ee=i=>{switch(i.toLowerCase()){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"excused":return"bg-yellow-100 text-yellow-800";case"late":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},L=i=>A.value.key!==i?null:A.value.direction==="asc"?oe:ue;return(i,e)=>(r(),m(v,null,[s(t(ae),{title:"Reports"}),s(te,{breadcrumbs:G},{default:a(()=>[n("div",ke,[n("div",we,[e[55]||(e[55]=n("div",null,[n("h1",{class:"text-3xl font-bold"},"Attendance Reports"),n("p",{class:"text-muted-foreground"},"Generate and export comprehensive attendance reports")],-1)),n("div",Se,[s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",he,[s(t(Y),{class:"h-5 w-5 text-blue-500"}),e[13]||(e[13]=n("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1))]),e[14]||(e[14]=n("span",{class:"text-sm font-medium"},"Total Records",-1)),n("div",Ce,o(_.summaryStats?.total||0),1)]),_:1,__:[14]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Ve,[s(t(q),{class:"h-5 w-5 text-green-500"}),e[15]||(e[15]=n("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1))]),e[16]||(e[16]=n("span",{class:"text-sm font-medium"},"Present",-1)),n("div",$e,o(_.summaryStats?.present||0),1)]),_:1,__:[16]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Ae,[s(t(ce),{class:"h-5 w-5 text-red-500"}),e[17]||(e[17]=n("div",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1))]),e[18]||(e[18]=n("span",{class:"text-sm font-medium"},"Absent",-1)),n("div",De,o(_.summaryStats?.absent||0),1)]),_:1,__:[18]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Ee,[s(t(ve),{class:"h-5 w-5 text-yellow-500"}),e[19]||(e[19]=n("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"},null,-1))]),e[20]||(e[20]=n("span",{class:"text-sm font-medium"},"Excused",-1)),n("div",Ue,o(_.summaryStats?.excused||0),1)]),_:1,__:[20]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Te,[s(t(ye),{class:"h-5 w-5 text-orange-500"}),e[21]||(e[21]=n("div",{class:"w-2 h-2 bg-orange-500 rounded-full"},null,-1))]),e[22]||(e[22]=n("span",{class:"text-sm font-medium"},"Late",-1)),n("div",je,o(_.summaryStats?.late||0),1)]),_:1,__:[22]})]),_:1})]),n("div",Fe,[s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Re,[s(t(Y),{class:"h-5 w-5 text-purple-500"}),e[23]||(e[23]=n("div",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1))]),e[24]||(e[24]=n("span",{class:"text-sm font-medium"},"Total Students",-1)),n("div",Ne,o(_.studentStats?.total_students||0),1)]),_:1,__:[24]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[n("div",Be,[s(t(q),{class:"h-5 w-5 text-emerald-500"}),e[25]||(e[25]=n("div",{class:"w-2 h-2 bg-emerald-500 rounded-full"},null,-1))]),e[26]||(e[26]=n("span",{class:"text-sm font-medium"},"Active Students",-1)),n("div",Ie,o(_.studentStats?.active_students||0),1)]),_:1,__:[26]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[e[27]||(e[27]=n("div",{class:"flex items-center justify-between mb-2"},[n("span",{class:"text-sm font-medium"},"Students by Course")],-1)),n("div",Le,[(r(!0),m(v,null,g((_.studentStats?.students_by_course||[]).slice(0,3),l=>(r(),m("div",{key:l.course,class:"flex justify-between text-sm"},[n("span",null,o(l.course),1),n("span",Oe,o(l.count),1)]))),128))])]),_:1,__:[27]})]),_:1}),s(t(y),null,{default:a(()=>[s(t(x),{class:"p-4"},{default:a(()=>[e[28]||(e[28]=n("div",{class:"flex items-center justify-between mb-2"},[n("span",{class:"text-sm font-medium"},"Students by Year")],-1)),n("div",Pe,[(r(!0),m(v,null,g((_.studentStats?.students_by_year||[]).slice(0,3),l=>(r(),m("div",{key:l.year,class:"flex justify-between text-sm"},[n("span",null,o(l.year),1),n("span",Me,o(l.count),1)]))),128))])]),_:1,__:[28]})]),_:1})]),s(t(y),null,{default:a(()=>[s(t(R),null,{default:a(()=>[s(t(N),{class:"flex items-center gap-2"},{default:a(()=>[s(t(xe),{class:"h-5 w-5"}),e[29]||(e[29]=u(" Filters ",-1))]),_:1,__:[29]}),s(t(B),null,{default:a(()=>e[30]||(e[30]=[u("Filter attendance records by class, date range, and status",-1)])),_:1,__:[30]})]),_:1}),s(t(x),null,{default:a(()=>[n("div",Ye,[n("div",qe,[s(t(b),null,{default:a(()=>e[31]||(e[31]=[u("Department",-1)])),_:1,__:[31]}),s(t(h),{modelValue:d.value.department,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.department=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Departments"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.departments||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",ze,[s(t(b),null,{default:a(()=>e[32]||(e[32]=[u("Teacher",-1)])),_:1,__:[32]}),s(t(h),{modelValue:d.value.teacher_id,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.teacher_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Teachers"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.teachers||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",Ge,[s(t(b),null,{default:a(()=>e[33]||(e[33]=[u("Class",-1)])),_:1,__:[33]}),s(t(h),{modelValue:d.value.class_id,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.class_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Classes"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.classes||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name)+" ("+o(l.course)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",Xe,[s(t(b),null,{default:a(()=>e[34]||(e[34]=[u("Student",-1)])),_:1,__:[34]}),s(t(h),{modelValue:d.value.student_id,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.student_id=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Students"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.students||[],l=>(r(),S(t(k),{key:l.id,value:l.id.toString()},{default:a(()=>[u(o(l.name)+" ("+o(l.student_id)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",He,[s(t(b),null,{default:a(()=>e[35]||(e[35]=[u("Course",-1)])),_:1,__:[35]}),s(t(h),{modelValue:d.value.course,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value.course=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Courses"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.courses||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),n("div",Je,[n("div",Ke,[s(t(b),null,{default:a(()=>e[36]||(e[36]=[u("Section",-1)])),_:1,__:[36]}),s(t(h),{modelValue:d.value.section,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value.section=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Sections"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.sections||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",Qe,[s(t(b),null,{default:a(()=>e[37]||(e[37]=[u("Year",-1)])),_:1,__:[37]}),s(t(h),{modelValue:d.value.year,"onUpdate:modelValue":e[6]||(e[6]=l=>d.value.year=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Years"})]),_:1}),s(t($),null,{default:a(()=>[(r(!0),m(v,null,g(_.years||[],l=>(r(),S(t(k),{key:l,value:l},{default:a(()=>[u(o(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",We,[s(t(b),null,{default:a(()=>e[38]||(e[38]=[u("Start Date",-1)])),_:1,__:[38]}),s(t(I),{type:"date",modelValue:d.value.date_from,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.date_from=l)},null,8,["modelValue"])]),n("div",Ze,[s(t(b),null,{default:a(()=>e[39]||(e[39]=[u("End Date",-1)])),_:1,__:[39]}),s(t(I),{type:"date",modelValue:d.value.date_to,"onUpdate:modelValue":e[8]||(e[8]=l=>d.value.date_to=l)},null,8,["modelValue"])]),n("div",et,[s(t(b),null,{default:a(()=>e[40]||(e[40]=[u("Status",-1)])),_:1,__:[40]}),s(t(h),{modelValue:d.value.status,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value.status=l)},{default:a(()=>[s(t(C),null,{default:a(()=>[s(t(V),{placeholder:"All Status"})]),_:1}),s(t($),null,{default:a(()=>[s(t(k),{value:"present"},{default:a(()=>e[41]||(e[41]=[u("Present",-1)])),_:1,__:[41]}),s(t(k),{value:"absent"},{default:a(()=>e[42]||(e[42]=[u("Absent",-1)])),_:1,__:[42]}),s(t(k),{value:"excused"},{default:a(()=>e[43]||(e[43]=[u("Excused",-1)])),_:1,__:[43]}),s(t(k),{value:"late"},{default:a(()=>e[44]||(e[44]=[u("Late",-1)])),_:1,__:[44]})]),_:1})]),_:1},8,["modelValue"])]),n("div",tt,[s(t(b),null,{default:a(()=>e[45]||(e[45]=[u("Â ",-1)])),_:1,__:[45]}),n("div",st,[s(t(D),{onClick:H,class:"w-full"},{default:a(()=>e[46]||(e[46]=[u(" Apply Filters ",-1)])),_:1,__:[46]}),s(t(D),{variant:"outline",onClick:J,class:"w-full"},{default:a(()=>e[47]||(e[47]=[u(" Clear Filters ",-1)])),_:1,__:[47]})])])])]),_:1})]),_:1}),s(t(y),null,{default:a(()=>[s(t(R),null,{default:a(()=>[s(t(N),{class:"flex items-center gap-2"},{default:a(()=>[s(t(be),{class:"h-5 w-5"}),e[48]||(e[48]=u(" Export & Share ",-1))]),_:1,__:[48]}),s(t(B),null,{default:a(()=>e[49]||(e[49]=[u("Download reports or send via email",-1)])),_:1,__:[49]})]),_:1}),s(t(x),null,{default:a(()=>[n("div",lt,[s(t(D),{onClick:K,class:"flex items-center gap-2"},{default:a(()=>[s(t(O),{class:"h-4 w-4"}),e[50]||(e[50]=u(" Export to Excel ",-1))]),_:1,__:[50]}),s(t(D),{onClick:Q,variant:"outline",class:"flex items-center gap-2"},{default:a(()=>[s(t(O),{class:"h-4 w-4"}),e[51]||(e[51]=u(" Export to PDF ",-1))]),_:1,__:[51]}),s(t(D),{onClick:W,variant:"outline",class:"flex items-center gap-2"},{default:a(()=>[s(t(ge),{class:"h-4 w-4"}),e[52]||(e[52]=u(" Email Report ",-1))]),_:1,__:[52]})])]),_:1})]),_:1}),s(t(y),null,{default:a(()=>[s(t(R),null,{default:a(()=>[s(t(N),null,{default:a(()=>e[53]||(e[53]=[u("Attendance Records",-1)])),_:1,__:[53]}),s(t(B),null,{default:a(()=>[u(o(U.value.length)+" records found",1)]),_:1})]),_:1}),s(t(x),null,{default:a(()=>[n("div",at,[n("table",nt,[n("thead",null,[n("tr",dt,[(r(),m(v,null,g([{key:"student_name",label:"Student"},{key:"student_course",label:"Course"},{key:"class_name",label:"Class"},{key:"teacher_name",label:"Teacher"},{key:"date",label:"Date"},{key:"status",label:"Status"},{key:"time_in",label:"Time In"}],l=>n("th",{key:l.key,onClick:c=>X(l.key),class:"px-4 py-3 text-left font-medium text-sm cursor-pointer hover:bg-gray-50 transition-colors"},[n("div",ut,[u(o(l.label)+" ",1),L(l.key)?(r(),S(ne(L(l.key)),{key:0,class:"h-4 w-4"})):w("",!0)])],8,ot)),64))])]),n("tbody",null,[(r(!0),m(v,null,g(U.value,l=>(r(),m("tr",{key:l.id,class:"border-b hover:bg-gray-50"},[n("td",it,[n("div",null,[n("div",rt,o(l.student_name),1),n("div",_t,o(l.student_id),1)])]),n("td",mt,[n("div",null,[n("div",ft,o(l.student_course),1),n("div",pt,o(l.student_section)+" - "+o(l.student_year),1)])]),n("td",ct,o(l.class_name),1),n("td",vt,o(l.teacher_name),1),n("td",yt,o(l.date),1),n("td",xt,[s(t(de),{class:P(ee(l.status))},{default:a(()=>[u(o(l.status.charAt(0).toUpperCase()+l.status.slice(1)),1)]),_:2},1032,["class"])]),n("td",bt,o(l.time_in),1)]))),128)),U.value.length===0?(r(),m("tr",gt,e[54]||(e[54]=[n("td",{colspan:"7",class:"px-4 py-8 text-center text-muted-foreground"}," No records found matching your filters. ",-1)]))):w("",!0)])])])]),_:1})]),_:1})])]),s(t(ie),{open:E.value,"onUpdate:open":e[12]||(e[12]=l=>E.value=l)},{default:a(()=>[s(t(re),{class:"sm:max-w-[425px] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"},{default:a(()=>[s(t(_e),null,{default:a(()=>[s(t(me),{class:"text-gray-900 dark:text-gray-100"},{default:a(()=>e[56]||(e[56]=[u("Email Report",-1)])),_:1,__:[56]}),s(t(fe),{class:"text-gray-600 dark:text-gray-400"},{default:a(()=>e[57]||(e[57]=[u(" Send the attendance report to an email address as a PDF attachment. ",-1)])),_:1,__:[57]})]),_:1}),n("div",kt,[n("div",wt,[s(t(b),{for:"email"},{default:a(()=>e[58]||(e[58]=[u("Email Address *",-1)])),_:1,__:[58]}),s(t(I),{id:"email",type:"email",modelValue:t(p).email,"onUpdate:modelValue":e[10]||(e[10]=l=>t(p).email=l),placeholder:"Enter email address",class:P({"border-red-500":t(p).errors.email})},null,8,["modelValue","class"]),t(p).errors.email?(r(),m("div",St,o(t(p).errors.email),1)):w("",!0)]),n("div",ht,[e[59]||(e[59]=n("p",{class:"font-semibold text-gray-900 dark:text-gray-100"},"Current Filters:",-1)),n("ul",Ct,[d.value.department?(r(),m("li",Vt,"Department: "+o(d.value.department),1)):w("",!0),d.value.teacher_id?(r(),m("li",$t,"Teacher: "+o(_.teachers?.find(l=>l.id.toString()===d.value.teacher_id)?.name),1)):w("",!0),d.value.class_id?(r(),m("li",At,"Class: "+o(_.classes?.find(l=>l.id.toString()===d.value.class_id)?.name),1)):w("",!0),d.value.date_from?(r(),m("li",Dt,"From: "+o(d.value.date_from),1)):w("",!0),d.value.date_to?(r(),m("li",Et,"To: "+o(d.value.date_to),1)):w("",!0),d.value.status?(r(),m("li",Ut,"Status: "+o(d.value.status),1)):w("",!0),Object.values(d.value).some(Boolean)?w("",!0):(r(),m("li",Tt,"No filters applied (all records)"))])]),n("div",jt,[n("p",Ft,[n("span",Rt,o(_.summaryStats?.total||0),1),e[60]||(e[60]=u(" records will be included in the report.",-1))])])]),s(t(pe),null,{default:a(()=>[s(t(D),{type:"button",variant:"outline",onClick:e[11]||(e[11]=l=>E.value=!1)},{default:a(()=>e[61]||(e[61]=[u(" Cancel ",-1)])),_:1,__:[61]}),s(t(D),{type:"submit",onClick:Z,disabled:t(p).processing},{default:a(()=>[t(p).processing?(r(),m("span",Nt,"Sending...")):(r(),m("span",Bt,"Send Report"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{ns as default};
