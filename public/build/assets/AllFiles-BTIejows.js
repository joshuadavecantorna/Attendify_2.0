import{d as $,r as v,s as V,a as r,o as d,b as l,e as o,h as S,w as i,f as s,v as N,y as A,F as h,g,t as n,z as D,i as u,k as y}from"./app-DW-4G1vZ.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{_ as j,b as z,c as B,d as M,a as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as b}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as E}from"./index-r1g3ib2J.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-DnmVy0AL.js";import"./useForwardExpose-CYdwRePy.js";import"./users-BhZaHBdP.js";import"./RovingFocusGroup-Dsi-dyvh.js";const P={class:"container mx-auto p-6 space-y-6"},R={class:"flex gap-4 items-center"},Y=["value"],q={class:"space-y-4"},G={class:"flex items-center gap-3 flex-1"},H={class:"text-2xl"},J={class:"flex-1"},O={class:"font-medium"},Q={class:"text-sm text-muted-foreground"},T={class:"text-xs text-muted-foreground"},W={class:"flex items-center gap-3"},X={class:"text-right"},Z={class:"text-xs text-muted-foreground mt-1"},I={key:1,class:"text-center py-8 text-muted-foreground"},ee={key:2,class:"text-center py-8"},ue=$({__name:"AllFiles",props:{teacher:{},classes:{},files:{}},setup(k){const x=k,w=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Files",href:"/teacher/files"},{title:"All Files",href:"/teacher/files/all"}],f=v(x.files||[]),c=v(!1),m=v(""),_=v(""),F=(a,t)=>{const e=document.createElement("a");e.href=a,e.download=t,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},p=async()=>{c.value=!0;try{const a=new URLSearchParams;m.value&&a.append("search",m.value),_.value&&a.append("class_id",_.value);const e=await(await fetch(`/teacher/files/list?${a}`)).json();e.success&&(f.value=e.files.data||[])}catch(a){console.error("Failed to fetch files:",a)}finally{c.value=!1}},C=a=>a.includes("image")?"üñºÔ∏è":a.includes("video")?"üé•":a.includes("pdf")?"üìÑ":a.includes("doc")?"üìä":a.includes("text")?"üìù":"üìÑ";return V(()=>{p()}),(a,t)=>(d(),r(h,null,[l(o(S),{title:"All Files - Teacher Files"}),l(L,{breadcrumbs:w},{default:i(()=>[s("div",P,[t[7]||(t[7]=s("div",{class:"space-y-2"},[s("h1",{class:"text-3xl font-bold tracking-tight"},"All Files"),s("p",{class:"text-muted-foreground"}," Manage all your uploaded files ")],-1)),s("div",R,[l(o(K),{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),placeholder:"Search files...",class:"max-w-sm",onKeyup:A(p,["enter"])},null,8,["modelValue"]),N(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),class:"px-3 py-2 border rounded-md",onChange:p},[t[2]||(t[2]=s("option",{value:""},"All Classes",-1)),(d(!0),r(h,null,g(x.classes,e=>(d(),r("option",{key:e.id,value:e.id},n(e.name),9,Y))),128))],544),[[D,_.value]]),l(o(b),{onClick:p,disabled:c.value},{default:i(()=>[u(n(c.value?"Searching...":"Search"),1)]),_:1},8,["disabled"])]),l(o(j),null,{default:i(()=>[l(o(z),null,{default:i(()=>[l(o(B),null,{default:i(()=>[u("Files ("+n(f.value.length)+")",1)]),_:1}),l(o(M),null,{default:i(()=>t[3]||(t[3]=[u("Your uploaded files",-1)])),_:1,__:[3]})]),_:1}),l(o(U),null,{default:i(()=>[s("div",q,[f.value.length>0?(d(!0),r(h,{key:0},g(f.value,e=>(d(),r("div",{key:e.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors"},[s("div",G,[s("div",H,n(C(e.file_type)),1),s("div",J,[s("p",O,n(e.file_name),1),s("p",Q,n(e.description||"No description"),1),s("p",T,n(new Date(e.created_at).toLocaleString())+" ‚Ä¢ "+n(e.file_size_formatted),1)])]),s("div",W,[s("div",X,[l(o(E),{variant:"secondary"},{default:i(()=>[u(n(e.class_name),1)]),_:2},1024),s("p",Z,n(e.class_course),1)]),l(o(b),{size:"sm",onClick:se=>F(e.download_url,e.file_name)},{default:i(()=>t[4]||(t[4]=[u(" Download ",-1)])),_:2,__:[4]},1032,["onClick"])])]))),128)):c.value?y("",!0):(d(),r("div",I,t[5]||(t[5]=[s("div",{class:"text-4xl mb-2"},"üìÅ",-1),s("p",{class:"font-medium"},"No files found",-1),s("p",{class:"text-sm"},"Try adjusting your search criteria",-1)]))),c.value?(d(),r("div",ee,t[6]||(t[6]=[s("div",{class:"text-2xl mb-2"},"‚è≥",-1),s("p",null,"Loading files...",-1)]))):y("",!0)])]),_:1})]),_:1})])]),_:1})],64))}});export{ue as default};
