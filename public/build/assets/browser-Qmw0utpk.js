import{P as Ye,c as fe,a as Ce,b as Bn,_ as te}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{C as Pt,I as In}from"./vue-qrcode-reader-DmduyMv5.js";import{_ as X,a as ee,b as we,c as xe}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as W}from"./index-r1g3ib2J.js";import{X as Rn,a as Me,b as Ne,B as tt,c as Tn}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as ae,H as fn,r as K,j as G,o as T,w as m,I as ie,e as s,c as pe,s as mn,b as f,A as gn,k as j,y as Mn,p as Nn,a as J,n as Ke,J as Ge,C as Pn,K as An,f as u,i as k,t as R,F as Ue,g as Ve,L as Dn}from"./app-DW-4G1vZ.js";import{u as Ln,c as qn,a as Fn,P as Un,b as Vn,d as $n,G as At}from"./users-BhZaHBdP.js";import{u as We,a as zn,r as Ze}from"./useForwardExpose-CYdwRePy.js";import{R as On}from"./RovingFocusGroup-Dsi-dyvh.js";import{R as jn}from"./RovingFocusItem-Jd1FEocZ.js";import{_ as Hn}from"./Textarea.vue_vue_type_script_setup_true_lang-CjQRaqiI.js";import{_ as nt}from"./Input.vue_vue_type_script_setup_true_lang-DnmVy0AL.js";import{_ as $e}from"./Label.vue_vue_type_script_setup_true_lang-PYw3eRzO.js";import{Q as ze}from"./qr-code-DtmqAAPy.js";import{Z as Jn}from"./zap-DjVR6z_V.js";import{U as Pe}from"./user--A7oqBxk.js";import{C as Oe}from"./circle-alert-BcdFzL-g.js";import{C as he}from"./circle-check-big-BJq8CkBX.js";import{H as Dt}from"./hash-1DI9CPPd.js";import{C as je}from"./calendar-hrTOBv_O.js";const[Tt,Qn]=qn("TabsRoot");var Kn=ae({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(l,{emit:a}){const i=l,t=a,{orientation:e,unmountOnHide:n,dir:o}=fn(i),c=Ln(o);We();const d=zn(i,"modelValue",t,{defaultValue:i.defaultValue,passive:i.modelValue===void 0}),p=K();return Qn({modelValue:d,changeModelValue:_=>{d.value=_},orientation:e,dir:c,unmountOnHide:n,activationMode:i.activationMode,baseId:Fn(void 0,"reka-tabs"),tabsList:p}),(_,M)=>(T(),G(s(Ye),{dir:s(c),"data-orientation":s(e),"as-child":_.asChild,as:_.as},{default:m(()=>[ie(_.$slots,"default",{modelValue:s(d)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),Yn=Kn;function hn(l,a){return`${l}-trigger-${a}`}function pn(l,a){return`${l}-content-${a}`}var Gn=ae({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const a=l,{forwardRef:i}=We(),t=Tt(),e=pe(()=>hn(t.baseId,a.value)),n=pe(()=>pn(t.baseId,a.value)),o=pe(()=>a.value===t.modelValue.value),c=K(o.value);return mn(()=>{requestAnimationFrame(()=>{c.value=!1})}),(d,p)=>(T(),G(s(Un),{present:d.forceMount||o.value,"force-mount":""},{default:m(({present:_})=>[f(s(Ye),{id:n.value,ref:s(i),"as-child":d.asChild,as:d.as,role:"tabpanel","data-state":o.value?"active":"inactive","data-orientation":s(t).orientation.value,"aria-labelledby":e.value,hidden:!_,tabindex:"0",style:gn({animationDuration:c.value?"0s":void 0})},{default:m(()=>[!s(t).unmountOnHide.value||_?ie(d.$slots,"default",{key:0}):j("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Wn=Gn,Zn=ae({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const a=l,{loop:i}=fn(a),{forwardRef:t,currentElement:e}=We(),n=Tt();return n.tabsList=e,(o,c)=>(T(),G(s(On),{"as-child":"",orientation:s(n).orientation.value,dir:s(n).dir.value,loop:s(i)},{default:m(()=>[f(s(Ye),{ref:s(t),role:"tablist","as-child":o.asChild,as:o.as,"aria-orientation":s(n).orientation.value},{default:m(()=>[ie(o.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),Xn=Zn,es=ae({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(l){const a=l,{forwardRef:i}=We(),t=Tt(),e=pe(()=>hn(t.baseId,a.value)),n=pe(()=>pn(t.baseId,a.value)),o=pe(()=>a.value===t.modelValue.value);return(c,d)=>(T(),G(s(jn),{"as-child":"",focusable:!c.disabled,active:o.value},{default:m(()=>[f(s(Ye),{id:e.value,ref:s(i),role:"tab",type:c.as==="button"?"button":void 0,as:c.as,"as-child":c.asChild,"aria-selected":o.value?"true":"false","aria-controls":n.value,"data-state":o.value?"active":"inactive",disabled:c.disabled,"data-disabled":c.disabled?"":void 0,"data-orientation":s(t).orientation.value,onMousedown:d[0]||(d[0]=Nn(p=>{!c.disabled&&p.ctrlKey===!1?s(t).changeModelValue(c.value):p.preventDefault()},["left"])),onKeydown:d[1]||(d[1]=Mn(p=>s(t).changeModelValue(c.value),["enter","space"])),onFocus:d[2]||(d[2]=()=>{const p=s(t).activationMode!=="manual";!o.value&&!c.disabled&&p&&s(t).changeModelValue(c.value)})},{default:m(()=>[ie(c.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),ts=es;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=fe("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=fe("FileUpIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=fe("FlashlightIcon",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=fe("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=fe("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=fe("ScanLineIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=fe("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=fe("SwitchCameraIcon",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]),He=ae({__name:"Alert",props:{class:{},variant:{}},setup(l){const a=l;return(i,t)=>(T(),J("div",{"data-slot":"alert",class:Ke(s(Ce)(s(rs)({variant:i.variant}),a.class)),role:"alert"},[ie(i.$slots,"default")],2))}}),Je=ae({__name:"AlertDescription",props:{class:{}},setup(l){const a=l;return(i,t)=>(T(),J("div",{"data-slot":"alert-description",class:Ke(s(Ce)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a.class))},[ie(i.$slots,"default")],2))}}),rs=Bn("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),os=ae({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(l,{emit:a}){const i=l,t=a,e=Ze(i,"class"),n=Vn(e,t);return(o,c)=>(T(),G(s(Yn),Ge({"data-slot":"tabs"},s(n),{class:s(Ce)("flex flex-col gap-2",i.class)}),{default:m(()=>[ie(o.$slots,"default")]),_:3},16,["class"]))}}),rt=ae({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,i=Ze(a,"class");return(t,e)=>(T(),G(s(Wn),Ge({"data-slot":"tabs-content",class:s(Ce)("flex-1 outline-none",a.class)},s(i)),{default:m(()=>[ie(t.$slots,"default")]),_:3},16,["class"]))}}),ls=ae({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,i=Ze(a,"class");return(t,e)=>(T(),G(s(Xn),Ge({"data-slot":"tabs-list"},s(i),{class:s(Ce)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a.class)}),{default:m(()=>[ie(t.$slots,"default")]),_:3},16,["class"]))}}),ot=ae({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,i=Ze(a,"class"),t=$n(i);return(e,n)=>(T(),G(s(ts),Ge({"data-slot":"tabs-trigger"},s(t),{class:s(Ce)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a.class)}),{default:m(()=>[ie(e.$slots,"default")]),_:3},16,["class"]))}}),is={key:0,class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4"},us={class:"bg-background border rounded-xl shadow-xl w-full max-w-6xl h-[95vh] flex flex-col overflow-hidden"},ds={class:"flex-shrink-0 border-b bg-gradient-to-r from-background to-muted/20"},cs={class:"px-6 py-4"},fs={class:"flex items-center justify-between"},ms={class:"flex items-center gap-3"},gs={class:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center"},hs={class:"flex items-center gap-2"},ps={class:"flex-1 overflow-hidden"},vs={class:"flex-shrink-0 border-b bg-muted/30"},ys={class:"px-6"},_s={class:"grid grid-cols-1 xl:grid-cols-3 gap-6 h-full"},bs={class:"xl:col-span-2 flex flex-col"},ws={class:"bg-black rounded-xl overflow-hidden relative flex-1 flex items-center justify-center min-h-[400px]"},xs={key:1,class:"absolute inset-0 flex items-center justify-center bg-muted/50"},Ss={key:0,class:"space-y-4"},Cs={key:1,class:"space-y-4"},ks={key:2,class:"space-y-4"},Es={class:"text-sm text-muted-foreground mt-2"},Bs={class:"flex gap-2"},Is={key:2,class:"absolute inset-0 flex items-center justify-center bg-muted/50"},Rs={class:"space-y-4"},Ts={key:3,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3"},Ms={class:"mt-4"},Ns={class:"flex items-center gap-3"},Ps={class:"w-8 h-8 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center"},As={class:"xl:col-span-1 space-y-6"},Ds={key:0,class:"animate-fade-in"},Ls={class:"flex items-center gap-2 mb-3"},qs={class:"text-sm font-medium text-muted-foreground"},Fs={class:"space-y-2 max-h-64 overflow-y-auto"},Us={class:"flex items-center gap-2"},Vs={class:"flex-1 min-w-0"},$s={class:"text-sm font-medium truncate"},zs={class:"flex items-center gap-2 mt-1"},Os={key:0,class:"text-center py-2"},js={class:"text-xs text-muted-foreground"},Hs={key:1,class:"animate-fade-in"},Js={class:"flex items-center gap-2 mb-3"},Qs={class:"flex items-start gap-3"},Ks={class:"flex-1 min-w-0 space-y-2"},Ys={class:"flex items-start gap-2"},Gs={class:"font-semibold text-sm leading-tight truncate"},Ws={class:"space-y-1 text-xs"},Zs={class:"flex items-center gap-2"},Xs={class:"font-mono"},ea={class:"flex items-center gap-2"},ta={class:"flex items-center gap-2"},na={class:"flex items-center gap-2"},sa={key:2,class:"flex-1"},aa={class:"flex items-center gap-2 mb-3"},ra={class:"space-y-2 max-h-64 overflow-y-auto"},oa={class:"flex items-center gap-2"},la={class:"flex-1 min-w-0"},ia={class:"text-sm font-medium truncate"},ua={class:"flex items-center gap-2 mt-1"},da={class:"text-xs text-muted-foreground truncate"},ca={key:3,class:"text-center py-8 h-full flex flex-col items-center justify-center border-2 border-dashed rounded-xl border-muted"},fa={class:"mx-auto mb-3 w-12 h-12 bg-muted rounded-full flex items-center justify-center"},ma={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full"},ga={class:"space-y-6"},ha={class:"mx-auto mb-4 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center"},pa={class:"space-y-2"},va={key:0,class:"text-sm text-destructive"},ya={class:"space-y-2"},_a={key:0,class:"text-sm text-destructive"},ba={class:"space-y-2"},wa={class:"space-y-6"},xa={key:0,class:"animate-fade-in"},Sa={class:"flex items-center gap-2 mb-3"},Ca={class:"flex items-start gap-3"},ka={class:"flex-1 min-w-0 space-y-2"},Ea={class:"flex items-start gap-2"},Ba={class:"font-semibold text-sm leading-tight truncate"},Ia={class:"space-y-1 text-xs"},Ra={class:"flex items-center gap-2"},Ta={class:"font-mono"},Ma={class:"flex items-center gap-2"},Na={class:"flex items-center gap-2"},Pa={class:"flex items-center gap-2"},Aa={class:"max-h-80 overflow-y-auto"},Da={class:"flex items-center gap-3"},La={class:"flex-1 min-w-0"},qa={class:"text-sm font-medium truncate"},Fa={class:"flex items-center gap-2 mt-1"},Ua={class:"text-xs text-muted-foreground font-mono"},Va={class:"text-right shrink-0"},$a={class:"text-xs text-muted-foreground capitalize"},za={key:2,class:"text-center py-12 h-full flex flex-col items-center justify-center border-2 border-dashed rounded-xl border-muted"},Oa={class:"mx-auto mb-3 w-12 h-12 bg-muted rounded-full flex items-center justify-center"},ja={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full"},Ha={class:"space-y-6"},Ja={class:"mx-auto mb-4 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center"},Qa={class:"space-y-2"},Ka={class:"flex gap-2"},Ya={key:0,class:"space-y-2"},Ga={class:"flex items-center justify-between text-sm"},Wa={class:"font-medium"},Za={class:"w-full bg-muted rounded-full h-2 overflow-hidden"},Xa={class:"space-y-6"},er={class:"max-h-[600px] overflow-y-auto"},tr={class:"flex items-start gap-3"},nr={class:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center"},sr={class:"text-xs font-semibold text-primary"},ar={class:"flex-1 min-w-0 space-y-1"},rr={class:"text-sm font-medium truncate"},or={class:"flex flex-wrap items-center gap-2 text-xs"},lr={key:1,class:"text-muted-foreground"},ir={key:2,class:"text-muted-foreground"},ur={key:1,class:"text-center py-12 h-full flex flex-col items-center justify-center border-2 border-dashed rounded-xl border-muted"},dr={class:"mx-auto mb-3 w-12 h-12 bg-muted rounded-full flex items-center justify-center"},cr={key:0,class:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-20"},fr={key:1,class:"flex-shrink-0 p-4 border-t bg-background animate-fade-in"},mr={class:"max-w-4xl mx-auto"},gr=ae({__name:"QrScanner",props:{show:{type:Boolean},sessionId:{}},emits:["close","scanSuccess","batchScanSuccess"],setup(l,{emit:a}){const i=l,t=a,e=K("off"),n=K(!1),o=K(""),c=K(!1),d=K(null),p=K("loading"),_=K(""),M=K(""),w=K("camera"),v=K([]),B=K(!1),N=K([]),Y=K(null),q=K(null),F=K(0),E=K([]),P=K(""),H=K(""),b=K(!1),C=K(""),x=K(""),y=K({});K(""),K(""),K("");const D={name:g=>g.trim()?g.length<2?"Name must be at least 2 characters":/^[a-zA-Z\s.'-]+$/.test(g)?"":"Name can only contain letters, spaces, and basic punctuation":"Name is required",course:g=>g.trim()?g.length<2?"Course must be at least 2 characters":/^(BS|Bachelor|BSCS|BSIT|BSEE|BSME|BSBA)/i.test(g)?"":"Please enter a valid course (e.g., BSCS, BSIT)":"Course is required"},I=(g,r)=>{const $=D[g];$&&(y.value[g]=$(r))},A=()=>{const g={name:C.value,course:x.value};return Object.entries(g).forEach(([r,$])=>{I(r,$)}),!Object.values(y.value).some(r=>r)},S=pe(()=>window.isSecureContext);mn(()=>{_.value=`Secure: ${window.isSecureContext}, Protocol: ${window.location.protocol}, Host: ${window.location.hostname}`,console.log("Camera Debug Info:",_.value),S.value||(w.value="manual",o.value="Camera requires HTTPS. Using manual input mode.");const g=localStorage.getItem("qrScanHistory");if(g)try{v.value=JSON.parse(g).slice(0,10)}catch(r){console.error("Failed to load scan history:",r)}});const L=g=>{v.value.unshift(g),v.value.length>10&&(v.value=v.value.slice(0,10)),localStorage.setItem("qrScanHistory",JSON.stringify(v.value))};Pn(()=>i.show,g=>{g&&w.value==="camera"&&S.value?(e.value="auto",o.value="",p.value="loading",B.value=!0):(e.value="off",B.value=!1)},{immediate:!0});const re=()=>{console.log("Camera initialized successfully"),p.value="ready",o.value=""},me=()=>{console.log("Camera turned off"),p.value="loading"},Xe=g=>{var r;console.error("Camera error details:",g),p.value="error",(g==null?void 0:g.name)==="NotAllowedError"?o.value="Camera access denied. Please allow camera permissions.":(g==null?void 0:g.name)==="NotFoundError"?o.value="No camera found on this device.":(g==null?void 0:g.name)==="NotSupportedError"||(r=g==null?void 0:g.message)!=null&&r.includes("secure context")?(o.value="Camera not supported in HTTP context. Switch to manual mode.",p.value="unsupported"):o.value=`Camera error: ${(g==null?void 0:g.message)||"Unknown error"}`},De=async g=>{if(c.value||!g.length)return;const r=g[0],$=r==null?void 0:r.rawValue;try{c.value=!0,o.value="",y.value={};let h,O="json";if($)try{h=JSON.parse($),console.log("QR Code parsed successfully (JSON):",h),O="json"}catch(U){console.log("QR is not JSON, trying alternative formats:",U);const V=Ee($);if(V)h=V.student,O=V.format;else{o.value="QR code format not recognized. Please use manual input.";return}}else h=Le(),O="mock";const z=ke(h);if(z){o.value=z;return}if(h.year&&(h.year=ue(h.year)),h.needsLookup)try{const U=await ge(h.name,h.course);if(U)h={...h,student_id:U.student_id,year:U.year,course:U.course,section:U.section,needsLookup:!1},console.log("Student found in database:",h);else{o.value=`Student "${h.name}" with course "${h.course}" not found in this class or database. Please verify the student is enrolled.`;return}}catch(U){console.warn("Failed to lookup student:",U),o.value="Database lookup failed. Please try again.";return}h={...h,id:h.id||`scan-${Date.now()}`,timestamp:new Date().toISOString()},await new Promise(U=>setTimeout(U,800));const Q={student:h,rawData:$||"mock",format:O};d.value=h,L(Q),N.value.findIndex(U=>U.student_id===h.student_id)===-1&&N.value.push(h),o.value=""}catch(h){console.error("QR Scan error:",h),o.value="Scan processing error"}finally{c.value=!1}},ue=g=>{const r=g.toLowerCase().trim();return{1:"1st",first:"1st","1st year":"1st","1st-year":"1st",year1:"1st","year 1":"1st",2:"2nd",second:"2nd","2nd year":"2nd","2nd-year":"2nd",year2:"2nd","year 2":"2nd",3:"3rd",third:"3rd","3rd year":"3rd","3rd-year":"3rd",year3:"3rd","year 3":"3rd",4:"4th",fourth:"4th","4th year":"4th","4th-year":"4th",year4:"4th","year 4":"4th",5:"5th",fifth:"5th","5th year":"5th","5th-year":"5th",year5:"5th","year 5":"5th"}[r]||g},ke=g=>!g.needsLookup&&(!g.student_id||typeof g.student_id!="string")?"Invalid or missing student ID":!g.name||typeof g.name!="string"?"Invalid or missing student name":g.year&&typeof g.year!="string"?"Invalid year format":g.course&&typeof g.course!="string"?"Invalid course format":g.section&&typeof g.section!="string"?"Invalid section format":g.year&&g.year.trim()!==""&&!/^(1st|2nd|3rd|4th|5th)$/.test(ue(g.year))?"Invalid year level. Must be 1st, 2nd, 3rd, 4th, or 5th year":null,_e=()=>{var r;const g=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");return g||console.warn("CSRF token not found in meta tag"),g||""},ge=async(g,r)=>{var $;try{const h=`${g},${r}`;if(i.sessionId){console.log("Making QR scan request:",{sessionId:i.sessionId,qrData:h});const O=await fetch(`/teacher/attendance/${i.sessionId}/qr-scan`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":_e(),"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({qr_data:h})});if(console.log("QR scan response status:",O.status),O.status===419)throw new Error("CSRF token mismatch. Please refresh the page and try again.");if(O.ok){const z=await O.json();if(console.log("QR scan response data:",z),z.success)return console.log("Student marked as present:",z.student),{id:(($=z.student.id)==null?void 0:$.toString())||`db-${Date.now()}`,student_id:z.student.student_id,name:z.student.name,year:z.student.year||"",course:z.student.course||r,section:z.student.section||""};throw new Error(z.message||"Student not found")}else{let z=`Request failed with status ${O.status}`;try{z=(await O.json()).message||z}catch{}throw new Error(z)}}else throw new Error("No attendance session available")}catch(h){throw console.error("Student lookup failed:",h),h}},Ee=g=>{const r=g.trim();if(console.log("ðŸ” Raw QR Data:",JSON.stringify(g)),console.log("ðŸ” Trimmed QR Data:",JSON.stringify(r)),console.log("ðŸ” Checking simple fallback - has comma:",r.includes(",")),r.includes(",")){const U=r.split(",");if(console.log("ðŸ” Simple split result:",U),console.log("ðŸ” Simple parts length:",U.length),U.length>=2){const V=U[0].trim(),oe=U[1].trim();if(console.log("ðŸ” Simple parser - Name after trim:",JSON.stringify(V)),console.log("ðŸ” Simple parser - Course after trim:",JSON.stringify(oe)),console.log("ðŸ” Simple parser - Name check:",!!V),console.log("ðŸ” Simple parser - Course check:",!!oe),V&&oe)return console.log("âœ… Simple fallback parser SUCCESS - Name:",V,"Course:",oe),{student:{id:`simple-${Date.now()}`,student_id:"",name:V,year:"",course:oe,section:"",timestamp:new Date().toISOString(),needsLookup:!0},format:"name-course"};console.log("âŒ Simple fallback failed - empty name or course")}else console.log("âŒ Simple fallback failed - not enough parts")}else console.log("âŒ Simple fallback failed - no comma found");const $=r.split(",").map(U=>U.trim()).filter(U=>U.length>0);if(console.log("ðŸ” Split parts:",$),$.length>=2){const U=$[0],V=$[1];if(console.log("ðŸ” Student Name:",JSON.stringify(U)),console.log("ðŸ” Course:",JSON.stringify(V)),U.length>0&&V.length>0){console.log("ðŸ” Course validation - checking:",V);const Fe=/^(BS|BSCS|BSIT|BSEE|BSME|BSBA|Bachelor|CS|IT|EE|ME|BA)/i.test(V);if(console.log("ðŸ” Course pattern test result:",Fe),Fe)return console.log("âœ… QR Code detected - Name:",U,"Course:",V),{student:{id:`name-course-${Date.now()}`,student_id:"",name:U,year:"",course:V,section:"",timestamp:new Date().toISOString(),needsLookup:!0},format:"name-course"};console.log("âŒ Course validation failed for:",V)}else console.log("âŒ Name or course is empty - Name:",U,"Course:",V)}else console.log("âŒ Not enough parts after split. Need at least 2, got:",$.length);const h=r.match(/^([^,]+),\s*(BSCS|BSIT|BSEE|BSME|BSBA|BS[A-Z]{2,4}|Bachelor[^,]*),*\s*$/i);if(h){const U=h[1].trim(),V=h[2].trim();return console.log("QR Code detected (regex) - Name:",U,"Course:",V),{student:{id:`regex-${Date.now()}`,student_id:"",name:U,year:"",course:V,section:"",timestamp:new Date().toISOString(),needsLookup:!0},format:"name-course"}}const O=r.match(/^([^,]+),([^,]+),([^,]*),([^,]*),([^,]*)$/);if(O)return{student:{id:`csv-${Date.now()}`,student_id:O[1].trim(),name:O[2].trim(),year:ue(O[3].trim())||"",course:O[4].trim()||"",section:O[5].trim()||"",timestamp:new Date().toISOString()},format:"csv"};try{const U=new URL(r),V=new URLSearchParams(U.search);if(V.get("student_id")||V.get("name"))return{student:{id:`url-${Date.now()}`,student_id:V.get("student_id")||"",name:V.get("name")||"",year:ue(V.get("year")||""),course:V.get("course")||"",section:V.get("section")||"",timestamp:new Date().toISOString()},format:"url"}}catch{}const z=/(\w+)[:=]\s*([^;|]+)/g,Q={};let Z;for(;(Z=z.exec(r))!==null;){const[,U,V]=Z;Q[U.toLowerCase()]=V.trim()}return Q.student_id||Q.name?{student:{id:`kv-${Date.now()}`,student_id:Q.student_id||Q.id||"",name:Q.name||Q.student_name||"",year:ue(Q.year||Q.yr||Q.year_level||""),course:Q.course||Q.program||"",section:Q.section||Q.sec||"",timestamp:new Date().toISOString()},format:"keyvalue"}:(console.log("âŒ No parsing method succeeded for QR data:",JSON.stringify(r)),null)},Le=()=>{const g=["1st","2nd","3rd","4th","5th"],r=["BSCS","BSIT","BSEE","BSME","BSBA"];return{id:"dev-"+Date.now(),student_id:"STU-"+Math.random().toString(36).substr(2,9).toUpperCase(),name:"Demo Student "+Math.floor(Math.random()*100),year:g[Math.floor(Math.random()*g.length)],course:r[Math.floor(Math.random()*r.length)],section:String.fromCharCode(65+Math.floor(Math.random()*3)),timestamp:new Date().toISOString()}},Be=async()=>{if(!M.value.trim()){o.value="Please enter QR code data";return}try{c.value=!0,o.value="",y.value={};const g=M.value.trim();let r,$="name-course";const h=g.split(",").map(z=>z.trim()).filter(z=>z.length>0);if(h.length>=2){const z=h[0],Q=h[1];console.log("Manual QR processing - Name:",z,"Course:",Q);const Z=await ge(z,Q);if(Z)r={...Z,timestamp:new Date().toISOString()};else{o.value=`Student "${z}" with course "${Q}" not found`;return}}else try{const z=JSON.parse(g);if(z.name&&z.course){const Q=await ge(z.name,z.course);if(Q)r={...Q,timestamp:new Date().toISOString()},$="json";else{o.value=`Student "${z.name}" not found`;return}}else{o.value='Invalid format. Use "Name,Course" or valid JSON with name and course';return}}catch{o.value='Invalid format. Please use "Name,Course" format (e.g., "Juan Dela Cruz,BSCS")';return}const O={student:r,rawData:g,format:$};d.value=r,L(O),t("scanSuccess",r),M.value="",o.value=""}catch(g){console.error("Manual scan error:",g),o.value=g instanceof Error?g.message:"Student lookup failed"}finally{c.value=!1}},qe=async()=>{if(!A()){o.value="Please fix the form errors before submitting";return}try{c.value=!0,o.value="",y.value={};const g=C.value.trim(),r=x.value.trim(),$=await ge(g,r);if($){const h={...$,timestamp:new Date().toISOString()},O={student:h,rawData:`${g},${r}`,format:"name-course"};d.value=h,L(O),t("scanSuccess",h),C.value="",x.value="",y.value={},o.value=""}else o.value=`Student "${g}" with course "${r}" not found in database`}catch(g){console.error("Manual form error:",g),o.value=g instanceof Error?g.message:"Student lookup failed"}finally{c.value=!1}},ne=()=>{const g=Le(),r={student:g,rawData:"quick_test",format:"mock"};d.value=g,L(r),t("scanSuccess",g)},se=()=>{e.value==="auto"||e.value==="front"?e.value="rear":e.value="front"},de=()=>{n.value=!n.value},Ie=()=>{e.value="off",B.value=!1,N.value=[],t("close")},Nt=()=>{B.value?(e.value="off",B.value=!1,N.value.length>0&&(t("batchScanSuccess",[...N.value]),N.value=[])):w.value==="camera"&&S.value&&(e.value="auto",o.value="",p.value="loading",B.value=!0)},wn=()=>{if(!S.value){o.value="Camera requires HTTPS. Please use manual mode or enable HTTPS.";return}w.value="camera",e.value="auto",o.value="",y.value={}},et=()=>{w.value="manual",e.value="off",o.value=""},xn=()=>{w.value="upload",e.value="off",o.value="",H.value=""},Sn=g=>{var h;const $=(h=g.target.files)==null?void 0:h[0];$&&(q.value=$,H.value="",P.value="",Cn($))},Cn=async g=>{if(!g)return;if(!["text/csv","application/vnd.ms-excel","text/plain"].includes(g.type)&&!g.name.endsWith(".csv")){H.value="Please upload a CSV file";return}try{b.value=!0,H.value="",E.value=[],F.value=0;const h=(await g.text()).split(`
`).filter(Z=>Z.trim());if(h.length===0){H.value="File is empty",b.value=!1;return}const O=[];let z=!1;const Q=h[0].toLowerCase();(Q.includes("student_id")||Q.includes("name")||Q.includes("id"))&&(z=!0,h.shift());for(let Z=0;Z<h.length;Z++){const U=h[Z].trim();if(!U)continue;const V=U.split(",").map(Fe=>Fe.trim().replace(/^["']|["']$/g,""));if(V.length<2){console.warn(`Skipping invalid line ${Z+1}: ${U}`);continue}const oe={id:`upload-${Date.now()}-${Z}`,student_id:V[0]||"",name:V[1]||"",year:V[2]?ue(V[2]):"",course:V[3]||"",section:V[4]||"",timestamp:new Date().toISOString()};oe.student_id&&oe.name&&O.push(oe),F.value=Math.round((Z+1)/h.length*100)}if(O.length===0){H.value="No valid student data found in file",b.value=!1;return}E.value=O,P.value=`Successfully parsed ${O.length} student(s) from file`,F.value=100}catch($){console.error("File upload error:",$),H.value=`Failed to process file: ${$}`}finally{b.value=!1}},kn=async()=>{if(E.value.length===0){H.value="No students to save";return}try{c.value=!0,H.value="";let g=0,r=0;for(const $ of E.value)L({student:$,rawData:"bulk_upload",format:"file"}),t("scanSuccess",$),g++,await new Promise(O=>setTimeout(O,100));P.value=`Successfully added ${g} student(s)`,setTimeout(()=>{E.value=[],q.value=null,F.value=0,Y.value&&(Y.value.value="")},2e3)}catch(g){console.error("Save students error:",g),H.value="Failed to save students. Please try again."}finally{c.value=!1}},En=()=>{switch(e.value){case"front":return"Front Camera";case"rear":return"Rear Camera";case"off":return"Camera Off";default:return"Auto Camera"}},Re=g=>g.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2),Te=g=>new Date(g).toLocaleTimeString(),be=g=>({"1st":"default","2nd":"secondary","3rd":"outline","4th":"default","5th":"secondary"})[g]||"outline";return(g,r)=>{const $=An("Clock");return g.show?(T(),J("div",is,[u("div",us,[u("div",ds,[u("div",cs,[u("div",fs,[u("div",ms,[u("div",gs,[f(s(ze),{class:"h-6 w-6 text-primary-foreground"})]),r[6]||(r[6]=u("div",null,[u("h2",{class:"text-2xl font-bold tracking-tight"},"Student Attendance Scanner"),u("p",{class:"text-sm text-muted-foreground"}," Scan name+course QR codes to automatically mark students as present ")],-1))]),u("div",hs,[f(s(W),{variant:"secondary",class:"text-xs"},{default:m(()=>[k(R(N.value.length)+" pending â€¢ "+R(v.value.length)+" total ",1)]),_:1}),f(s(te),{variant:"outline",size:"sm",onClick:ne},{default:m(()=>[f(s(Jn),{class:"h-4 w-4 mr-2"}),r[7]||(r[7]=k(" Test Scan ",-1))]),_:1,__:[7]}),w.value==="camera"?(T(),G(s(te),{key:0,variant:B.value?"destructive":"default",size:"sm",onClick:Nt,disabled:p.value==="error"||p.value==="unsupported"},{default:m(()=>[B.value?j("",!0):(T(),G(s(Lt),{key:0,class:"h-4 w-4 mr-2"})),B.value?(T(),G(s(ss),{key:1,class:"h-4 w-4 mr-2"})):j("",!0),k(" "+R(B.value?"Stop Scanning":"Start Scanning"),1)]),_:1},8,["variant","disabled"])):j("",!0),f(s(te),{variant:"ghost",size:"icon",onClick:Ie},{default:m(()=>[f(s(Rn),{class:"h-5 w-5"})]),_:1})])])])]),u("div",ps,[f(s(os),{value:w.value,class:"h-full flex flex-col"},{default:m(()=>[u("div",vs,[u("div",ys,[f(s(ls),{class:"w-full grid grid-cols-3 bg-transparent h-auto p-0"},{default:m(()=>[f(s(ot),{value:"camera",onClick:wn,class:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent py-3"},{default:m(()=>[f(s(Pt),{class:"h-4 w-4 mr-2"}),r[9]||(r[9]=k(" QR Scan (Auto Present) ",-1)),S.value?j("",!0):(T(),G(s(W),{key:0,variant:"destructive",class:"ml-2 h-4 px-1 text-xs"},{default:m(()=>r[8]||(r[8]=[k(" HTTPS ",-1)])),_:1,__:[8]}))]),_:1,__:[9]}),f(s(ot),{value:"manual",onClick:et,class:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent py-3"},{default:m(()=>[f(s(Pe),{class:"h-4 w-4 mr-2"}),r[10]||(r[10]=k(" Manual Lookup ",-1))]),_:1,__:[10]}),f(s(ot),{value:"upload",onClick:xn,class:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent py-3"},{default:m(()=>[f(s(st),{class:"h-4 w-4 mr-2"}),r[11]||(r[11]=k(" File Upload ",-1))]),_:1,__:[11]})]),_:1})])]),f(s(rt),{value:"camera",class:"flex-1 m-0 p-6 overflow-auto data-[state=inactive]:hidden"},{default:m(()=>[u("div",_s,[u("div",bs,[u("div",ws,[e.value!=="off"&&S.value?(T(),G(s(In),{key:0,camera:e.value,torch:n.value,onDetect:De,onError:Xe,onCameraOn:re,onCameraOff:me,class:"w-full h-full object-contain"},{default:m(()=>r[12]||(r[12]=[u("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[u("div",{class:"relative"},[u("div",{class:"w-64 h-64 relative"},[u("div",{class:"absolute -top-2 -left-2 w-12 h-12 border-t-4 border-l-4 border-primary rounded-tl-lg"}),u("div",{class:"absolute -top-2 -right-2 w-12 h-12 border-t-4 border-r-4 border-primary rounded-tr-lg"}),u("div",{class:"absolute -bottom-2 -left-2 w-12 h-12 border-b-4 border-l-4 border-primary rounded-bl-lg"}),u("div",{class:"absolute -bottom-2 -right-2 w-12 h-12 border-b-4 border-r-4 border-primary rounded-br-lg"}),u("div",{class:"absolute top-0 left-0 right-0 h-1 bg-primary shadow-[0_0_20px_rgba(var(--primary),0.8)] animate-scan"})])])],-1)])),_:1,__:[12]},8,["camera","torch"])):j("",!0),p.value!=="ready"&&B.value?(T(),J("div",xs,[f(s(X),{class:"max-w-sm w-full mx-4"},{default:m(()=>[f(s(ee),{class:"p-6 text-center"},{default:m(()=>[p.value==="loading"?(T(),J("div",Ss,[f(s(at),{class:"h-12 w-12 animate-spin mx-auto text-primary"}),r[13]||(r[13]=u("div",null,[u("p",{class:"font-semibold text-lg"},"Initializing Camera"),u("p",{class:"text-sm text-muted-foreground"},"Please wait...")],-1))])):p.value==="unsupported"?(T(),J("div",Cs,[f(s(Oe),{class:"h-12 w-12 mx-auto text-yellow-500"}),r[15]||(r[15]=u("div",null,[u("p",{class:"font-semibold text-lg"},"Camera Not Available"),u("p",{class:"text-sm text-muted-foreground mt-2"}," Camera requires HTTPS connection for security. ")],-1)),f(s(te),{onClick:et,class:"w-full"},{default:m(()=>[f(s(Pe),{class:"h-4 w-4 mr-2"}),r[14]||(r[14]=k(" Switch to Manual Mode ",-1))]),_:1,__:[14]})])):p.value==="error"?(T(),J("div",ks,[f(s(Oe),{class:"h-12 w-12 mx-auto text-destructive"}),u("div",null,[r[16]||(r[16]=u("p",{class:"font-semibold text-lg"},"Camera Error",-1)),u("p",Es,R(o.value),1)]),u("div",Bs,[f(s(te),{onClick:r[0]||(r[0]=h=>e.value="auto"),variant:"outline",class:"flex-1"},{default:m(()=>[f(s(at),{class:"h-4 w-4 mr-2"}),r[17]||(r[17]=k(" Retry ",-1))]),_:1,__:[17]}),f(s(te),{onClick:et,class:"flex-1"},{default:m(()=>r[18]||(r[18]=[k(" Manual Mode ",-1)])),_:1,__:[18]})])])):j("",!0)]),_:1})]),_:1})])):j("",!0),!B.value&&p.value!=="ready"?(T(),J("div",Is,[f(s(X),{class:"max-w-sm w-full mx-4"},{default:m(()=>[f(s(ee),{class:"p-6 text-center"},{default:m(()=>[u("div",Rs,[f(s(Pt),{class:"h-12 w-12 mx-auto text-muted-foreground"}),r[20]||(r[20]=u("div",null,[u("p",{class:"font-semibold text-lg"},"Camera Stopped"),u("p",{class:"text-sm text-muted-foreground"},'Click "Start Scanning" to begin scanning QR codes')],-1)),f(s(te),{onClick:Nt,class:"w-full"},{default:m(()=>[f(s(Lt),{class:"h-4 w-4 mr-2"}),r[19]||(r[19]=k(" Start Scanning ",-1))]),_:1,__:[19]})])]),_:1})]),_:1})])):j("",!0),p.value==="ready"&&B.value?(T(),J("div",Ts,[f(s(te),{variant:"secondary",size:"lg",onClick:se,title:En(),class:"rounded-full shadow-xl backdrop-blur-sm bg-background/80"},{default:m(()=>[f(s(as),{class:"h-5 w-5 mr-2"}),r[21]||(r[21]=k(" Switch ",-1))]),_:1,__:[21]},8,["title"]),f(s(te),{variant:n.value?"default":"secondary",size:"lg",onClick:de,title:"Toggle flashlight",class:"rounded-full shadow-xl backdrop-blur-sm bg-background/80"},{default:m(()=>[f(s(ns),{class:"h-5 w-5 mr-2",fill:n.value?"currentColor":"none"},null,8,["fill"]),r[22]||(r[22]=k(" Flash ",-1))]),_:1,__:[22]},8,["variant"])])):j("",!0)]),u("div",Ms,[f(s(X),{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 dark:from-blue-950/20 dark:to-indigo-950/20"},{default:m(()=>[f(s(ee),{class:"p-4"},{default:m(()=>[u("div",Ns,[u("div",Ps,[f(s(ze),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),r[23]||(r[23]=u("div",null,[u("p",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"How to scan"),u("p",{class:"text-xs text-blue-700 dark:text-blue-300"},'Scan QR codes containing student name and course (e.g., "EJ FAYE A. DULAY,BSCS,,"). Students will be added to pending list. Click "Stop Scanning" to mark all scanned students as present.')],-1))])]),_:1})]),_:1})])]),u("div",As,[N.value.length>0?(T(),J("div",Ds,[u("div",Ls,[f($,{class:"h-4 w-4 text-orange-500"}),u("p",qs,"Pending Scans ("+R(N.value.length)+")",1),f(s(W),{variant:"outline",class:"ml-auto text-xs bg-orange-50 text-orange-700 border-orange-200"},{default:m(()=>r[24]||(r[24]=[k(" Will be marked present when stopped ",-1)])),_:1,__:[24]})]),u("div",Fs,[(T(!0),J(Ue,null,Ve(N.value.slice(0,5),(h,O)=>(T(),G(s(X),{key:h.id,class:"group hover:border-orange-300 transition-colors border-orange-200 bg-orange-50/50 dark:bg-orange-950/20"},{default:m(()=>[f(s(ee),{class:"p-3"},{default:m(()=>[u("div",Us,[f(s(Me),{class:"h-8 w-8 shrink-0"},{default:m(()=>[f(s(Ne),{class:"text-xs bg-orange-100 text-orange-700"},{default:m(()=>[k(R(Re(h.name)),1)]),_:2},1024)]),_:2},1024),u("div",Vs,[u("p",$s,R(h.name),1),u("div",zs,[f(s(W),{variant:"outline",class:"text-xs font-mono"},{default:m(()=>[k(R(h.student_id),1)]),_:2},1024),h.year?(T(),G(s(W),{key:0,variant:be(h.year),class:"text-xs"},{default:m(()=>[k(R(h.year),1)]),_:2},1032,["variant"])):j("",!0)])]),f(s(W),{variant:"outline",class:"text-xs shrink-0"},{default:m(()=>[k(R(Te(h.timestamp)),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128)),N.value.length>5?(T(),J("div",Os,[u("p",js,"+"+R(N.value.length-5)+" more students",1)])):j("",!0)])])):j("",!0),d.value&&N.value.length===0?(T(),J("div",Hs,[u("div",Js,[f(s(he),{class:"h-4 w-4 text-green-500"}),r[25]||(r[25]=u("p",{class:"text-sm font-medium text-muted-foreground"},"Last Scanned",-1)),f(s(W),{variant:"outline",class:"ml-auto text-xs"},{default:m(()=>[k(R(Te(d.value.timestamp)),1)]),_:1})]),f(s(X),{class:"border-green-200 bg-green-50/50 dark:bg-green-950/20 dark:border-green-800"},{default:m(()=>[f(s(ee),{class:"p-4"},{default:m(()=>[u("div",Qs,[f(s(Me),{class:"h-12 w-12 border-2 border-green-500 shrink-0"},{default:m(()=>[f(s(Ne),{class:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 font-semibold"},{default:m(()=>[k(R(Re(d.value.name)),1)]),_:1})]),_:1}),u("div",Ks,[u("div",Ys,[u("p",Gs,R(d.value.name),1),f(s(W),{variant:"default",class:"bg-green-500 hover:bg-green-500 shrink-0"},{default:m(()=>r[26]||(r[26]=[k(" Present ",-1)])),_:1,__:[26]})]),u("div",Ws,[u("div",Zs,[f(s(Dt),{class:"h-3 w-3 text-muted-foreground"}),r[27]||(r[27]=u("span",{class:"text-muted-foreground"},"ID:",-1)),u("span",Xs,R(d.value.student_id),1)]),u("div",ea,[f(s(tt),{class:"h-3 w-3 text-muted-foreground"}),r[28]||(r[28]=u("span",{class:"text-muted-foreground"},"Course:",-1)),u("span",null,R(d.value.course||"N/A"),1)]),u("div",ta,[f(s(At),{class:"h-3 w-3 text-muted-foreground"}),r[29]||(r[29]=u("span",{class:"text-muted-foreground"},"Year:",-1)),f(s(W),{variant:be(d.value.year),class:"text-xs"},{default:m(()=>[k(R(d.value.year||"N/A"),1)]),_:1},8,["variant"])]),u("div",na,[f(s(je),{class:"h-3 w-3 text-muted-foreground"}),r[30]||(r[30]=u("span",{class:"text-muted-foreground"},"Section:",-1)),u("span",null,R(d.value.section||"N/A"),1)])])])])]),_:1})]),_:1})])):j("",!0),v.value.length>0?(T(),J("div",sa,[u("div",aa,[f(s(je),{class:"h-4 w-4 text-muted-foreground"}),r[31]||(r[31]=u("p",{class:"text-sm font-medium text-muted-foreground"},"Recent Scans",-1)),f(s(W),{variant:"outline",class:"ml-auto text-xs"},{default:m(()=>[k(R(v.value.length),1)]),_:1})]),u("div",ra,[(T(!0),J(Ue,null,Ve(v.value.slice(0,5),(h,O)=>(T(),G(s(X),{key:h.student.id,class:"group hover:border-primary/50 transition-colors"},{default:m(()=>[f(s(ee),{class:"p-3"},{default:m(()=>[u("div",oa,[f(s(Me),{class:"h-8 w-8"},{default:m(()=>[f(s(Ne),{class:"text-xs"},{default:m(()=>[k(R(Re(h.student.name)),1)]),_:2},1024)]),_:2},1024),u("div",la,[u("p",ia,R(h.student.name),1),u("div",ua,[h.student.year?(T(),G(s(W),{key:0,variant:be(h.student.year),class:"text-xs"},{default:m(()=>[k(R(h.student.year),1)]),_:2},1032,["variant"])):j("",!0),u("span",da,R(h.student.student_id),1)])]),f(s(W),{variant:"outline",class:"text-xs shrink-0"},{default:m(()=>[k(R(Te(h.student.timestamp)),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])])):j("",!0),!d.value&&v.value.length===0?(T(),J("div",ca,[u("div",fa,[f(s(ze),{class:"h-6 w-6 text-muted-foreground"})]),r[32]||(r[32]=u("p",{class:"text-sm font-medium text-muted-foreground mb-1"},"No scans yet",-1)),r[33]||(r[33]=u("p",{class:"text-xs text-muted-foreground"}," Scan a student QR code to get started ",-1))])):j("",!0)])])]),_:1}),f(s(rt),{value:"manual",class:"flex-1 m-0 p-6 overflow-auto data-[state=inactive]:hidden"},{default:m(()=>[u("div",ma,[u("div",ga,[f(s(X),null,{default:m(()=>[f(s(we),{class:"text-center pb-4"},{default:m(()=>[u("div",ha,[f(s(Pe),{class:"h-8 w-8 text-primary"})]),f(s(xe),null,{default:m(()=>r[34]||(r[34]=[k("Manual Student Lookup",-1)])),_:1,__:[34]}),r[35]||(r[35]=u("p",{class:"text-sm text-muted-foreground"}," Enter student name and course to find and mark as present ",-1))]),_:1,__:[35]}),f(s(ee),{class:"space-y-4"},{default:m(()=>[u("div",pa,[f(s($e),{for:"studentName",class:"flex items-center gap-2"},{default:m(()=>[f(s(Pe),{class:"h-4 w-4 text-muted-foreground"}),r[36]||(r[36]=k(" Full Name * ",-1))]),_:1,__:[36]}),f(s(nt),{id:"studentName",modelValue:C.value,"onUpdate:modelValue":r[1]||(r[1]=h=>C.value=h),placeholder:"Enter student full name (e.g., Juan Dela Cruz)",disabled:c.value,onBlur:r[2]||(r[2]=h=>I("name",C.value)),class:Ke({"border-destructive":y.value.name})},null,8,["modelValue","disabled","class"]),y.value.name?(T(),J("p",va,R(y.value.name),1)):j("",!0)]),u("div",ya,[f(s($e),{for:"studentCourse",class:"flex items-center gap-2"},{default:m(()=>[f(s(tt),{class:"h-4 w-4 text-muted-foreground"}),r[37]||(r[37]=k(" Course * ",-1))]),_:1,__:[37]}),f(s(nt),{id:"studentCourse",modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=h=>x.value=h),placeholder:"Enter course (e.g., BSCS, BSIT, BSEE)",disabled:c.value,onBlur:r[4]||(r[4]=h=>I("course",x.value)),class:Ke({"border-destructive":y.value.course})},null,8,["modelValue","disabled","class"]),y.value.course?(T(),J("p",_a,R(y.value.course),1)):j("",!0)]),f(s(He),{class:"border-blue-200 bg-blue-50 text-blue-900 dark:bg-blue-950 dark:text-blue-100"},{default:m(()=>[f(s(he),{class:"h-4 w-4 text-blue-600"}),f(s(Je),{class:"text-sm"},{default:m(()=>r[38]||(r[38]=[k(" Only name and course are required. The system will automatically look up the student and mark them as present. ",-1)])),_:1,__:[38]})]),_:1}),f(s(te),{onClick:qe,disabled:c.value||!C.value.trim()||!x.value.trim()||Object.values(y.value).some(h=>h),class:"w-full",size:"lg"},{default:m(()=>[f(s(he),{class:"mr-2 h-5 w-5"}),k(" "+R(c.value?"Finding Student & Marking Present...":"Find Student & Mark Present"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),f(s(X),null,{default:m(()=>[f(s(we),null,{default:m(()=>[f(s(xe),{class:"flex items-center gap-2"},{default:m(()=>[f(s(ze),{class:"h-5 w-5 text-muted-foreground"}),r[39]||(r[39]=k(" QR Code Text ",-1))]),_:1,__:[39]}),r[40]||(r[40]=u("p",{class:"text-sm text-muted-foreground"}," Paste raw QR code data (name,course format) ",-1))]),_:1,__:[40]}),f(s(ee),{class:"space-y-4"},{default:m(()=>[u("div",ba,[f(s($e),null,{default:m(()=>r[41]||(r[41]=[k("QR Code Data",-1)])),_:1,__:[41]}),f(s(Hn),{modelValue:M.value,"onUpdate:modelValue":r[5]||(r[5]=h=>M.value=h),placeholder:"EJ FAYE A. DULAY,BSCS,,",class:"min-h-[120px] font-mono text-sm resize-none",disabled:c.value},null,8,["modelValue","disabled"]),r[42]||(r[42]=u("p",{class:"text-xs text-muted-foreground"},' Enter QR code data in the format: "Student Name,Course,," (e.g., "EJ FAYE A. DULAY,BSCS,,") ',-1))]),f(s(te),{onClick:Be,disabled:c.value||!M.value.trim(),class:"w-full",size:"lg"},{default:m(()=>[f(s(he),{class:"mr-2 h-5 w-5"}),k(" "+R(c.value?"Finding Student...":"Find Student & Mark Present"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),u("div",wa,[d.value?(T(),J("div",xa,[u("div",Sa,[f(s(he),{class:"h-4 w-4 text-green-500"}),r[43]||(r[43]=u("p",{class:"text-sm font-medium text-muted-foreground"},"Last Added",-1)),f(s(W),{variant:"outline",class:"ml-auto text-xs"},{default:m(()=>[k(R(Te(d.value.timestamp)),1)]),_:1})]),f(s(X),{class:"border-green-200 bg-green-50/50 dark:bg-green-950/20"},{default:m(()=>[f(s(ee),{class:"p-4"},{default:m(()=>[u("div",Ca,[f(s(Me),{class:"h-12 w-12 border-2 border-green-500 shrink-0"},{default:m(()=>[f(s(Ne),{class:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 font-semibold"},{default:m(()=>[k(R(Re(d.value.name)),1)]),_:1})]),_:1}),u("div",ka,[u("div",Ea,[u("p",Ba,R(d.value.name),1),f(s(W),{variant:"default",class:"bg-green-500 hover:bg-green-500 shrink-0"},{default:m(()=>r[44]||(r[44]=[k(" Present ",-1)])),_:1,__:[44]})]),u("div",Ia,[u("div",Ra,[f(s(Dt),{class:"h-3 w-3 text-muted-foreground"}),r[45]||(r[45]=u("span",{class:"text-muted-foreground"},"ID:",-1)),u("span",Ta,R(d.value.student_id),1)]),u("div",Ma,[f(s(tt),{class:"h-3 w-3 text-muted-foreground"}),r[46]||(r[46]=u("span",{class:"text-muted-foreground"},"Course:",-1)),u("span",null,R(d.value.course||"N/A"),1)]),u("div",Na,[f(s(At),{class:"h-3 w-3 text-muted-foreground"}),r[47]||(r[47]=u("span",{class:"text-muted-foreground"},"Year:",-1)),f(s(W),{variant:be(d.value.year),class:"text-xs"},{default:m(()=>[k(R(d.value.year||"N/A"),1)]),_:1},8,["variant"])]),u("div",Pa,[f(s(je),{class:"h-3 w-3 text-muted-foreground"}),r[48]||(r[48]=u("span",{class:"text-muted-foreground"},"Section:",-1)),u("span",null,R(d.value.section||"N/A"),1)])])])])]),_:1})]),_:1})])):j("",!0),v.value.length>0?(T(),G(s(X),{key:1},{default:m(()=>[f(s(we),{class:"pb-3"},{default:m(()=>[f(s(xe),{class:"text-sm flex items-center gap-2"},{default:m(()=>[f(s(je),{class:"h-4 w-4 text-muted-foreground"}),r[49]||(r[49]=k(" Scan History ",-1))]),_:1,__:[49]})]),_:1}),f(s(ee),{class:"p-0"},{default:m(()=>[u("div",Aa,[(T(!0),J(Ue,null,Ve(v.value,(h,O)=>(T(),J("div",{key:h.student.id,class:"p-3 border-b last:border-b-0 hover:bg-muted/50 transition-colors"},[u("div",Da,[f(s(Me),{class:"h-8 w-8 shrink-0"},{default:m(()=>[f(s(Ne),{class:"text-xs"},{default:m(()=>[k(R(Re(h.student.name)),1)]),_:2},1024)]),_:2},1024),u("div",La,[u("p",qa,R(h.student.name),1),u("div",Fa,[h.student.year?(T(),G(s(W),{key:0,variant:be(h.student.year),class:"text-xs"},{default:m(()=>[k(R(h.student.year),1)]),_:2},1032,["variant"])):j("",!0),u("span",Ua,R(h.student.student_id),1)])]),u("div",Va,[f(s(W),{variant:"outline",class:"text-xs mb-1"},{default:m(()=>[k(R(Te(h.student.timestamp)),1)]),_:2},1024),u("p",$a,R(h.format),1)])])]))),128))])]),_:1})]),_:1})):j("",!0),!d.value&&v.value.length===0?(T(),J("div",za,[u("div",Oa,[f(s(Pe),{class:"h-6 w-6 text-muted-foreground"})]),r[50]||(r[50]=u("p",{class:"text-sm font-medium text-muted-foreground mb-1"},"No entries yet",-1)),r[51]||(r[51]=u("p",{class:"text-xs text-muted-foreground"}," Add a student to get started ",-1))])):j("",!0)])])]),_:1}),f(s(rt),{value:"upload",class:"flex-1 m-0 p-6 overflow-auto data-[state=inactive]:hidden"},{default:m(()=>[u("div",ja,[u("div",Ha,[f(s(X),null,{default:m(()=>[f(s(we),{class:"text-center pb-4"},{default:m(()=>[u("div",Ja,[f(s(st),{class:"h-8 w-8 text-primary"})]),f(s(xe),null,{default:m(()=>r[52]||(r[52]=[k("Bulk Student Upload",-1)])),_:1,__:[52]}),r[53]||(r[53]=u("p",{class:"text-sm text-muted-foreground"}," Upload a CSV file to import multiple students at once ",-1))]),_:1,__:[53]}),f(s(ee),{class:"space-y-4"},{default:m(()=>[u("div",Qa,[f(s($e),null,{default:m(()=>r[54]||(r[54]=[k("Select CSV File",-1)])),_:1,__:[54]}),u("div",Ka,[f(s(nt),{ref_key:"fileInput",ref:Y,type:"file",accept:".csv,text/csv,application/vnd.ms-excel",onChange:Sn,disabled:c.value||b.value,class:"flex-1"},null,8,["disabled"])]),r[55]||(r[55]=u("p",{class:"text-xs text-muted-foreground"}," CSV format: student_id, name, year, course, section ",-1))]),b.value?(T(),J("div",Ya,[u("div",Ga,[r[56]||(r[56]=u("span",{class:"text-muted-foreground"},"Processing file...",-1)),u("span",Wa,R(F.value)+"%",1)]),u("div",Za,[u("div",{class:"bg-primary h-full transition-all duration-300 ease-out",style:gn({width:`${F.value}%`})},null,4)])])):j("",!0),P.value?(T(),G(s(He),{key:1,class:"border-green-200 bg-green-50 text-green-900 dark:bg-green-950 dark:text-green-100"},{default:m(()=>[f(s(he),{class:"h-4 w-4 text-green-600"}),f(s(Je),null,{default:m(()=>[k(R(P.value),1)]),_:1})]),_:1})):j("",!0),H.value?(T(),G(s(He),{key:2,variant:"destructive"},{default:m(()=>[f(s(Oe),{class:"h-4 w-4"}),f(s(Je),null,{default:m(()=>[k(R(H.value),1)]),_:1})]),_:1})):j("",!0),f(s(X),{class:"bg-muted/50"},{default:m(()=>[f(s(we),{class:"pb-3"},{default:m(()=>[f(s(xe),{class:"text-sm"},{default:m(()=>r[57]||(r[57]=[k("CSV Format Example",-1)])),_:1,__:[57]})]),_:1}),f(s(ee),{class:"space-y-2"},{default:m(()=>r[58]||(r[58]=[u("div",{class:"bg-background rounded-md p-3 font-mono text-xs overflow-x-auto"},[u("div",{class:"text-muted-foreground mb-2"},"// With header (recommended):"),u("div",null,"student_id,name,year,course,section"),u("div",null,"STU-001,John Doe,1st,BSCS,A"),u("div",null,"STU-002,Jane Smith,2nd,BSIT,B"),u("div",{class:"mt-3 text-muted-foreground"},"// Without header:"),u("div",null,"STU-001,John Doe,1st,BSCS,A"),u("div",null,"STU-002,Jane Smith,2nd,BSIT,B")],-1),u("p",{class:"text-xs text-muted-foreground"},[k(" â€¢ First two columns (student_id, name) are required"),u("br"),k(" â€¢ Year must be: 1st, 2nd, 3rd, 4th, or 5th"),u("br"),k(" â€¢ Course and section are optional ")],-1)])),_:1,__:[58]})]),_:1}),f(s(te),{onClick:kn,disabled:E.value.length===0||c.value,class:"w-full",size:"lg"},{default:m(()=>[f(s(he),{class:"mr-2 h-5 w-5"}),k(" "+R(c.value?"Saving...":`Save ${E.value.length} Student(s)`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),u("div",Xa,[E.value.length>0?(T(),G(s(X),{key:0},{default:m(()=>[f(s(we),null,{default:m(()=>[f(s(xe),{class:"text-sm flex items-center justify-between"},{default:m(()=>[r[59]||(r[59]=u("span",null,"Parsed Students",-1)),f(s(W),{variant:"secondary"},{default:m(()=>[k(R(E.value.length),1)]),_:1})]),_:1,__:[59]})]),_:1}),f(s(ee),{class:"p-0"},{default:m(()=>[u("div",er,[(T(!0),J(Ue,null,Ve(E.value,(h,O)=>(T(),J("div",{key:h.id,class:"p-3 border-b last:border-b-0 hover:bg-muted/50 transition-colors"},[u("div",tr,[u("div",nr,[u("span",sr,R(O+1),1)]),u("div",ar,[u("p",rr,R(h.name),1),u("div",or,[f(s(W),{variant:"outline",class:"font-mono"},{default:m(()=>[k(R(h.student_id),1)]),_:2},1024),h.year?(T(),G(s(W),{key:0,variant:be(h.year)},{default:m(()=>[k(R(h.year),1)]),_:2},1032,["variant"])):j("",!0),h.course?(T(),J("span",lr,R(h.course),1)):j("",!0),h.section?(T(),J("span",ir," Sec "+R(h.section),1)):j("",!0)])])])]))),128))])]),_:1})]),_:1})):j("",!0),E.value.length===0?(T(),J("div",ur,[u("div",dr,[f(s(st),{class:"h-6 w-6 text-muted-foreground"})]),r[60]||(r[60]=u("p",{class:"text-sm font-medium text-muted-foreground mb-1"},"No file uploaded",-1)),r[61]||(r[61]=u("p",{class:"text-xs text-muted-foreground"}," Select a CSV file to import students ",-1))])):j("",!0)])])]),_:1})]),_:1},8,["value"])]),c.value?(T(),J("div",cr,[f(s(X),{class:"max-w-sm"},{default:m(()=>[f(s(ee),{class:"p-6 text-center"},{default:m(()=>[f(s(at),{class:"h-10 w-10 animate-spin mx-auto text-primary mb-4"}),r[62]||(r[62]=u("div",null,[u("p",{class:"font-semibold text-lg mb-1"},"Processing"),u("p",{class:"text-sm text-muted-foreground"},"Marking attendance...")],-1))]),_:1,__:[62]})]),_:1})])):j("",!0),o.value?(T(),J("div",fr,[u("div",mr,[f(s(He),{variant:"destructive"},{default:m(()=>[f(s(Oe),{class:"h-4 w-4"}),f(s(Je),null,{default:m(()=>[k(R(o.value),1)]),_:1})]),_:1})])])):j("",!0)])])):j("",!0)}}}),ro=Tn(gr,[["__scopeId","data-v-a0c7a89a"]]);var Se={},lt,qt;function hr(){return qt||(qt=1,lt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),lt}var it={},ce={},Ft;function ve(){if(Ft)return ce;Ft=1;let l;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ce.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},ce.getSymbolTotalCodewords=function(t){return a[t]},ce.getBCHDigit=function(i){let t=0;for(;i!==0;)t++,i>>>=1;return t},ce.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');l=t},ce.isKanjiModeEnabled=function(){return typeof l<"u"},ce.toSJIS=function(t){return l(t)},ce}var ut={},Ut;function Mt(){return Ut||(Ut=1,(function(l){l.L={bit:1},l.M={bit:0},l.Q={bit:3},l.H={bit:2};function a(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return l.L;case"m":case"medium":return l.M;case"q":case"quartile":return l.Q;case"h":case"high":return l.H;default:throw new Error("Unknown EC Level: "+i)}}l.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},l.from=function(t,e){if(l.isValid(t))return t;try{return a(t)}catch{return e}}})(ut)),ut}var dt,Vt;function pr(){if(Vt)return dt;Vt=1;function l(){this.buffer=[],this.length=0}return l.prototype={get:function(a){const i=Math.floor(a/8);return(this.buffer[i]>>>7-a%8&1)===1},put:function(a,i){for(let t=0;t<i;t++)this.putBit((a>>>i-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),a&&(this.buffer[i]|=128>>>this.length%8),this.length++}},dt=l,dt}var ct,$t;function vr(){if($t)return ct;$t=1;function l(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return l.prototype.set=function(a,i,t,e){const n=a*this.size+i;this.data[n]=t,e&&(this.reservedBit[n]=!0)},l.prototype.get=function(a,i){return this.data[a*this.size+i]},l.prototype.xor=function(a,i,t){this.data[a*this.size+i]^=t},l.prototype.isReserved=function(a,i){return this.reservedBit[a*this.size+i]},ct=l,ct}var ft={},zt;function yr(){return zt||(zt=1,(function(l){const a=ve().getSymbolSize;l.getRowColCoords=function(t){if(t===1)return[];const e=Math.floor(t/7)+2,n=a(t),o=n===145?26:Math.ceil((n-13)/(2*e-2))*2,c=[n-7];for(let d=1;d<e-1;d++)c[d]=c[d-1]-o;return c.push(6),c.reverse()},l.getPositions=function(t){const e=[],n=l.getRowColCoords(t),o=n.length;for(let c=0;c<o;c++)for(let d=0;d<o;d++)c===0&&d===0||c===0&&d===o-1||c===o-1&&d===0||e.push([n[c],n[d]]);return e}})(ft)),ft}var mt={},Ot;function _r(){if(Ot)return mt;Ot=1;const l=ve().getSymbolSize,a=7;return mt.getPositions=function(t){const e=l(t);return[[0,0],[e-a,0],[0,e-a]]},mt}var gt={},jt;function br(){return jt||(jt=1,(function(l){l.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};l.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},l.from=function(e){return l.isValid(e)?parseInt(e,10):void 0},l.getPenaltyN1=function(e){const n=e.size;let o=0,c=0,d=0,p=null,_=null;for(let M=0;M<n;M++){c=d=0,p=_=null;for(let w=0;w<n;w++){let v=e.get(M,w);v===p?c++:(c>=5&&(o+=a.N1+(c-5)),p=v,c=1),v=e.get(w,M),v===_?d++:(d>=5&&(o+=a.N1+(d-5)),_=v,d=1)}c>=5&&(o+=a.N1+(c-5)),d>=5&&(o+=a.N1+(d-5))}return o},l.getPenaltyN2=function(e){const n=e.size;let o=0;for(let c=0;c<n-1;c++)for(let d=0;d<n-1;d++){const p=e.get(c,d)+e.get(c,d+1)+e.get(c+1,d)+e.get(c+1,d+1);(p===4||p===0)&&o++}return o*a.N2},l.getPenaltyN3=function(e){const n=e.size;let o=0,c=0,d=0;for(let p=0;p<n;p++){c=d=0;for(let _=0;_<n;_++)c=c<<1&2047|e.get(p,_),_>=10&&(c===1488||c===93)&&o++,d=d<<1&2047|e.get(_,p),_>=10&&(d===1488||d===93)&&o++}return o*a.N3},l.getPenaltyN4=function(e){let n=0;const o=e.data.length;for(let d=0;d<o;d++)n+=e.data[d];return Math.abs(Math.ceil(n*100/o/5)-10)*a.N4};function i(t,e,n){switch(t){case l.Patterns.PATTERN000:return(e+n)%2===0;case l.Patterns.PATTERN001:return e%2===0;case l.Patterns.PATTERN010:return n%3===0;case l.Patterns.PATTERN011:return(e+n)%3===0;case l.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2===0;case l.Patterns.PATTERN101:return e*n%2+e*n%3===0;case l.Patterns.PATTERN110:return(e*n%2+e*n%3)%2===0;case l.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}l.applyMask=function(e,n){const o=n.size;for(let c=0;c<o;c++)for(let d=0;d<o;d++)n.isReserved(d,c)||n.xor(d,c,i(e,d,c))},l.getBestMask=function(e,n){const o=Object.keys(l.Patterns).length;let c=0,d=1/0;for(let p=0;p<o;p++){n(p),l.applyMask(p,e);const _=l.getPenaltyN1(e)+l.getPenaltyN2(e)+l.getPenaltyN3(e)+l.getPenaltyN4(e);l.applyMask(p,e),_<d&&(d=_,c=p)}return c}})(gt)),gt}var Qe={},Ht;function vn(){if(Ht)return Qe;Ht=1;const l=Mt(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Qe.getBlocksCount=function(e,n){switch(n){case l.L:return a[(e-1)*4+0];case l.M:return a[(e-1)*4+1];case l.Q:return a[(e-1)*4+2];case l.H:return a[(e-1)*4+3];default:return}},Qe.getTotalCodewordsCount=function(e,n){switch(n){case l.L:return i[(e-1)*4+0];case l.M:return i[(e-1)*4+1];case l.Q:return i[(e-1)*4+2];case l.H:return i[(e-1)*4+3];default:return}},Qe}var ht={},Ae={},Jt;function wr(){if(Jt)return Ae;Jt=1;const l=new Uint8Array(512),a=new Uint8Array(256);return(function(){let t=1;for(let e=0;e<255;e++)l[e]=t,a[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)l[e]=l[e-255]})(),Ae.log=function(t){if(t<1)throw new Error("log("+t+")");return a[t]},Ae.exp=function(t){return l[t]},Ae.mul=function(t,e){return t===0||e===0?0:l[a[t]+a[e]]},Ae}var Qt;function xr(){return Qt||(Qt=1,(function(l){const a=wr();l.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let o=0;o<t.length;o++)for(let c=0;c<e.length;c++)n[o+c]^=a.mul(t[o],e[c]);return n},l.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const o=n[0];for(let d=0;d<e.length;d++)n[d]^=a.mul(e[d],o);let c=0;for(;c<n.length&&n[c]===0;)c++;n=n.slice(c)}return n},l.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=l.mul(e,new Uint8Array([1,a.exp(n)]));return e}})(ht)),ht}var pt,Kt;function Sr(){if(Kt)return pt;Kt=1;const l=xr();function a(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(t){this.degree=t,this.genPoly=l.generateECPolynomial(this.degree)},a.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=l.mod(e,this.genPoly),o=this.degree-n.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(n,o),c}return n},pt=a,pt}var vt={},yt={},_t={},Yt;function yn(){return Yt||(Yt=1,_t.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),_t}var le={},Gt;function _n(){if(Gt)return le;Gt=1;const l="[0-9]+",a="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;le.KANJI=new RegExp(i,"g"),le.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),le.BYTE=new RegExp(t,"g"),le.NUMERIC=new RegExp(l,"g"),le.ALPHANUMERIC=new RegExp(a,"g");const e=new RegExp("^"+i+"$"),n=new RegExp("^"+l+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return le.testKanji=function(d){return e.test(d)},le.testNumeric=function(d){return n.test(d)},le.testAlphanumeric=function(d){return o.test(d)},le}var Wt;function ye(){return Wt||(Wt=1,(function(l){const a=yn(),i=_n();l.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},l.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},l.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},l.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},l.MIXED={bit:-1},l.getCharCountIndicator=function(n,o){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!a.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?n.ccBits[0]:o<27?n.ccBits[1]:n.ccBits[2]},l.getBestModeForData=function(n){return i.testNumeric(n)?l.NUMERIC:i.testAlphanumeric(n)?l.ALPHANUMERIC:i.testKanji(n)?l.KANJI:l.BYTE},l.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},l.isValid=function(n){return n&&n.bit&&n.ccBits};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return l.NUMERIC;case"alphanumeric":return l.ALPHANUMERIC;case"kanji":return l.KANJI;case"byte":return l.BYTE;default:throw new Error("Unknown mode: "+e)}}l.from=function(n,o){if(l.isValid(n))return n;try{return t(n)}catch{return o}}})(yt)),yt}var Zt;function Cr(){return Zt||(Zt=1,(function(l){const a=ve(),i=vn(),t=Mt(),e=ye(),n=yn(),o=7973,c=a.getBCHDigit(o);function d(w,v,B){for(let N=1;N<=40;N++)if(v<=l.getCapacity(N,B,w))return N}function p(w,v){return e.getCharCountIndicator(w,v)+4}function _(w,v){let B=0;return w.forEach(function(N){const Y=p(N.mode,v);B+=Y+N.getBitsLength()}),B}function M(w,v){for(let B=1;B<=40;B++)if(_(w,B)<=l.getCapacity(B,v,e.MIXED))return B}l.from=function(v,B){return n.isValid(v)?parseInt(v,10):B},l.getCapacity=function(v,B,N){if(!n.isValid(v))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=e.BYTE);const Y=a.getSymbolTotalCodewords(v),q=i.getTotalCodewordsCount(v,B),F=(Y-q)*8;if(N===e.MIXED)return F;const E=F-p(N,v);switch(N){case e.NUMERIC:return Math.floor(E/10*3);case e.ALPHANUMERIC:return Math.floor(E/11*2);case e.KANJI:return Math.floor(E/13);case e.BYTE:default:return Math.floor(E/8)}},l.getBestVersionForData=function(v,B){let N;const Y=t.from(B,t.M);if(Array.isArray(v)){if(v.length>1)return M(v,Y);if(v.length===0)return 1;N=v[0]}else N=v;return d(N.mode,N.getLength(),Y)},l.getEncodedBits=function(v){if(!n.isValid(v)||v<7)throw new Error("Invalid QR Code version");let B=v<<12;for(;a.getBCHDigit(B)-c>=0;)B^=o<<a.getBCHDigit(B)-c;return v<<12|B}})(vt)),vt}var bt={},Xt;function kr(){if(Xt)return bt;Xt=1;const l=ve(),a=1335,i=21522,t=l.getBCHDigit(a);return bt.getEncodedBits=function(n,o){const c=n.bit<<3|o;let d=c<<10;for(;l.getBCHDigit(d)-t>=0;)d^=a<<l.getBCHDigit(d)-t;return(c<<10|d)^i},bt}var wt={},xt,en;function Er(){if(en)return xt;en=1;const l=ye();function a(i){this.mode=l.NUMERIC,this.data=i.toString()}return a.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(t){let e,n,o;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),o=parseInt(n,10),t.put(o,10);const c=this.data.length-e;c>0&&(n=this.data.substr(e),o=parseInt(n,10),t.put(o,c*3+1))},xt=a,xt}var St,tn;function Br(){if(tn)return St;tn=1;const l=ye(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=l.ALPHANUMERIC,this.data=t}return i.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let o=a.indexOf(this.data[n])*45;o+=a.indexOf(this.data[n+1]),e.put(o,11)}this.data.length%2&&e.put(a.indexOf(this.data[n]),6)},St=i,St}var Ct,nn;function Ir(){if(nn)return Ct;nn=1;const l=ye();function a(i){this.mode=l.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return a.getBitsLength=function(t){return t*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){for(let t=0,e=this.data.length;t<e;t++)i.put(this.data[t],8)},Ct=a,Ct}var kt,sn;function Rr(){if(sn)return kt;sn=1;const l=ye(),a=ve();function i(t){this.mode=l.KANJI,this.data=t}return i.getBitsLength=function(e){return e*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=a.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}},kt=i,kt}var Et={exports:{}},an;function Tr(){return an||(an=1,(function(l){var a={single_source_shortest_paths:function(i,t,e){var n={},o={};o[t]=0;var c=a.PriorityQueue.make();c.push(t,0);for(var d,p,_,M,w,v,B,N,Y;!c.empty();){d=c.pop(),p=d.value,M=d.cost,w=i[p]||{};for(_ in w)w.hasOwnProperty(_)&&(v=w[_],B=M+v,N=o[_],Y=typeof o[_]>"u",(Y||N>B)&&(o[_]=B,c.push(_,B),n[_]=p))}if(typeof e<"u"&&typeof o[e]>"u"){var q=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(q)}return n},extract_shortest_path_from_predecessor_list:function(i,t){for(var e=[],n=t;n;)e.push(n),i[n],n=i[n];return e.reverse(),e},find_path:function(i,t,e){var n=a.single_source_shortest_paths(i,t,e);return a.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(i){var t=a.PriorityQueue,e={},n;i=i||{};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e.queue=[],e.sorter=i.sorter||t.default_sorter,e},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){var e={value:i,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};l.exports=a})(Et)),Et.exports}var rn;function Mr(){return rn||(rn=1,(function(l){const a=ye(),i=Er(),t=Br(),e=Ir(),n=Rr(),o=_n(),c=ve(),d=Tr();function p(q){return unescape(encodeURIComponent(q)).length}function _(q,F,E){const P=[];let H;for(;(H=q.exec(E))!==null;)P.push({data:H[0],index:H.index,mode:F,length:H[0].length});return P}function M(q){const F=_(o.NUMERIC,a.NUMERIC,q),E=_(o.ALPHANUMERIC,a.ALPHANUMERIC,q);let P,H;return c.isKanjiModeEnabled()?(P=_(o.BYTE,a.BYTE,q),H=_(o.KANJI,a.KANJI,q)):(P=_(o.BYTE_KANJI,a.BYTE,q),H=[]),F.concat(E,P,H).sort(function(C,x){return C.index-x.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function w(q,F){switch(F){case a.NUMERIC:return i.getBitsLength(q);case a.ALPHANUMERIC:return t.getBitsLength(q);case a.KANJI:return n.getBitsLength(q);case a.BYTE:return e.getBitsLength(q)}}function v(q){return q.reduce(function(F,E){const P=F.length-1>=0?F[F.length-1]:null;return P&&P.mode===E.mode?(F[F.length-1].data+=E.data,F):(F.push(E),F)},[])}function B(q){const F=[];for(let E=0;E<q.length;E++){const P=q[E];switch(P.mode){case a.NUMERIC:F.push([P,{data:P.data,mode:a.ALPHANUMERIC,length:P.length},{data:P.data,mode:a.BYTE,length:P.length}]);break;case a.ALPHANUMERIC:F.push([P,{data:P.data,mode:a.BYTE,length:P.length}]);break;case a.KANJI:F.push([P,{data:P.data,mode:a.BYTE,length:p(P.data)}]);break;case a.BYTE:F.push([{data:P.data,mode:a.BYTE,length:p(P.data)}])}}return F}function N(q,F){const E={},P={start:{}};let H=["start"];for(let b=0;b<q.length;b++){const C=q[b],x=[];for(let y=0;y<C.length;y++){const D=C[y],I=""+b+y;x.push(I),E[I]={node:D,lastCount:0},P[I]={};for(let A=0;A<H.length;A++){const S=H[A];E[S]&&E[S].node.mode===D.mode?(P[S][I]=w(E[S].lastCount+D.length,D.mode)-w(E[S].lastCount,D.mode),E[S].lastCount+=D.length):(E[S]&&(E[S].lastCount=D.length),P[S][I]=w(D.length,D.mode)+4+a.getCharCountIndicator(D.mode,F))}}H=x}for(let b=0;b<H.length;b++)P[H[b]].end=0;return{map:P,table:E}}function Y(q,F){let E;const P=a.getBestModeForData(q);if(E=a.from(F,P),E!==a.BYTE&&E.bit<P.bit)throw new Error('"'+q+'" cannot be encoded with mode '+a.toString(E)+`.
 Suggested mode is: `+a.toString(P));switch(E===a.KANJI&&!c.isKanjiModeEnabled()&&(E=a.BYTE),E){case a.NUMERIC:return new i(q);case a.ALPHANUMERIC:return new t(q);case a.KANJI:return new n(q);case a.BYTE:return new e(q)}}l.fromArray=function(F){return F.reduce(function(E,P){return typeof P=="string"?E.push(Y(P,null)):P.data&&E.push(Y(P.data,P.mode)),E},[])},l.fromString=function(F,E){const P=M(F,c.isKanjiModeEnabled()),H=B(P),b=N(H,E),C=d.find_path(b.map,"start","end"),x=[];for(let y=1;y<C.length-1;y++)x.push(b.table[C[y]].node);return l.fromArray(v(x))},l.rawSplit=function(F){return l.fromArray(M(F,c.isKanjiModeEnabled()))}})(wt)),wt}var on;function Nr(){if(on)return it;on=1;const l=ve(),a=Mt(),i=pr(),t=vr(),e=yr(),n=_r(),o=br(),c=vn(),d=Sr(),p=Cr(),_=kr(),M=ye(),w=Mr();function v(b,C){const x=b.size,y=n.getPositions(C);for(let D=0;D<y.length;D++){const I=y[D][0],A=y[D][1];for(let S=-1;S<=7;S++)if(!(I+S<=-1||x<=I+S))for(let L=-1;L<=7;L++)A+L<=-1||x<=A+L||(S>=0&&S<=6&&(L===0||L===6)||L>=0&&L<=6&&(S===0||S===6)||S>=2&&S<=4&&L>=2&&L<=4?b.set(I+S,A+L,!0,!0):b.set(I+S,A+L,!1,!0))}}function B(b){const C=b.size;for(let x=8;x<C-8;x++){const y=x%2===0;b.set(x,6,y,!0),b.set(6,x,y,!0)}}function N(b,C){const x=e.getPositions(C);for(let y=0;y<x.length;y++){const D=x[y][0],I=x[y][1];for(let A=-2;A<=2;A++)for(let S=-2;S<=2;S++)A===-2||A===2||S===-2||S===2||A===0&&S===0?b.set(D+A,I+S,!0,!0):b.set(D+A,I+S,!1,!0)}}function Y(b,C){const x=b.size,y=p.getEncodedBits(C);let D,I,A;for(let S=0;S<18;S++)D=Math.floor(S/3),I=S%3+x-8-3,A=(y>>S&1)===1,b.set(D,I,A,!0),b.set(I,D,A,!0)}function q(b,C,x){const y=b.size,D=_.getEncodedBits(C,x);let I,A;for(I=0;I<15;I++)A=(D>>I&1)===1,I<6?b.set(I,8,A,!0):I<8?b.set(I+1,8,A,!0):b.set(y-15+I,8,A,!0),I<8?b.set(8,y-I-1,A,!0):I<9?b.set(8,15-I-1+1,A,!0):b.set(8,15-I-1,A,!0);b.set(y-8,8,1,!0)}function F(b,C){const x=b.size;let y=-1,D=x-1,I=7,A=0;for(let S=x-1;S>0;S-=2)for(S===6&&S--;;){for(let L=0;L<2;L++)if(!b.isReserved(D,S-L)){let re=!1;A<C.length&&(re=(C[A]>>>I&1)===1),b.set(D,S-L,re),I--,I===-1&&(A++,I=7)}if(D+=y,D<0||x<=D){D-=y,y=-y;break}}}function E(b,C,x){const y=new i;x.forEach(function(L){y.put(L.mode.bit,4),y.put(L.getLength(),M.getCharCountIndicator(L.mode,b)),L.write(y)});const D=l.getSymbolTotalCodewords(b),I=c.getTotalCodewordsCount(b,C),A=(D-I)*8;for(y.getLengthInBits()+4<=A&&y.put(0,4);y.getLengthInBits()%8!==0;)y.putBit(0);const S=(A-y.getLengthInBits())/8;for(let L=0;L<S;L++)y.put(L%2?17:236,8);return P(y,b,C)}function P(b,C,x){const y=l.getSymbolTotalCodewords(C),D=c.getTotalCodewordsCount(C,x),I=y-D,A=c.getBlocksCount(C,x),S=y%A,L=A-S,re=Math.floor(y/A),me=Math.floor(I/A),Xe=me+1,De=re-me,ue=new d(De);let ke=0;const _e=new Array(A),ge=new Array(A);let Ee=0;const Le=new Uint8Array(b.buffer);for(let de=0;de<A;de++){const Ie=de<L?me:Xe;_e[de]=Le.slice(ke,ke+Ie),ge[de]=ue.encode(_e[de]),ke+=Ie,Ee=Math.max(Ee,Ie)}const Be=new Uint8Array(y);let qe=0,ne,se;for(ne=0;ne<Ee;ne++)for(se=0;se<A;se++)ne<_e[se].length&&(Be[qe++]=_e[se][ne]);for(ne=0;ne<De;ne++)for(se=0;se<A;se++)Be[qe++]=ge[se][ne];return Be}function H(b,C,x,y){let D;if(Array.isArray(b))D=w.fromArray(b);else if(typeof b=="string"){let re=C;if(!re){const me=w.rawSplit(b);re=p.getBestVersionForData(me,x)}D=w.fromString(b,re||40)}else throw new Error("Invalid data");const I=p.getBestVersionForData(D,x);if(!I)throw new Error("The amount of data is too big to be stored in a QR Code");if(!C)C=I;else if(C<I)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+I+`.
`);const A=E(C,x,D),S=l.getSymbolSize(C),L=new t(S);return v(L,C),B(L),N(L,C),q(L,x,0),C>=7&&Y(L,C),F(L,A),isNaN(y)&&(y=o.getBestMask(L,q.bind(null,L,x))),o.applyMask(y,L),q(L,x,y),{modules:L,version:C,errorCorrectionLevel:x,maskPattern:y,segments:D}}return it.create=function(C,x){if(typeof C>"u"||C==="")throw new Error("No input text");let y=a.M,D,I;return typeof x<"u"&&(y=a.from(x.errorCorrectionLevel,a.M),D=p.from(x.version),I=o.from(x.maskPattern),x.toSJISFunc&&l.setToSJISFunction(x.toSJISFunc)),H(C,D,y,I)},it}var Bt={},It={},ln;function bn(){return ln||(ln=1,(function(l){function a(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+i);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(n){return[n,n]}))),t.length===6&&t.push("F","F");const e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}l.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:n,scale:n?4:o,margin:e,color:{dark:a(t.color.dark||"#000000ff"),light:a(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},l.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale},l.getImageWidth=function(t,e){const n=l.getScale(t,e);return Math.floor((t+e.margin*2)*n)},l.qrToImageData=function(t,e,n){const o=e.modules.size,c=e.modules.data,d=l.getScale(o,n),p=Math.floor((o+n.margin*2)*d),_=n.margin*d,M=[n.color.light,n.color.dark];for(let w=0;w<p;w++)for(let v=0;v<p;v++){let B=(w*p+v)*4,N=n.color.light;if(w>=_&&v>=_&&w<p-_&&v<p-_){const Y=Math.floor((w-_)/d),q=Math.floor((v-_)/d);N=M[c[Y*o+q]?1:0]}t[B++]=N.r,t[B++]=N.g,t[B++]=N.b,t[B]=N.a}}})(It)),It}var un;function Pr(){return un||(un=1,(function(l){const a=bn();function i(e,n,o){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=o,n.width=o,n.style.height=o+"px",n.style.width=o+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}l.render=function(n,o,c){let d=c,p=o;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),o||(p=t()),d=a.getOptions(d);const _=a.getImageWidth(n.modules.size,d),M=p.getContext("2d"),w=M.createImageData(_,_);return a.qrToImageData(w.data,n,d),i(M,p,_),M.putImageData(w,0,0),p},l.renderToDataURL=function(n,o,c){let d=c;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),d||(d={});const p=l.render(n,o,d),_=d.type||"image/png",M=d.rendererOpts||{};return p.toDataURL(_,M.quality)}})(Bt)),Bt}var Rt={},dn;function Ar(){if(dn)return Rt;dn=1;const l=bn();function a(e,n){const o=e.a/255,c=n+'="'+e.hex+'"';return o<1?c+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function i(e,n,o){let c=e+n;return typeof o<"u"&&(c+=" "+o),c}function t(e,n,o){let c="",d=0,p=!1,_=0;for(let M=0;M<e.length;M++){const w=Math.floor(M%n),v=Math.floor(M/n);!w&&!p&&(p=!0),e[M]?(_++,M>0&&w>0&&e[M-1]||(c+=p?i("M",w+o,.5+v+o):i("m",d,0),d=0,p=!1),w+1<n&&e[M+1]||(c+=i("h",_),_=0)):d++}return c}return Rt.render=function(n,o,c){const d=l.getOptions(o),p=n.modules.size,_=n.modules.data,M=p+d.margin*2,w=d.color.light.a?"<path "+a(d.color.light,"fill")+' d="M0 0h'+M+"v"+M+'H0z"/>':"",v="<path "+a(d.color.dark,"stroke")+' d="'+t(_,p,d.margin)+'"/>',B='viewBox="0 0 '+M+" "+M+'"',Y='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+B+' shape-rendering="crispEdges">'+w+v+`</svg>
`;return typeof c=="function"&&c(null,Y),Y},Rt}var cn;function Dr(){if(cn)return Se;cn=1;const l=hr(),a=Nr(),i=Pr(),t=Ar();function e(n,o,c,d,p){const _=[].slice.call(arguments,1),M=_.length,w=typeof _[M-1]=="function";if(!w&&!l())throw new Error("Callback required as last argument");if(w){if(M<2)throw new Error("Too few arguments provided");M===2?(p=c,c=o,o=d=void 0):M===3&&(o.getContext&&typeof p>"u"?(p=d,d=void 0):(p=d,d=c,c=o,o=void 0))}else{if(M<1)throw new Error("Too few arguments provided");return M===1?(c=o,o=d=void 0):M===2&&!o.getContext&&(d=c,c=o,o=void 0),new Promise(function(v,B){try{const N=a.create(c,d);v(n(N,o,d))}catch(N){B(N)}})}try{const v=a.create(c,d);p(null,n(v,o,d))}catch(v){p(v)}}return Se.create=a.create,Se.toCanvas=e.bind(null,i.render),Se.toDataURL=e.bind(null,i.renderToDataURL),Se.toString=e.bind(null,function(n,o,c){return t.render(n,c)}),Se}var Lr=Dr();const oo=Dn(Lr);export{so as E,ro as Q,ao as S,os as _,ls as a,ot as b,rt as c,He as d,Je as e,oo as f};
