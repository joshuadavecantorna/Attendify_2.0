import{F as P,_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as W,u as U,r as z,a as D,o as y,b as a,e,h as G,w as l,f as n,i as d,F as $,g as j,j as B,t as v}from"./app-DW-4G1vZ.js";import{_ as w,b as F,c as R,d as T,a as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as b}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as C,a as E,b as k,c as V,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqZ9_JK4.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-DnmVy0AL.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-PYw3eRzO.js";import{C as O}from"./calendar-hrTOBv_O.js";import{D as I}from"./download-r_jayyTT.js";import"./useForwardExpose-CYdwRePy.js";import"./users-BhZaHBdP.js";import"./RovingFocusGroup-Dsi-dyvh.js";import"./check-DCQm1Fl6.js";const H={class:"container mx-auto p-6 space-y-6"},J={class:"grid gap-6 md:grid-cols-2"},K={class:"grid gap-2"},X={class:"grid gap-2"},Y={class:"grid gap-4 md:grid-cols-3"},Z={class:"text-center"},h={class:"text-center"},tt={class:"text-center"},ct=W({__name:"ExportReports",props:{teacher:{},classes:{}},setup(et){const N=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Reports",href:"/teacher/reports"},{title:"Export Reports",href:"/teacher/reports/export"}],i=U({class_id:"all",start_date:"",end_date:"",format:"csv",export_type:"attendance"}),_=U({class_id:"",format:"csv",export_type:"students"}),r=z(!1),L=()=>{var c;if(r.value)return;r.value=!0;const o=document.createElement("form");o.method="POST",o.action="/teacher/reports/export-data",o.style.display="none";const t=(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content");if(t){const u=document.createElement("input");u.type="hidden",u.name="_token",u.value=t,o.appendChild(u)}const s={export_type:i.export_type,format:i.format,class_id:i.class_id==="all"?"":i.class_id,start_date:i.start_date,end_date:i.end_date};Object.entries(s).forEach(([u,m])=>{if(m){const f=document.createElement("input");f.type="hidden",f.name=u,f.value=m.toString(),o.appendChild(f)}}),document.body.appendChild(o),o.submit(),document.body.removeChild(o),r.value=!1},Q=()=>{var c;if(r.value)return;if(!_.class_id){alert("Please select a class first.");return}r.value=!0;const o=document.createElement("form");o.method="POST",o.action="/teacher/reports/export-data",o.style.display="none";const t=(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content");if(t){const u=document.createElement("input");u.type="hidden",u.name="_token",u.value=t,o.appendChild(u)}const s={export_type:_.export_type,format:_.format,class_id:_.class_id};Object.entries(s).forEach(([u,m])=>{if(m){const f=document.createElement("input");f.type="hidden",f.name=u,f.value=m.toString(),o.appendChild(f)}}),document.body.appendChild(o),o.submit(),document.body.removeChild(o),r.value=!1},S=o=>{var u;if(r.value)return;r.value=!0;const t=document.createElement("form");t.method="POST",t.action="/teacher/reports/export-data",t.style.display="none";const s=(u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content");if(s){const m=document.createElement("input");m.type="hidden",m.name="_token",m.value=s,t.appendChild(m)}Object.entries({export_type:o,format:"csv",class_id:""}).forEach(([m,f])=>{if(f){const g=document.createElement("input");g.type="hidden",g.name=m,g.value=f.toString(),t.appendChild(g)}}),document.body.appendChild(t),t.submit(),document.body.removeChild(t),setTimeout(()=>{r.value=!1},2e3)};return(o,t)=>(y(),D($,null,[a(e(G),{title:"Export Reports"}),a(M,{breadcrumbs:N},{default:l(()=>[n("div",H,[t[34]||(t[34]=n("div",{class:"space-y-2"},[n("h1",{class:"text-3xl font-bold tracking-tight"},"Export Reports"),n("p",{class:"text-muted-foreground"}," Download detailed reports in various formats ")],-1)),n("div",J,[a(e(w),null,{default:l(()=>[a(e(F),null,{default:l(()=>[a(e(R),{class:"flex items-center gap-2"},{default:l(()=>[a(e(O),{class:"h-5 w-5"}),t[9]||(t[9]=d(" Attendance Reports ",-1))]),_:1,__:[9]}),a(e(T),null,{default:l(()=>t[10]||(t[10]=[d(" Export detailed attendance data for your classes ",-1)])),_:1,__:[10]})]),_:1}),a(e(A),{class:"space-y-4"},{default:l(()=>[n("div",null,[a(e(x),{for:"class-select"},{default:l(()=>t[11]||(t[11]=[d("Class (Optional)",-1)])),_:1,__:[11]}),a(e(C),{modelValue:e(i).class_id,"onUpdate:modelValue":t[0]||(t[0]=s=>e(i).class_id=s)},{default:l(()=>[a(e(E),null,{default:l(()=>[a(e(k),{placeholder:"All Classes"})]),_:1}),a(e(V),null,{default:l(()=>[a(e(p),{value:"all"},{default:l(()=>t[12]||(t[12]=[d("All Classes",-1)])),_:1,__:[12]}),(y(!0),D($,null,j(o.classes,s=>(y(),B(e(p),{key:s.id,value:s.id.toString()},{default:l(()=>[d(v(s.name)+" ("+v(s.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",K,[a(e(x),{for:"start-date"},{default:l(()=>t[13]||(t[13]=[d("Start Date",-1)])),_:1,__:[13]}),a(e(q),{id:"start-date",type:"date",modelValue:e(i).start_date,"onUpdate:modelValue":t[1]||(t[1]=s=>e(i).start_date=s)},null,8,["modelValue"])]),n("div",X,[a(e(x),{for:"end-date"},{default:l(()=>t[14]||(t[14]=[d("End Date",-1)])),_:1,__:[14]}),a(e(q),{id:"end-date",type:"date",modelValue:e(i).end_date,"onUpdate:modelValue":t[2]||(t[2]=s=>e(i).end_date=s)},null,8,["modelValue"])]),n("div",null,[a(e(x),{for:"format-select"},{default:l(()=>t[15]||(t[15]=[d("Format",-1)])),_:1,__:[15]}),a(e(C),{modelValue:e(i).format,"onUpdate:modelValue":t[3]||(t[3]=s=>e(i).format=s)},{default:l(()=>[a(e(E),null,{default:l(()=>[a(e(k))]),_:1}),a(e(V),null,{default:l(()=>[a(e(p),{value:"csv"},{default:l(()=>t[16]||(t[16]=[d("CSV",-1)])),_:1,__:[16]}),a(e(p),{value:"xlsx"},{default:l(()=>t[17]||(t[17]=[d("Excel",-1)])),_:1,__:[17]}),a(e(p),{value:"pdf"},{default:l(()=>t[18]||(t[18]=[d("PDF",-1)])),_:1,__:[18]})]),_:1})]),_:1},8,["modelValue"])]),a(e(b),{onClick:L,class:"w-full",disabled:r.value},{default:l(()=>[a(e(I),{class:"h-4 w-4 mr-2"}),d(" "+v(r.value?"Exporting...":"Export Attendance Data"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),a(e(w),null,{default:l(()=>[a(e(F),null,{default:l(()=>[a(e(R),{class:"flex items-center gap-2"},{default:l(()=>[a(e(P),{class:"h-5 w-5"}),t[19]||(t[19]=d(" Student Reports ",-1))]),_:1,__:[19]}),a(e(T),null,{default:l(()=>t[20]||(t[20]=[d(" Export individual student performance data ",-1)])),_:1,__:[20]})]),_:1}),a(e(A),{class:"space-y-4"},{default:l(()=>[n("div",null,[a(e(x),{for:"student-class-select"},{default:l(()=>t[21]||(t[21]=[d("Class",-1)])),_:1,__:[21]}),a(e(C),{modelValue:e(_).class_id,"onUpdate:modelValue":t[4]||(t[4]=s=>e(_).class_id=s)},{default:l(()=>[a(e(E),null,{default:l(()=>[a(e(k),{placeholder:"Select a class"})]),_:1}),a(e(V),null,{default:l(()=>[(y(!0),D($,null,j(o.classes,s=>(y(),B(e(p),{key:s.id,value:s.id.toString()},{default:l(()=>[d(v(s.name)+" ("+v(s.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",null,[a(e(x),{for:"student-format-select"},{default:l(()=>t[22]||(t[22]=[d("Format",-1)])),_:1,__:[22]}),a(e(C),{modelValue:e(_).format,"onUpdate:modelValue":t[5]||(t[5]=s=>e(_).format=s)},{default:l(()=>[a(e(E),null,{default:l(()=>[a(e(k))]),_:1}),a(e(V),null,{default:l(()=>[a(e(p),{value:"csv"},{default:l(()=>t[23]||(t[23]=[d("CSV",-1)])),_:1,__:[23]}),a(e(p),{value:"xlsx"},{default:l(()=>t[24]||(t[24]=[d("Excel",-1)])),_:1,__:[24]}),a(e(p),{value:"pdf"},{default:l(()=>t[25]||(t[25]=[d("PDF",-1)])),_:1,__:[25]})]),_:1})]),_:1},8,["modelValue"])]),a(e(b),{onClick:Q,class:"w-full",variant:"outline",disabled:r.value},{default:l(()=>[a(e(I),{class:"h-4 w-4 mr-2"}),d(" "+v(r.value?"Exporting...":"Export Student Data"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),a(e(w),null,{default:l(()=>[a(e(F),null,{default:l(()=>[a(e(R),null,{default:l(()=>t[26]||(t[26]=[d("Quick Export Options",-1)])),_:1,__:[26]}),a(e(T),null,{default:l(()=>t[27]||(t[27]=[d(" Pre-configured export templates for common reports ",-1)])),_:1,__:[27]})]),_:1}),a(e(A),null,{default:l(()=>[n("div",Y,[a(e(b),{onClick:t[6]||(t[6]=s=>S("weekly")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",Z,[a(e(O),{class:"h-8 w-8 mx-auto mb-2"}),t[28]||(t[28]=n("div",{class:"font-medium"},"Weekly Report",-1)),t[29]||(t[29]=n("div",{class:"text-sm text-muted-foreground"},"Last 7 days attendance",-1))])]),_:1},8,["disabled"]),a(e(b),{onClick:t[7]||(t[7]=s=>S("monthly")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",h,[a(e(O),{class:"h-8 w-8 mx-auto mb-2"}),t[30]||(t[30]=n("div",{class:"font-medium"},"Monthly Report",-1)),t[31]||(t[31]=n("div",{class:"text-sm text-muted-foreground"},"Current month summary",-1))])]),_:1},8,["disabled"]),a(e(b),{onClick:t[8]||(t[8]=s=>S("semester")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",tt,[a(e(P),{class:"h-8 w-8 mx-auto mb-2"}),t[32]||(t[32]=n("div",{class:"font-medium"},"Semester Report",-1)),t[33]||(t[33]=n("div",{class:"text-sm text-muted-foreground"},"Complete semester data",-1))])]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})],64))}});export{ct as default};
