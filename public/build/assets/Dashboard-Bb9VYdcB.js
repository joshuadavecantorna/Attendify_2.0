import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-BS7ImaE2.js";import{d as P,r as v,s as O,E as G,c as w,a as x,o as p,b as s,e as l,h as H,w as a,f as e,k as y,t as r,i as d,F as k,g as z,j as Q,A as D,G as h}from"./app-DW-4G1vZ.js";import{_ as i,b as u,c as f,a as m,d as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-BcDEr4TB.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-T0P3N6mj.js";import{_ as q}from"./index-r1g3ib2J.js";import{_ as V}from"./Separator.vue_vue_type_script_setup_true_lang-B2_Pp7m9.js";import"./useForwardExpose-CYdwRePy.js";import"./users-BhZaHBdP.js";import"./RovingFocusGroup-Dsi-dyvh.js";const J={class:"container mx-auto p-6 space-y-6"},K={class:"space-y-2"},X={class:"text-3xl font-bold tracking-tight"},Y={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Z={class:"text-2xl font-bold"},tt={class:"text-2xl font-bold"},et={class:"text-2xl font-bold"},st={class:"text-2xl font-bold"},lt={key:0,class:"grid gap-4 md:grid-cols-4"},at={class:"text-2xl font-bold text-green-600"},nt={class:"text-2xl font-bold text-yellow-600"},ot={class:"text-2xl font-bold text-red-600"},dt={class:"text-2xl font-bold text-blue-600"},rt={class:"grid gap-6 md:grid-cols-7"},it={class:"space-y-6 md:col-span-3"},ut={class:"space-y-4"},ft={class:"flex items-start gap-3"},mt={key:0},_t={key:1},pt={key:2},xt={class:"flex-1 space-y-1"},ct={class:"text-sm font-medium leading-none"},vt={class:"text-sm text-muted-foreground"},yt={class:"md:col-span-4"},bt={class:"flex items-center justify-between"},gt={class:"flex gap-2"},wt={class:"space-y-4"},kt={class:"flex items-center justify-between text-sm"},At={class:"font-medium w-12"},$t={class:"text-muted-foreground text-xs"},jt={class:"flex gap-1 h-10 rounded-md overflow-hidden border"},Ft=P({__name:"Dashboard",props:{teacher:{},stats:{},recentActivity:{}},setup(E){const b=E,j=v(b.stats),S=v(b.recentActivity||[]),F=v(new Date().toISOString()),A=v(!1),g=v(null),M=async()=>{if(!A.value)try{A.value=!0;const o=await h.get("/teacher/dashboard/api");o.data.success&&(j.value=o.data.data.stats,S.value=o.data.data.recentActivity||[],F.value=o.data.data.timestamp)}catch(o){console.error("Failed to fetch real-time data:",o)}finally{A.value=!1}},L=()=>{g.value=setInterval(M,1e4),M()},N=()=>{g.value&&(clearInterval(g.value),g.value=null)},U=[{title:"Teacher Dashboard",href:"/teacher/dashboard"}];O(()=>{L()}),G(()=>{N()});const W=w(()=>`${b.teacher.first_name} ${b.teacher.last_name}`),_=w(()=>j.value),T=w(()=>S.value),B=w(()=>{const o=_.value.totalStudents,t=_.value.weeklyAttendanceRate/100;return[{day:"Mon",present:Math.floor(o*t*.9),absent:Math.floor(o*(1-t*.9))},{day:"Tue",present:Math.floor(o*t*.95),absent:Math.floor(o*(1-t*.95))},{day:"Wed",present:Math.floor(o*t*.88),absent:Math.floor(o*(1-t*.88))},{day:"Thu",present:Math.floor(o*t*.92),absent:Math.floor(o*(1-t*.92))},{day:"Fri",present:Math.floor(o*t*.85),absent:Math.floor(o*(1-t*.85))}]});return(o,t)=>(p(),x(k,null,[s(l(H),{title:"Teacher Dashboard"}),s(I,{breadcrumbs:U},{default:a(()=>[e("div",J,[e("div",K,[e("h1",X,"Welcome back, "+r(W.value),1),t[4]||(t[4]=e("p",{class:"text-muted-foreground"}," Here's what's happening with your classes today ",-1))]),e("div",Y,[s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[5]||(t[5]=[d("Total Classes",-1)])),_:1,__:[5]}),t[6]||(t[6]=e("span",{class:"text-xl"},"üìö",-1))]),_:1,__:[6]}),s(l(m),null,{default:a(()=>[e("div",Z,r(_.value.totalClasses),1),t[7]||(t[7]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Active classes ",-1))]),_:1,__:[7]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[8]||(t[8]=[d("Total Students",-1)])),_:1,__:[8]}),t[9]||(t[9]=e("span",{class:"text-xl"},"üë•",-1))]),_:1,__:[9]}),s(l(m),null,{default:a(()=>[e("div",tt,r(_.value.totalStudents),1),t[10]||(t[10]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Across all classes ",-1))]),_:1,__:[10]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[11]||(t[11]=[d("Today's Sessions",-1)])),_:1,__:[11]}),t[12]||(t[12]=e("span",{class:"text-xl"},"üìÖ",-1))]),_:1,__:[12]}),s(l(m),null,{default:a(()=>[e("div",et,r(_.value.todaySessions),1),t[13]||(t[13]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Attendance sessions ",-1))]),_:1,__:[13]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[14]||(t[14]=[d("Weekly Rate",-1)])),_:1,__:[14]}),t[15]||(t[15]=e("span",{class:"text-xl"},"üìä",-1))]),_:1,__:[15]}),s(l(m),null,{default:a(()=>[e("div",st,r(_.value.weeklyAttendanceRate)+"%",1),t[16]||(t[16]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Attendance rate ",-1))]),_:1,__:[16]})]),_:1})]),o.stats.todayPresent>0||o.stats.todayAbsent>0||o.stats.todayLate>0||o.stats.todayExcused>0?(p(),x("div",lt,[s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[17]||(t[17]=[d("Present Today",-1)])),_:1,__:[17]}),t[18]||(t[18]=e("span",{class:"text-xl"},"‚úÖ",-1))]),_:1,__:[18]}),s(l(m),null,{default:a(()=>[e("div",at,r(_.value.todayPresent),1),t[19]||(t[19]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Students marked present ",-1))]),_:1,__:[19]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[20]||(t[20]=[d("Late Today",-1)])),_:1,__:[20]}),t[21]||(t[21]=e("span",{class:"text-xl"},"‚è∞",-1))]),_:1,__:[21]}),s(l(m),null,{default:a(()=>[e("div",nt,r(_.value.todayLate),1),t[22]||(t[22]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Students marked late ",-1))]),_:1,__:[22]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[23]||(t[23]=[d("Absent Today",-1)])),_:1,__:[23]}),t[24]||(t[24]=e("span",{class:"text-xl"},"‚ùå",-1))]),_:1,__:[24]}),s(l(m),null,{default:a(()=>[e("div",ot,r(_.value.todayAbsent),1),t[25]||(t[25]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Students marked absent ",-1))]),_:1,__:[25]})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(l(f),{class:"text-sm font-medium"},{default:a(()=>t[26]||(t[26]=[d("Excused Today",-1)])),_:1,__:[26]}),t[27]||(t[27]=e("span",{class:"text-xl"},"ÔøΩ",-1))]),_:1,__:[27]}),s(l(m),null,{default:a(()=>[e("div",dt,r(_.value.todayExcused),1),t[28]||(t[28]=e("p",{class:"text-xs text-muted-foreground mt-1"}," Students excused ",-1))]),_:1,__:[28]})]),_:1})])):y("",!0),e("div",rt,[e("div",it,[s(l(i),null,{default:a(()=>[s(l(u),null,{default:a(()=>[s(l(f),null,{default:a(()=>t[29]||(t[29]=[d("Quick Actions",-1)])),_:1,__:[29]}),s(l($),null,{default:a(()=>t[30]||(t[30]=[d("Common tasks and shortcuts",-1)])),_:1,__:[30]})]),_:1}),s(l(m),{class:"space-y-2"},{default:a(()=>[s(l(c),{variant:"outline",class:"w-full justify-start",size:"lg",onClick:t[0]||(t[0]=n=>o.$inertia.visit("/teacher/classes"))},{default:a(()=>t[31]||(t[31]=[e("span",{class:"mr-2"},"‚ûï",-1),d(" Manage Classes ",-1)])),_:1,__:[31]}),s(l(c),{variant:"outline",class:"w-full justify-start",size:"lg",onClick:t[1]||(t[1]=n=>o.$inertia.visit("/teacher/attendance"))},{default:a(()=>t[32]||(t[32]=[e("span",{class:"mr-2"},"üìù",-1),d(" Manage Attendance ",-1)])),_:1,__:[32]}),s(l(c),{variant:"outline",class:"w-full justify-start",size:"lg",onClick:t[2]||(t[2]=n=>o.$inertia.visit("/teacher/reports"))},{default:a(()=>t[33]||(t[33]=[e("span",{class:"mr-2"},"üìä",-1),d(" View Reports ",-1)])),_:1,__:[33]}),s(l(c),{variant:"outline",class:"w-full justify-start",size:"lg",onClick:t[3]||(t[3]=n=>o.$inertia.visit("/teacher/files/all"))},{default:a(()=>t[34]||(t[34]=[e("span",{class:"mr-2"},"üìÅ",-1),d(" View All Files ",-1)])),_:1,__:[34]})]),_:1})]),_:1}),s(l(i),null,{default:a(()=>[s(l(u),null,{default:a(()=>[s(l(f),null,{default:a(()=>t[35]||(t[35]=[d("Recent Activity",-1)])),_:1,__:[35]}),s(l($),null,{default:a(()=>t[36]||(t[36]=[d("Latest updates from your classes",-1)])),_:1,__:[36]})]),_:1}),s(l(m),null,{default:a(()=>[e("div",ut,[(p(!0),x(k,null,z(T.value,(n,C)=>{var R;return p(),x(k,{key:C},[e("div",ft,[s(l(q),{variant:n.type==="info"?"default":n.type==="warning"?"outline":"secondary",class:"mt-1"},{default:a(()=>[n.type==="info"?(p(),x("span",mt,"‚ÑπÔ∏è")):y("",!0),n.type==="warning"?(p(),x("span",_t,"‚ö†Ô∏è")):y("",!0),n.type==="success"?(p(),x("span",pt,"‚úì")):y("",!0)]),_:2},1032,["variant"]),e("div",xt,[e("p",ct,r(n.text),1),e("p",vt,r(n.time),1)])]),C<(((R=T.value)==null?void 0:R.length)||0)-1?(p(),Q(l(V),{key:0})):y("",!0)],64)}),128))])]),_:1})]),_:1})]),e("div",yt,[s(l(i),null,{default:a(()=>[s(l(u),null,{default:a(()=>[e("div",bt,[e("div",null,[s(l(f),null,{default:a(()=>t[37]||(t[37]=[d("Weekly Attendance Overview",-1)])),_:1,__:[37]}),s(l($),null,{default:a(()=>t[38]||(t[38]=[d("Attendance statistics for this week",-1)])),_:1,__:[38]})]),e("div",gt,[s(l(c),{variant:"default",size:"sm"},{default:a(()=>t[39]||(t[39]=[d("Week",-1)])),_:1,__:[39]}),s(l(c),{variant:"outline",size:"sm"},{default:a(()=>t[40]||(t[40]=[d("Month",-1)])),_:1,__:[40]})])])]),_:1}),s(l(m),null,{default:a(()=>[e("div",wt,[(p(!0),x(k,null,z(B.value,n=>(p(),x("div",{key:n.day,class:"space-y-2"},[e("div",kt,[e("span",At,r(n.day),1),e("span",$t,r(n.present)+" present ¬∑ "+r(n.absent)+" absent ",1)]),e("div",jt,[e("div",{class:"bg-primary flex items-center justify-center text-primary-foreground text-xs font-medium transition-all hover:opacity-90",style:D({width:n.present>0?`${n.present/(n.present+n.absent)*100}%`:"0%"})},r(n.present>0?n.present:""),5),e("div",{class:"bg-destructive flex items-center justify-center text-destructive-foreground text-xs font-medium transition-all hover:opacity-90",style:D({width:n.absent>0?`${n.absent/(n.present+n.absent)*100}%`:"0%"})},r(n.absent>0?n.absent:""),5)])]))),128))]),s(l(V),{class:"my-4"}),t[41]||(t[41]=e("div",{class:"flex items-center justify-center gap-6 text-sm"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-primary rounded-sm"}),e("span",{class:"text-muted-foreground"},"Present")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-destructive rounded-sm"}),e("span",{class:"text-muted-foreground"},"Absent")])],-1))]),_:1,__:[41]})]),_:1})])])])]),_:1})],64))}});export{Ft as default};
