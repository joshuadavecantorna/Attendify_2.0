import{_ as ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-CbPEVQj7.js";import{d as K,r as $,B as oe,C as de,j as E,o as _,w as l,b as t,e,f as n,a as c,k,i as o,n as P,t as i,F as Y,g as Q,p as ue,m as re,u as O,h as ie}from"./app-DvD5lfuA.js";import{_ as V,b as j,c as U,a as I,d as fe}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bm7dENVJ.js";import{c as M,_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DuW70504.js";import{_ as me}from"./index-D5999L_P.js";import{_ as _e,a as ce,b as X,c as S,d as pe,e as h}from"./TableHeader.vue_vue_type_script_setup_true_lang-CyrSXHhB.js";import{a as ve,b as ge,c as xe,d as ye,_ as be}from"./DialogTitle.vue_vue_type_script_setup_true_lang-5cdlHEvD.js";import{_ as T}from"./Input.vue_vue_type_script_setup_true_lang-CeFMmzl1.js";import{_ as C}from"./Label.vue_vue_type_script_setup_true_lang-Ex6JluKO.js";import{_ as $e}from"./Checkbox.vue_vue_type_script_setup_true_lang-CyNSFdC2.js";import{_ as z,a as H,b as J,c as W,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-Di0_pmJO.js";import{S as Se}from"./search-jA49E1Ux.js";import{L as he}from"./loader-circle-CasON-xX.js";import{U as F}from"./users-DghIYMBj.js";import{U as Z}from"./user-x-CmEpKJGl.js";import{C as q}from"./clock-X1SP7Hyn.js";import{P as G}from"./plus-DmsARgtv.js";import{M as we}from"./mail-C3dhEgzp.js";import"./useForwardExpose-DrilU4Ay.js";import"./RovingFocusGroup-BIwBOwvo.js";import"./check-ByxtUOfk.js";import"./RovingFocusItem-b-OKAiZI.js";const ke=M("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Ce=M("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Ae=M("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),De={class:"flex space-x-1 rounded-lg bg-muted p-1 mb-4"},Ve={key:0,class:"space-y-4"},je={class:"flex gap-2"},Ue={key:0,class:"text-center py-4"},Ie={class:"inline-flex items-center"},Te={key:1,class:"space-y-2"},Fe={class:"font-medium"},Ne={class:"border rounded-lg max-h-64 overflow-y-auto"},Be={class:"flex items-center space-x-3"},Le={class:"font-medium"},qe={class:"text-sm text-muted-foreground"},Ee={class:"text-xs text-muted-foreground"},Ye={key:0,class:"flex items-center justify-between pt-2"},Me={class:"text-sm text-muted-foreground"},Re={class:"flex gap-2"},Pe={key:2,class:"text-center py-8"},Oe={key:1,class:"space-y-4"},Xe={class:"grid gap-2"},ze={class:"grid gap-2"},He={class:"grid gap-2"},Je={class:"grid grid-cols-2 gap-4"},We={class:"grid gap-2"},Ge={class:"flex justify-end gap-2"},Ke=K({__name:"AddStudentDialog",props:{open:{type:Boolean},classId:{}},emits:["close","studentAdded"],setup(N,{emit:v}){const A=N,x=v,B=u=>{u||x("close")},g=$("existing"),y=$(""),r=$([]),a=$([]),f=$(!1),D=$(!1),b=$(!1),m=oe({student_id:"",name:"",email:"",course:"",year:"",section:""});let L=null;const ee=()=>{L&&clearTimeout(L),L=setTimeout(R,300)},R=async()=>{if(y.value.trim()){f.value=!0,D.value=!0;try{const s=await(await fetch(`/teacher/students/search?search=${encodeURIComponent(y.value)}`,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json();s.success?r.value=s.students:r.value=[]}catch(u){console.error("Search failed:",u),r.value=[]}finally{f.value=!1}}},te=(u,s)=>{if(s===!0)a.value.includes(u)||a.value.push(u);else{const d=a.value.indexOf(u);d>-1&&a.value.splice(d,1)}},se=async()=>{if(a.value.length!==0){b.value=!0;try{re.post(`/teacher/classes/${A.classId}/students/existing`,{student_ids:a.value},{onSuccess:u=>{console.log("Students added successfully"),(u.props?.success||u.props?.message)&&console.log("Success message:",u.props.message),x("studentAdded",a.value),a.value=[],r.value=[],y.value="",D.value=!1,b.value=!1,u.props?.message&&alert(u.props.message)},onError:u=>{console.error("Failed to add students:",u),alert("Failed to add students: "+(u.message||"Unknown error")),b.value=!1},preserveScroll:!0,preserveState:!1})}catch(u){console.error("Failed to add students:",u),alert("Failed to add students: "+(u instanceof Error?u.message:"Unknown error")),b.value=!1}}},le=async()=>{b.value=!0;try{const s=await(await fetch(`/teacher/classes/${A.classId}/students`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(m)})).json();s.success?(x("studentAdded",s.students),Object.keys(m).forEach(d=>{m[d]=""})):alert(s.message||"Failed to add student")}catch(u){console.error("Failed to add student:",u),alert("Failed to add student")}finally{b.value=!1}};return de(()=>A.open,u=>{u||(a.value=[],r.value=[],y.value="",D.value=!1,g.value="existing")}),(u,s)=>(_(),E(e(be),{open:u.open,"onUpdate:open":B},{default:l(()=>[t(e(ve),{class:"max-w-4xl max-h-[80vh] overflow-y-auto"},{default:l(()=>[t(e(ge),null,{default:l(()=>[t(e(xe),null,{default:l(()=>s[12]||(s[12]=[o("Add Students to Class",-1)])),_:1,__:[12]}),t(e(ye),null,{default:l(()=>s[13]||(s[13]=[o(" Add new students or search for existing students in the database ",-1)])),_:1,__:[13]})]),_:1}),n("div",De,[n("button",{onClick:s[0]||(s[0]=d=>g.value="existing"),class:P(["flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all",g.value==="existing"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"])}," Search Existing Students ",2),n("button",{onClick:s[1]||(s[1]=d=>g.value="new"),class:P(["flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all",g.value==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"])}," Add New Student ",2)]),g.value==="existing"?(_(),c("div",Ve,[n("div",je,[t(e(T),{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=d=>y.value=d),placeholder:"Search by name, student ID, or email...",onInput:ee,class:"flex-1"},null,8,["modelValue"]),t(e(p),{type:"button",onClick:R,disabled:!y.value.trim()},{default:l(()=>[t(e(Se),{class:"h-4 w-4 mr-2"}),s[14]||(s[14]=o(" Search ",-1))]),_:1,__:[14]},8,["disabled"])]),f.value?(_(),c("div",Ue,[n("div",Ie,[t(e(he),{class:"h-4 w-4 animate-spin mr-2"}),s[15]||(s[15]=o(" Searching students... ",-1))])])):k("",!0),r.value.length>0?(_(),c("div",Te,[n("h4",Fe,"Search Results ("+i(r.value.length)+")",1),n("div",Ne,[(_(!0),c(Y,null,Q(r.value,d=>(_(),c("div",{key:d.id,class:"flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-muted/50"},[n("div",Be,[t(e($e),{id:`student-${d.id}`,"model-value":a.value.includes(d.id),"onUpdate:modelValue":ae=>te(d.id,ae)},null,8,["id","model-value","onUpdate:modelValue"]),n("div",null,[n("div",Le,i(d.name),1),n("div",qe,i(d.student_id)+" â€¢ "+i(d.email),1),n("div",Ee,i(d.course)+" - "+i(d.year),1)])])]))),128))]),a.value.length>0?(_(),c("div",Ye,[n("span",Me,i(a.value.length)+" student(s) selected ",1),n("div",Re,[t(e(p),{variant:"outline",onClick:s[3]||(s[3]=d=>a.value=[])},{default:l(()=>s[16]||(s[16]=[o(" Clear Selection ",-1)])),_:1,__:[16]}),t(e(p),{onClick:se,disabled:b.value},{default:l(()=>[t(e(F),{class:"h-4 w-4 mr-2"}),s[17]||(s[17]=o(" Add Selected Students ",-1))]),_:1,__:[17]},8,["disabled"])])])):k("",!0)])):k("",!0),D.value&&r.value.length===0&&!f.value?(_(),c("div",Pe,[t(e(Z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s[19]||(s[19]=n("h3",{class:"text-lg font-semibold mb-2"},"No students found",-1)),s[20]||(s[20]=n("p",{class:"text-muted-foreground mb-4"}," No students match your search criteria. Try a different search term. ",-1)),t(e(p),{variant:"outline",onClick:s[4]||(s[4]=d=>g.value="new")},{default:l(()=>s[18]||(s[18]=[o(" Add New Student Instead ",-1)])),_:1,__:[18]})])):k("",!0)])):k("",!0),g.value==="new"?(_(),c("div",Oe,[n("form",{onSubmit:ue(le,["prevent"]),class:"space-y-4"},[n("div",Xe,[t(e(C),{for:"student-id"},{default:l(()=>s[21]||(s[21]=[o("Student ID",-1)])),_:1,__:[21]}),t(e(T),{id:"student-id",modelValue:m.student_id,"onUpdate:modelValue":s[5]||(s[5]=d=>m.student_id=d),placeholder:"e.g., 25-12345",required:""},null,8,["modelValue"])]),n("div",ze,[t(e(C),{for:"name"},{default:l(()=>s[22]||(s[22]=[o("Full Name",-1)])),_:1,__:[22]}),t(e(T),{id:"name",modelValue:m.name,"onUpdate:modelValue":s[6]||(s[6]=d=>m.name=d),placeholder:"e.g., John Doe",required:""},null,8,["modelValue"])]),n("div",He,[t(e(C),{for:"email"},{default:l(()=>s[23]||(s[23]=[o("Email",-1)])),_:1,__:[23]}),t(e(T),{id:"email",modelValue:m.email,"onUpdate:modelValue":s[7]||(s[7]=d=>m.email=d),type:"email",placeholder:"e.g., john.doe@usm.edu.ph"},null,8,["modelValue"])]),n("div",Je,[n("div",null,[t(e(C),{for:"course"},{default:l(()=>s[24]||(s[24]=[o("Course",-1)])),_:1,__:[24]}),t(e(z),{modelValue:m.course,"onUpdate:modelValue":s[8]||(s[8]=d=>m.course=d)},{default:l(()=>[t(e(H),null,{default:l(()=>[t(e(J),{placeholder:"Select course"})]),_:1}),t(e(W),null,{default:l(()=>[t(e(w),{value:"Bachelor of Science in Computer Science"},{default:l(()=>s[25]||(s[25]=[o("BSCS",-1)])),_:1,__:[25]}),t(e(w),{value:"Bachelor of Science in Information Technology"},{default:l(()=>s[26]||(s[26]=[o("BSIT",-1)])),_:1,__:[26]}),t(e(w),{value:"Bachelor of Library and Information Science"},{default:l(()=>s[27]||(s[27]=[o("BLIS",-1)])),_:1,__:[27]})]),_:1})]),_:1},8,["modelValue"])]),n("div",null,[t(e(C),{for:"year"},{default:l(()=>s[28]||(s[28]=[o("Year Level",-1)])),_:1,__:[28]}),t(e(z),{modelValue:m.year,"onUpdate:modelValue":s[9]||(s[9]=d=>m.year=d)},{default:l(()=>[t(e(H),null,{default:l(()=>[t(e(J),{placeholder:"Select year"})]),_:1}),t(e(W),null,{default:l(()=>[t(e(w),{value:"1st Year"},{default:l(()=>s[29]||(s[29]=[o("1st Year",-1)])),_:1,__:[29]}),t(e(w),{value:"2nd Year"},{default:l(()=>s[30]||(s[30]=[o("2nd Year",-1)])),_:1,__:[30]}),t(e(w),{value:"3rd Year"},{default:l(()=>s[31]||(s[31]=[o("3rd Year",-1)])),_:1,__:[31]}),t(e(w),{value:"4th Year"},{default:l(()=>s[32]||(s[32]=[o("4th Year",-1)])),_:1,__:[32]})]),_:1})]),_:1},8,["modelValue"])])]),n("div",We,[t(e(C),{for:"section"},{default:l(()=>s[33]||(s[33]=[o("Section",-1)])),_:1,__:[33]}),t(e(T),{id:"section",modelValue:m.section,"onUpdate:modelValue":s[10]||(s[10]=d=>m.section=d),placeholder:"e.g., A",required:""},null,8,["modelValue"])]),n("div",Ge,[t(e(p),{type:"button",variant:"outline",onClick:s[11]||(s[11]=d=>u.$emit("close"))},{default:l(()=>s[34]||(s[34]=[o(" Cancel ",-1)])),_:1,__:[34]}),t(e(p),{type:"submit",disabled:b.value},{default:l(()=>[t(e(Ae),{class:"h-4 w-4 mr-2"}),s[35]||(s[35]=o(" Add Student ",-1))]),_:1,__:[35]},8,["disabled"])])],32)])):k("",!0)]),_:1})]),_:1},8,["open"]))}}),Qe={class:"container mx-auto p-6 space-y-6"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center gap-3 mb-2"},tt={class:"text-3xl font-bold tracking-tight"},st={class:"text-muted-foreground"},lt={class:"flex gap-2"},at={class:"grid gap-4 md:grid-cols-4"},nt={class:"text-2xl font-bold"},ot={class:"text-lg font-bold"},dt={class:"text-xs text-muted-foreground"},ut={class:"text-2xl font-bold"},rt={class:"text-2xl font-bold"},it={key:0,class:"text-center py-8"},ft={class:"font-medium"},mt={class:"text-sm text-muted-foreground"},_t={class:"text-sm"},ct={class:"space-y-1"},pt={class:"flex items-center gap-1 text-sm"},vt={key:0,class:"flex items-center gap-1 text-sm"},Et=K({__name:"ClassDetails",props:{teacher:{},classData:{},students:{},recentSessions:{}},setup(N){const v=N,A=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Classes",href:"/teacher/classes"},{title:v.classData.name,href:`/teacher/classes/${v.classData.id}`}],x=$(!1);O({student_id:"",first_name:"",last_name:"",email:"",phone:"",year:v.classData.year,course:v.classData.course,section:v.classData.section});const B=r=>{x.value=!1,window.location.reload()},g=r=>{confirm("Are you sure you want to remove this student from the class?")&&O({}).delete(`/teacher/classes/${v.classData.id}/students/${r}`)},y=()=>{window.location.href=`/teacher/attendance?class_id=${v.classData.id}`};return(r,a)=>(_(),c(Y,null,[t(e(ie),{title:`${v.classData.name} - Class Details`},null,8,["title"]),t(ne,{breadcrumbs:A},{default:l(()=>[n("div",Qe,[n("div",Ze,[n("div",null,[n("div",et,[t(e(p),{variant:"outline",size:"sm",onClick:a[0]||(a[0]=f=>r.$inertia.visit("/teacher/classes"))},{default:l(()=>[t(e(ke),{class:"h-4 w-4 mr-1"}),a[4]||(a[4]=o(" Back to Classes ",-1))]),_:1,__:[4]}),n("h1",tt,i(r.classData.name),1)]),n("p",st,i(r.classData.course)+" - Section "+i(r.classData.section)+" ("+i(r.classData.year)+") ",1)]),n("div",lt,[t(e(p),{onClick:y},{default:l(()=>[t(e(q),{class:"h-4 w-4 mr-2"}),a[5]||(a[5]=o(" Take Attendance ",-1))]),_:1,__:[5]}),t(e(p),{variant:"outline",onClick:a[1]||(a[1]=f=>x.value=!0)},{default:l(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),a[6]||(a[6]=o(" Add Student ",-1))]),_:1,__:[6]})])]),n("div",at,[t(e(V),null,{default:l(()=>[t(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(U),{class:"text-sm font-medium"},{default:l(()=>a[7]||(a[7]=[o("Total Students",-1)])),_:1,__:[7]}),t(e(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(I),null,{default:l(()=>[n("div",nt,i(r.students.length),1),a[8]||(a[8]=n("p",{class:"text-xs text-muted-foreground"},"Enrolled students",-1))]),_:1,__:[8]})]),_:1}),t(e(V),null,{default:l(()=>[t(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(U),{class:"text-sm font-medium"},{default:l(()=>a[9]||(a[9]=[o("Schedule",-1)])),_:1,__:[9]}),t(e(q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(I),null,{default:l(()=>[n("div",ot,i(r.classData.schedule_time),1),n("p",dt,i(Array.isArray(r.classData.schedule_days)&&r.classData.schedule_days.length>0?r.classData.schedule_days.join(", "):"No schedule set"),1)]),_:1})]),_:1}),t(e(V),null,{default:l(()=>[t(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(U),{class:"text-sm font-medium"},{default:l(()=>a[10]||(a[10]=[o("Recent Sessions",-1)])),_:1,__:[10]}),t(e(q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(I),null,{default:l(()=>[n("div",ut,i(r.recentSessions.length),1),a[11]||(a[11]=n("p",{class:"text-xs text-muted-foreground"},"Attendance sessions",-1))]),_:1,__:[11]})]),_:1}),t(e(V),null,{default:l(()=>[t(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(U),{class:"text-sm font-medium"},{default:l(()=>a[12]||(a[12]=[o("Active Students",-1)])),_:1,__:[12]}),t(e(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(I),null,{default:l(()=>[n("div",rt,i(r.students.filter(f=>f.status==="enrolled").length),1),a[13]||(a[13]=n("p",{class:"text-xs text-muted-foreground"},"Currently enrolled",-1))]),_:1,__:[13]})]),_:1})]),t(e(V),null,{default:l(()=>[t(e(j),null,{default:l(()=>[t(e(U),null,{default:l(()=>a[14]||(a[14]=[o("Class Students",-1)])),_:1,__:[14]}),t(e(fe),null,{default:l(()=>a[15]||(a[15]=[o(" Manage students enrolled in this class ",-1)])),_:1,__:[15]})]),_:1}),t(e(I),null,{default:l(()=>[r.students.length===0?(_(),c("div",it,[t(e(F),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a[17]||(a[17]=n("h3",{class:"text-lg font-semibold mb-2"},"No students enrolled",-1)),a[18]||(a[18]=n("p",{class:"text-muted-foreground mb-4"},"Add students to get started with this class.",-1)),t(e(p),{onClick:a[2]||(a[2]=f=>x.value=!0)},{default:l(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),a[16]||(a[16]=o(" Add First Student ",-1))]),_:1,__:[16]})])):(_(),E(e(_e),{key:1},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(S),null,{default:l(()=>a[19]||(a[19]=[o("Student",-1)])),_:1,__:[19]}),t(e(S),null,{default:l(()=>a[20]||(a[20]=[o("Student ID",-1)])),_:1,__:[20]}),t(e(S),null,{default:l(()=>a[21]||(a[21]=[o("Contact",-1)])),_:1,__:[21]}),t(e(S),null,{default:l(()=>a[22]||(a[22]=[o("Year/Course",-1)])),_:1,__:[22]}),t(e(S),null,{default:l(()=>a[23]||(a[23]=[o("Status",-1)])),_:1,__:[23]}),t(e(S),null,{default:l(()=>a[24]||(a[24]=[o("Enrolled",-1)])),_:1,__:[24]}),t(e(S),null,{default:l(()=>a[25]||(a[25]=[o("Actions",-1)])),_:1,__:[25]})]),_:1})]),_:1}),t(e(pe),null,{default:l(()=>[(_(!0),c(Y,null,Q(r.students,f=>(_(),E(e(X),{key:f.id},{default:l(()=>[t(e(h),null,{default:l(()=>[n("div",null,[n("div",ft,i(f.first_name)+" "+i(f.last_name),1),n("div",mt,i(f.email),1)])]),_:2},1024),t(e(h),null,{default:l(()=>[n("code",_t,i(f.student_id),1)]),_:2},1024),t(e(h),null,{default:l(()=>[n("div",ct,[n("div",pt,[t(e(we),{class:"h-3 w-3"}),o(" "+i(f.email),1)]),f.phone?(_(),c("div",vt,[t(e(Ce),{class:"h-3 w-3"}),o(" "+i(f.phone),1)])):k("",!0)])]),_:2},1024),t(e(h),null,{default:l(()=>[o(i(f.year)+" "+i(f.course),1)]),_:2},1024),t(e(h),null,{default:l(()=>[t(e(me),{variant:f.status==="enrolled"?"default":"secondary"},{default:l(()=>[o(i(f.status),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(h),null,{default:l(()=>[o(i(new Date(f.enrolled_at).toLocaleDateString()),1)]),_:2},1024),t(e(h),null,{default:l(()=>[t(e(p),{size:"sm",variant:"destructive",onClick:D=>g(f.id)},{default:l(()=>[t(e(Z),{class:"h-3 w-3"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),t(Ke,{open:x.value,"class-id":r.classData.id,onClose:a[3]||(a[3]=f=>x.value=!1),onStudentAdded:B},null,8,["open","class-id"])]),_:1})],64))}});export{Et as default};
