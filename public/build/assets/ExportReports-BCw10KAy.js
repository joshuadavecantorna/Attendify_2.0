import{F as O,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CbPEVQj7.js";import{d as M,u as P,r as W,a as S,o as x,b as a,e,h as z,w as l,f as n,i as d,F as D,g as U,j,t as c}from"./app-DvD5lfuA.js";import{_ as $,b as w,c as F,d as R,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bm7dENVJ.js";import{_ as y}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DuW70504.js";import{_ as g,a as C,b as E,c as k,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-Di0_pmJO.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-CeFMmzl1.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-Ex6JluKO.js";import{C as A}from"./calendar-BcsYx6v_.js";import{D as q}from"./download-Db612_a5.js";import"./useForwardExpose-DrilU4Ay.js";import"./users-DghIYMBj.js";import"./RovingFocusGroup-BIwBOwvo.js";import"./check-ByxtUOfk.js";const G={class:"container mx-auto p-6 space-y-6"},H={class:"grid gap-6 md:grid-cols-2"},J={class:"grid gap-2"},K={class:"grid gap-2"},X={class:"grid gap-4 md:grid-cols-3"},Y={class:"text-center"},Z={class:"text-center"},h={class:"text-center"},_t=M({__name:"ExportReports",props:{teacher:{},classes:{}},setup(tt){const I=[{title:"Teacher Dashboard",href:"/teacher/dashboard"},{title:"Reports",href:"/teacher/reports"},{title:"Export Reports",href:"/teacher/reports/export"}],u=P({class_id:"all",start_date:"",end_date:"",format:"csv",export_type:"attendance"}),_=P({class_id:"",format:"csv",export_type:"students"}),r=W(!1),N=()=>{if(r.value)return;r.value=!0;const o=document.createElement("form");o.method="POST",o.action="/teacher/reports/export-data",o.style.display="none";const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(t){const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=t,o.appendChild(i)}const s={export_type:u.export_type,format:u.format,class_id:u.class_id==="all"?"":u.class_id,start_date:u.start_date,end_date:u.end_date};Object.entries(s).forEach(([i,m])=>{if(m){const f=document.createElement("input");f.type="hidden",f.name=i,f.value=m.toString(),o.appendChild(f)}}),document.body.appendChild(o),o.submit(),document.body.removeChild(o),r.value=!1},L=()=>{if(r.value)return;if(!_.class_id){alert("Please select a class first.");return}r.value=!0;const o=document.createElement("form");o.method="POST",o.action="/teacher/reports/export-data",o.style.display="none";const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(t){const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=t,o.appendChild(i)}const s={export_type:_.export_type,format:_.format,class_id:_.class_id};Object.entries(s).forEach(([i,m])=>{if(m){const f=document.createElement("input");f.type="hidden",f.name=i,f.value=m.toString(),o.appendChild(f)}}),document.body.appendChild(o),o.submit(),document.body.removeChild(o),r.value=!1},V=o=>{if(r.value)return;r.value=!0;const t=document.createElement("form");t.method="POST",t.action="/teacher/reports/export-data",t.style.display="none";const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(s){const m=document.createElement("input");m.type="hidden",m.name="_token",m.value=s,t.appendChild(m)}Object.entries({export_type:o,format:"csv",class_id:""}).forEach(([m,f])=>{if(f){const b=document.createElement("input");b.type="hidden",b.name=m,b.value=f.toString(),t.appendChild(b)}}),document.body.appendChild(t),t.submit(),document.body.removeChild(t),setTimeout(()=>{r.value=!1},2e3)};return(o,t)=>(x(),S(D,null,[a(e(z),{title:"Export Reports"}),a(Q,{breadcrumbs:I},{default:l(()=>[n("div",G,[t[34]||(t[34]=n("div",{class:"space-y-2"},[n("h1",{class:"text-3xl font-bold tracking-tight"},"Export Reports"),n("p",{class:"text-muted-foreground"}," Download detailed reports in various formats ")],-1)),n("div",H,[a(e($),null,{default:l(()=>[a(e(w),null,{default:l(()=>[a(e(F),{class:"flex items-center gap-2"},{default:l(()=>[a(e(A),{class:"h-5 w-5"}),t[9]||(t[9]=d(" Attendance Reports ",-1))]),_:1,__:[9]}),a(e(R),null,{default:l(()=>t[10]||(t[10]=[d(" Export detailed attendance data for your classes ",-1)])),_:1,__:[10]})]),_:1}),a(e(T),{class:"space-y-4"},{default:l(()=>[n("div",null,[a(e(v),{for:"class-select"},{default:l(()=>t[11]||(t[11]=[d("Class (Optional)",-1)])),_:1,__:[11]}),a(e(g),{modelValue:e(u).class_id,"onUpdate:modelValue":t[0]||(t[0]=s=>e(u).class_id=s)},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(E),{placeholder:"All Classes"})]),_:1}),a(e(k),null,{default:l(()=>[a(e(p),{value:"all"},{default:l(()=>t[12]||(t[12]=[d("All Classes",-1)])),_:1,__:[12]}),(x(!0),S(D,null,U(o.classes,s=>(x(),j(e(p),{key:s.id,value:s.id.toString()},{default:l(()=>[d(c(s.name)+" ("+c(s.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",J,[a(e(v),{for:"start-date"},{default:l(()=>t[13]||(t[13]=[d("Start Date",-1)])),_:1,__:[13]}),a(e(B),{id:"start-date",type:"date",modelValue:e(u).start_date,"onUpdate:modelValue":t[1]||(t[1]=s=>e(u).start_date=s)},null,8,["modelValue"])]),n("div",K,[a(e(v),{for:"end-date"},{default:l(()=>t[14]||(t[14]=[d("End Date",-1)])),_:1,__:[14]}),a(e(B),{id:"end-date",type:"date",modelValue:e(u).end_date,"onUpdate:modelValue":t[2]||(t[2]=s=>e(u).end_date=s)},null,8,["modelValue"])]),n("div",null,[a(e(v),{for:"format-select"},{default:l(()=>t[15]||(t[15]=[d("Format",-1)])),_:1,__:[15]}),a(e(g),{modelValue:e(u).format,"onUpdate:modelValue":t[3]||(t[3]=s=>e(u).format=s)},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(E))]),_:1}),a(e(k),null,{default:l(()=>[a(e(p),{value:"csv"},{default:l(()=>t[16]||(t[16]=[d("CSV",-1)])),_:1,__:[16]}),a(e(p),{value:"xlsx"},{default:l(()=>t[17]||(t[17]=[d("Excel",-1)])),_:1,__:[17]}),a(e(p),{value:"pdf"},{default:l(()=>t[18]||(t[18]=[d("PDF",-1)])),_:1,__:[18]})]),_:1})]),_:1},8,["modelValue"])]),a(e(y),{onClick:N,class:"w-full",disabled:r.value},{default:l(()=>[a(e(q),{class:"h-4 w-4 mr-2"}),d(" "+c(r.value?"Exporting...":"Export Attendance Data"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),a(e($),null,{default:l(()=>[a(e(w),null,{default:l(()=>[a(e(F),{class:"flex items-center gap-2"},{default:l(()=>[a(e(O),{class:"h-5 w-5"}),t[19]||(t[19]=d(" Student Reports ",-1))]),_:1,__:[19]}),a(e(R),null,{default:l(()=>t[20]||(t[20]=[d(" Export individual student performance data ",-1)])),_:1,__:[20]})]),_:1}),a(e(T),{class:"space-y-4"},{default:l(()=>[n("div",null,[a(e(v),{for:"student-class-select"},{default:l(()=>t[21]||(t[21]=[d("Class",-1)])),_:1,__:[21]}),a(e(g),{modelValue:e(_).class_id,"onUpdate:modelValue":t[4]||(t[4]=s=>e(_).class_id=s)},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(E),{placeholder:"Select a class"})]),_:1}),a(e(k),null,{default:l(()=>[(x(!0),S(D,null,U(o.classes,s=>(x(),j(e(p),{key:s.id,value:s.id.toString()},{default:l(()=>[d(c(s.name)+" ("+c(s.section)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",null,[a(e(v),{for:"student-format-select"},{default:l(()=>t[22]||(t[22]=[d("Format",-1)])),_:1,__:[22]}),a(e(g),{modelValue:e(_).format,"onUpdate:modelValue":t[5]||(t[5]=s=>e(_).format=s)},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(E))]),_:1}),a(e(k),null,{default:l(()=>[a(e(p),{value:"csv"},{default:l(()=>t[23]||(t[23]=[d("CSV",-1)])),_:1,__:[23]}),a(e(p),{value:"xlsx"},{default:l(()=>t[24]||(t[24]=[d("Excel",-1)])),_:1,__:[24]}),a(e(p),{value:"pdf"},{default:l(()=>t[25]||(t[25]=[d("PDF",-1)])),_:1,__:[25]})]),_:1})]),_:1},8,["modelValue"])]),a(e(y),{onClick:L,class:"w-full",variant:"outline",disabled:r.value},{default:l(()=>[a(e(q),{class:"h-4 w-4 mr-2"}),d(" "+c(r.value?"Exporting...":"Export Student Data"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),a(e($),null,{default:l(()=>[a(e(w),null,{default:l(()=>[a(e(F),null,{default:l(()=>t[26]||(t[26]=[d("Quick Export Options",-1)])),_:1,__:[26]}),a(e(R),null,{default:l(()=>t[27]||(t[27]=[d(" Pre-configured export templates for common reports ",-1)])),_:1,__:[27]})]),_:1}),a(e(T),null,{default:l(()=>[n("div",X,[a(e(y),{onClick:t[6]||(t[6]=s=>V("weekly")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",Y,[a(e(A),{class:"h-8 w-8 mx-auto mb-2"}),t[28]||(t[28]=n("div",{class:"font-medium"},"Weekly Report",-1)),t[29]||(t[29]=n("div",{class:"text-sm text-muted-foreground"},"Last 7 days attendance",-1))])]),_:1},8,["disabled"]),a(e(y),{onClick:t[7]||(t[7]=s=>V("monthly")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",Z,[a(e(A),{class:"h-8 w-8 mx-auto mb-2"}),t[30]||(t[30]=n("div",{class:"font-medium"},"Monthly Report",-1)),t[31]||(t[31]=n("div",{class:"text-sm text-muted-foreground"},"Current month summary",-1))])]),_:1},8,["disabled"]),a(e(y),{onClick:t[8]||(t[8]=s=>V("semester")),variant:"outline",class:"h-auto p-4",disabled:r.value},{default:l(()=>[n("div",h,[a(e(O),{class:"h-8 w-8 mx-auto mb-2"}),t[32]||(t[32]=n("div",{class:"font-medium"},"Semester Report",-1)),t[33]||(t[33]=n("div",{class:"text-sm text-muted-foreground"},"Complete semester data",-1))])]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})],64))}});export{_t as default};
