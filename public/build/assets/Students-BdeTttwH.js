import{d as ee,r as k,u as $,c as U,a as _,o as m,b as t,e,h as se,w as o,f as r,i as n,p as L,k as f,n as g,t as u,j as h,F as j,g as te}from"./app-OXmU166Q.js";import{_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CQKvJ_Ct.js";import{_ as q,a as D,b as le,c as re,d as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-FXh4yG6b.js";import{_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CGIYOqcj.js";import{_ as N}from"./index-DpPOakUB.js";import{_ as de,a as ne,b as E,c as y,d as ie,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-BSu5WhYK.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-B7F0P19X.js";import{_ as P,a as I,b as T,c as B,d as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-6XzyZbOz.js";import{_ as z}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CqT1EXV_.js";import{_ as ue}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-evMMIE2_.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-B0_ysysQ.js";import{P as me}from"./plus-CsFhKTFd.js";import{S as _e}from"./search-BwSlLQkk.js";import{S as fe}from"./square-pen-BLal1xXU.js";import{U as ce}from"./user-check-lULhbVeV.js";import{U as pe}from"./user-x-DeIHMvp_.js";import{T as ge}from"./trash-2-Cf0RNjCn.js";import"./useForwardExpose-Dn3oH0KL.js";import"./users-CgcVcNzr.js";import"./RovingFocusGroup-BlJuKAAH.js";const ve={class:"flex flex-1 flex-col gap-4 p-4 pt-0"},xe={class:"flex items-center justify-between"},ye={class:"grid grid-cols-1 gap-4"},we={class:"grid gap-2"},Ve={key:0,class:"text-sm text-red-500"},be={class:"grid gap-2"},Se={key:0,class:"text-sm text-red-500"},Ce={class:"grid grid-cols-2 gap-4"},ke={class:"grid gap-2"},$e={key:0,class:"text-sm text-red-500"},Ue={class:"grid gap-2"},he={key:0,class:"text-sm text-red-500"},qe={class:"grid gap-2"},De={key:0,class:"text-sm text-red-500"},Ee={class:"grid gap-2"},Fe={key:0,class:"text-sm text-red-500"},Ae={class:"grid gap-2"},Le={key:0,class:"text-sm text-red-500"},je={class:"grid gap-2"},Ne={key:0,class:"text-sm text-red-500"},Pe={class:"grid gap-2"},Ie={class:"grid gap-4 md:grid-cols-3"},Te={class:"text-2xl font-bold"},Be={class:"text-2xl font-bold text-green-600"},Me={class:"text-2xl font-bold text-red-600"},ze={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ye={class:"flex items-center gap-2"},Je={class:"relative"},Oe={class:"overflow-x-auto"},Qe={class:"font-medium"},Re={class:"text-sm text-muted-foreground"},Xe={class:"font-medium"},Ge={class:"text-sm text-muted-foreground"},He={class:"text-sm"},Ke={class:"text-sm text-muted-foreground"},We={class:"text-sm"},Ze={class:"flex items-center justify-end gap-1"},es={class:"grid grid-cols-1 gap-4"},ss={class:"grid gap-2"},ts={key:0,class:"text-sm text-red-500"},os={class:"grid gap-2"},ls={key:0,class:"text-sm text-red-500"},rs={class:"grid grid-cols-2 gap-4"},as={class:"grid gap-2"},ds={key:0,class:"text-sm text-red-500"},ns={class:"grid gap-2"},is={key:0,class:"text-sm text-red-500"},us={class:"grid gap-2"},ms={key:0,class:"text-sm text-red-500"},_s={class:"grid gap-2"},fs={key:0,class:"text-sm text-red-500"},cs={class:"grid gap-2"},ps={key:0,class:"text-sm text-red-500"},Ns=ee({__name:"Students",props:{students:{}},setup(Y){const V=Y,S=k(""),C=k(!1),b=k(!1),w=k(null),a=$({name:"",email:"",phone:"",student_id:"",year:"",course:"",section:"",password:"",password_confirmation:""}),d=$({name:"",email:"",phone:"",student_id:"",year:"",course:"",section:""}),F=U(()=>{if(!S.value)return V.students;const i=S.value.toLowerCase();return V.students.filter(s=>s.name.toLowerCase().includes(i)||s.email.toLowerCase().includes(i)||s.student_id.toLowerCase().includes(i)||s.course.toLowerCase().includes(i)||s.section.toLowerCase().includes(i))}),J=U(()=>V.students.length),O=U(()=>V.students.filter(i=>i.is_active).length),Q=U(()=>V.students.filter(i=>!i.is_active).length),R=()=>{console.log("Creating student with data:",a.data()),console.log("Form errors before submit:",a.errors),a.post("/admin/students",{onSuccess:()=>{console.log("Student created successfully!"),C.value=!1,a.reset()},onError:i=>{console.error("Failed to create student. Errors:",i),console.error("Form errors:",a.errors)},onFinish:()=>{console.log("Create request finished")}})},X=i=>{w.value=i,d.name=i.name,d.email=i.email,d.phone=i.phone||"",d.student_id=i.student_id,d.year=i.year,d.course=i.course,d.section=i.section,b.value=!0},G=()=>{w.value&&(console.log("Updating student ID:",w.value.id),console.log("Update data:",d.data()),d.put(`/admin/students/${w.value.id}`,{onSuccess:()=>{console.log("Student updated successfully!"),b.value=!1,w.value=null,d.reset()},onError:i=>{console.error("Failed to update student. Errors:",i),console.error("Form errors:",d.errors)}}))},H=i=>{console.log("Toggling status for student ID:",i),$({}).patch(`/admin/students/${i}/toggle-status`,{onSuccess:()=>{console.log("Student status toggled successfully!")},onError:s=>{console.error("Failed to toggle status. Errors:",s)}})},K=(i,s)=>{console.log("Attempting to delete student:",i,s),confirm(`Are you sure you want to deactivate ${s}? This action will preserve their data but prevent them from accessing the system.`)?(console.log("Delete confirmed, sending request..."),$({}).delete(`/admin/students/${i}`,{onSuccess:()=>{console.log("Student deleted successfully!")},onError:l=>{console.error("Failed to delete student. Errors:",l)},onFinish:()=>{console.log("Delete request finished")}})):console.log("Delete cancelled by user")},W=i=>new Date(i).toLocaleDateString(),Z=[{title:"Admin Dashboard",href:"/dashboard"},{title:"Students",href:"/admin/students"}];return(i,s)=>(m(),_(j,null,[t(e(se),{title:"Students Management"}),t(oe,{breadcrumbs:Z},{default:o(()=>[r("div",ve,[r("div",xe,[s[34]||(s[34]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Students Management"),r("p",{class:"text-muted-foreground"},"Manage student accounts and information")],-1)),t(e(P),{open:C.value,"onUpdate:open":s[10]||(s[10]=l=>C.value=l)},{default:o(()=>[t(e(ue),{"as-child":""},{default:o(()=>[t(e(v),{class:"flex items-center gap-2"},{default:o(()=>[t(e(me),{class:"h-4 w-4"}),s[21]||(s[21]=n(" Add Student ",-1))]),_:1,__:[21]})]),_:1}),t(e(I),{class:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto"},{default:o(()=>[t(e(T),null,{default:o(()=>[t(e(B),null,{default:o(()=>s[22]||(s[22]=[n("Add New Student",-1)])),_:1,__:[22]}),t(e(M),null,{default:o(()=>s[23]||(s[23]=[n("Create a new student account with access credentials.",-1)])),_:1,__:[23]})]),_:1}),r("form",{onSubmit:L(R,["prevent"]),class:"space-y-4"},[r("div",ye,[r("div",we,[t(e(p),{for:"create_name"},{default:o(()=>s[24]||(s[24]=[n("Full Name",-1)])),_:1,__:[24]}),t(e(c),{id:"create_name",modelValue:e(a).name,"onUpdate:modelValue":s[0]||(s[0]=l=>e(a).name=l),placeholder:"Enter full name",class:g({"border-red-500":e(a).errors.name}),required:""},null,8,["modelValue","class"]),e(a).errors.name?(m(),_("span",Ve,u(e(a).errors.name),1)):f("",!0)]),r("div",be,[t(e(p),{for:"create_student_id"},{default:o(()=>s[25]||(s[25]=[n("Student ID",-1)])),_:1,__:[25]}),t(e(c),{id:"create_student_id",modelValue:e(a).student_id,"onUpdate:modelValue":s[1]||(s[1]=l=>e(a).student_id=l),placeholder:"e.g., 23-62514",class:g({"border-red-500":e(a).errors.student_id}),required:""},null,8,["modelValue","class"]),e(a).errors.student_id?(m(),_("span",Se,u(e(a).errors.student_id),1)):f("",!0)]),r("div",Ce,[r("div",ke,[t(e(p),{for:"create_course"},{default:o(()=>s[26]||(s[26]=[n("Course",-1)])),_:1,__:[26]}),t(e(c),{id:"create_course",modelValue:e(a).course,"onUpdate:modelValue":s[2]||(s[2]=l=>e(a).course=l),placeholder:"e.g., BSCS",class:g({"border-red-500":e(a).errors.course}),required:""},null,8,["modelValue","class"]),e(a).errors.course?(m(),_("span",$e,u(e(a).errors.course),1)):f("",!0)]),r("div",Ue,[t(e(p),{for:"create_section"},{default:o(()=>s[27]||(s[27]=[n("Section",-1)])),_:1,__:[27]}),t(e(c),{id:"create_section",modelValue:e(a).section,"onUpdate:modelValue":s[3]||(s[3]=l=>e(a).section=l),placeholder:"e.g., A",class:g({"border-red-500":e(a).errors.section}),required:""},null,8,["modelValue","class"]),e(a).errors.section?(m(),_("span",he,u(e(a).errors.section),1)):f("",!0)])]),r("div",qe,[t(e(p),{for:"create_year"},{default:o(()=>s[28]||(s[28]=[n("Year Level",-1)])),_:1,__:[28]}),t(e(c),{id:"create_year",modelValue:e(a).year,"onUpdate:modelValue":s[4]||(s[4]=l=>e(a).year=l),placeholder:"e.g., 4th Year",class:g({"border-red-500":e(a).errors.year}),required:""},null,8,["modelValue","class"]),e(a).errors.year?(m(),_("span",De,u(e(a).errors.year),1)):f("",!0)]),r("div",Ee,[t(e(p),{for:"create_email"},{default:o(()=>s[29]||(s[29]=[n("Email",-1)])),_:1,__:[29]}),t(e(c),{id:"create_email",type:"email",modelValue:e(a).email,"onUpdate:modelValue":s[5]||(s[5]=l=>e(a).email=l),placeholder:"student@university.edu",class:g({"border-red-500":e(a).errors.email}),required:""},null,8,["modelValue","class"]),e(a).errors.email?(m(),_("span",Fe,u(e(a).errors.email),1)):f("",!0)]),r("div",Ae,[t(e(p),{for:"create_phone"},{default:o(()=>s[30]||(s[30]=[n("Phone (Optional)",-1)])),_:1,__:[30]}),t(e(c),{id:"create_phone",modelValue:e(a).phone,"onUpdate:modelValue":s[6]||(s[6]=l=>e(a).phone=l),placeholder:"+1 (555) 123-4567",class:g({"border-red-500":e(a).errors.phone})},null,8,["modelValue","class"]),e(a).errors.phone?(m(),_("span",Le,u(e(a).errors.phone),1)):f("",!0)]),r("div",je,[t(e(p),{for:"create_password"},{default:o(()=>s[31]||(s[31]=[n("Password",-1)])),_:1,__:[31]}),t(e(c),{id:"create_password",type:"password",modelValue:e(a).password,"onUpdate:modelValue":s[7]||(s[7]=l=>e(a).password=l),placeholder:"Enter secure password",class:g({"border-red-500":e(a).errors.password}),required:""},null,8,["modelValue","class"]),e(a).errors.password?(m(),_("span",Ne,u(e(a).errors.password),1)):f("",!0)]),r("div",Pe,[t(e(p),{for:"create_password_confirmation"},{default:o(()=>s[32]||(s[32]=[n("Confirm Password",-1)])),_:1,__:[32]}),t(e(c),{id:"create_password_confirmation",type:"password",modelValue:e(a).password_confirmation,"onUpdate:modelValue":s[8]||(s[8]=l=>e(a).password_confirmation=l),placeholder:"Confirm password",required:""},null,8,["modelValue"])])]),t(e(z),null,{default:o(()=>[t(e(v),{type:"button",variant:"outline",onClick:s[9]||(s[9]=l=>C.value=!1)},{default:o(()=>s[33]||(s[33]=[n("Cancel",-1)])),_:1,__:[33]}),t(e(v),{type:"submit",disabled:e(a).processing},{default:o(()=>[n(u(e(a).processing?"Creating...":"Create Student"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),r("div",Ie,[t(e(q),null,{default:o(()=>[t(e(D),{class:"p-4"},{default:o(()=>[s[35]||(s[35]=r("div",{class:"flex items-center justify-between mb-2"},[r("span",{class:"text-sm font-medium"},"Total Students"),r("span",{class:"text-xl"},"ðŸ‘¥")],-1)),r("div",Te,u(J.value),1),s[36]||(s[36]=r("p",{class:"text-xs text-muted-foreground mt-1"}," Registered in the system ",-1))]),_:1,__:[35,36]})]),_:1}),t(e(q),null,{default:o(()=>[t(e(D),{class:"p-4"},{default:o(()=>[s[37]||(s[37]=r("div",{class:"flex items-center justify-between mb-2"},[r("span",{class:"text-sm font-medium"},"Active Students"),r("span",{class:"text-xl"},"âœ…")],-1)),r("div",Be,u(O.value),1),s[38]||(s[38]=r("p",{class:"text-xs text-muted-foreground mt-1"}," Currently active accounts ",-1))]),_:1,__:[37,38]})]),_:1}),t(e(q),null,{default:o(()=>[t(e(D),{class:"p-4"},{default:o(()=>[s[39]||(s[39]=r("div",{class:"flex items-center justify-between mb-2"},[r("span",{class:"text-sm font-medium"},"Inactive Students"),r("span",{class:"text-xl"},"âŒ")],-1)),r("div",Me,u(Q.value),1),s[40]||(s[40]=r("p",{class:"text-xs text-muted-foreground mt-1"}," Deactivated accounts ",-1))]),_:1,__:[39,40]})]),_:1})]),t(e(q),null,{default:o(()=>[t(e(le),null,{default:o(()=>[r("div",ze,[r("div",null,[t(e(re),null,{default:o(()=>s[41]||(s[41]=[n("Students List",-1)])),_:1,__:[41]}),t(e(ae),null,{default:o(()=>s[42]||(s[42]=[n("Manage student accounts and their information",-1)])),_:1,__:[42]})]),r("div",Ye,[r("div",Je,[t(e(_e),{class:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),t(e(c),{placeholder:"Search students...",modelValue:S.value,"onUpdate:modelValue":s[11]||(s[11]=l=>S.value=l),class:"pl-8 w-64"},null,8,["modelValue"])])])])]),_:1}),t(e(D),null,{default:o(()=>[r("div",Oe,[t(e(de),null,{default:o(()=>[t(e(ne),null,{default:o(()=>[t(e(E),null,{default:o(()=>[t(e(y),{class:"min-w-[200px]"},{default:o(()=>s[43]||(s[43]=[n("Student Info",-1)])),_:1,__:[43]}),t(e(y),{class:"min-w-[150px]"},{default:o(()=>s[44]||(s[44]=[n("Academic Info",-1)])),_:1,__:[44]}),t(e(y),{class:"min-w-[200px]"},{default:o(()=>s[45]||(s[45]=[n("Contact",-1)])),_:1,__:[45]}),t(e(y),null,{default:o(()=>s[46]||(s[46]=[n("Status",-1)])),_:1,__:[46]}),t(e(y),null,{default:o(()=>s[47]||(s[47]=[n("Classes",-1)])),_:1,__:[47]}),t(e(y),null,{default:o(()=>s[48]||(s[48]=[n("Joined",-1)])),_:1,__:[48]}),t(e(y),{class:"text-right min-w-[120px]"},{default:o(()=>s[49]||(s[49]=[n("Actions",-1)])),_:1,__:[49]})]),_:1})]),_:1}),t(e(ie),null,{default:o(()=>[(m(!0),_(j,null,te(F.value,l=>(m(),h(e(E),{key:l.id,class:"hover:bg-muted/50"},{default:o(()=>[t(e(x),null,{default:o(()=>[r("div",null,[r("div",Qe,u(l.name),1),r("div",Re,u(l.student_id),1)])]),_:2},1024),t(e(x),null,{default:o(()=>[r("div",null,[r("div",Xe,u(l.course)+"-"+u(l.section),1),r("div",Ge,u(l.year),1)])]),_:2},1024),t(e(x),null,{default:o(()=>[r("div",null,[r("div",He,u(l.email),1),r("div",Ke,u(l.phone||"No phone"),1)])]),_:2},1024),t(e(x),null,{default:o(()=>[t(e(N),{variant:l.is_active?"default":"secondary"},{default:o(()=>[n(u(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(x),null,{default:o(()=>[t(e(N),{variant:"outline"},{default:o(()=>[n(u(l.classes_count)+" classes ",1)]),_:2},1024)]),_:2},1024),t(e(x),null,{default:o(()=>[r("div",We,u(W(l.created_at)),1)]),_:2},1024),t(e(x),{class:"text-right"},{default:o(()=>[r("div",Ze,[t(e(v),{size:"sm",variant:"ghost",onClick:A=>X(l),title:"Edit Student"},{default:o(()=>[t(e(fe),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),t(e(v),{size:"sm",variant:"ghost",onClick:A=>H(l.id),title:l.is_active?"Deactivate":"Activate"},{default:o(()=>[l.is_active?(m(),h(e(ce),{key:0,class:"h-4 w-4 text-green-600"})):(m(),h(e(pe),{key:1,class:"h-4 w-4 text-red-600"}))]),_:2},1032,["onClick","title"]),t(e(v),{size:"sm",variant:"ghost",onClick:A=>K(l.id,l.name),class:"text-red-600 hover:text-red-700",title:"Delete Student"},{default:o(()=>[t(e(ge),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),F.value.length===0?(m(),h(e(E),{key:0},{default:o(()=>[t(e(x),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:o(()=>s[50]||(s[50]=[n(" No students found matching your search criteria. ",-1)])),_:1,__:[50]})]),_:1})):f("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),t(e(P),{open:b.value,"onUpdate:open":s[20]||(s[20]=l=>b.value=l)},{default:o(()=>[t(e(I),{class:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto"},{default:o(()=>[t(e(T),null,{default:o(()=>[t(e(B),null,{default:o(()=>s[51]||(s[51]=[n("Edit Student",-1)])),_:1,__:[51]}),t(e(M),null,{default:o(()=>s[52]||(s[52]=[n("Update student information.",-1)])),_:1,__:[52]})]),_:1}),w.value?(m(),_("form",{key:0,onSubmit:L(G,["prevent"]),class:"space-y-4"},[r("div",es,[r("div",ss,[t(e(p),{for:"edit_name"},{default:o(()=>s[53]||(s[53]=[n("Full Name",-1)])),_:1,__:[53]}),t(e(c),{id:"edit_name",modelValue:e(d).name,"onUpdate:modelValue":s[12]||(s[12]=l=>e(d).name=l),class:g({"border-red-500":e(d).errors.name}),required:""},null,8,["modelValue","class"]),e(d).errors.name?(m(),_("span",ts,u(e(d).errors.name),1)):f("",!0)]),r("div",os,[t(e(p),{for:"edit_student_id"},{default:o(()=>s[54]||(s[54]=[n("Student ID",-1)])),_:1,__:[54]}),t(e(c),{id:"edit_student_id",modelValue:e(d).student_id,"onUpdate:modelValue":s[13]||(s[13]=l=>e(d).student_id=l),class:g({"border-red-500":e(d).errors.student_id}),required:""},null,8,["modelValue","class"]),e(d).errors.student_id?(m(),_("span",ls,u(e(d).errors.student_id),1)):f("",!0)]),r("div",rs,[r("div",as,[t(e(p),{for:"edit_course"},{default:o(()=>s[55]||(s[55]=[n("Course",-1)])),_:1,__:[55]}),t(e(c),{id:"edit_course",modelValue:e(d).course,"onUpdate:modelValue":s[14]||(s[14]=l=>e(d).course=l),class:g({"border-red-500":e(d).errors.course}),required:""},null,8,["modelValue","class"]),e(d).errors.course?(m(),_("span",ds,u(e(d).errors.course),1)):f("",!0)]),r("div",ns,[t(e(p),{for:"edit_section"},{default:o(()=>s[56]||(s[56]=[n("Section",-1)])),_:1,__:[56]}),t(e(c),{id:"edit_section",modelValue:e(d).section,"onUpdate:modelValue":s[15]||(s[15]=l=>e(d).section=l),class:g({"border-red-500":e(d).errors.section}),required:""},null,8,["modelValue","class"]),e(d).errors.section?(m(),_("span",is,u(e(d).errors.section),1)):f("",!0)])]),r("div",us,[t(e(p),{for:"edit_year"},{default:o(()=>s[57]||(s[57]=[n("Year Level",-1)])),_:1,__:[57]}),t(e(c),{id:"edit_year",modelValue:e(d).year,"onUpdate:modelValue":s[16]||(s[16]=l=>e(d).year=l),class:g({"border-red-500":e(d).errors.year}),required:""},null,8,["modelValue","class"]),e(d).errors.year?(m(),_("span",ms,u(e(d).errors.year),1)):f("",!0)]),r("div",_s,[t(e(p),{for:"edit_email"},{default:o(()=>s[58]||(s[58]=[n("Email",-1)])),_:1,__:[58]}),t(e(c),{id:"edit_email",type:"email",modelValue:e(d).email,"onUpdate:modelValue":s[17]||(s[17]=l=>e(d).email=l),class:g({"border-red-500":e(d).errors.email}),required:""},null,8,["modelValue","class"]),e(d).errors.email?(m(),_("span",fs,u(e(d).errors.email),1)):f("",!0)]),r("div",cs,[t(e(p),{for:"edit_phone"},{default:o(()=>s[59]||(s[59]=[n("Phone",-1)])),_:1,__:[59]}),t(e(c),{id:"edit_phone",modelValue:e(d).phone,"onUpdate:modelValue":s[18]||(s[18]=l=>e(d).phone=l),class:g({"border-red-500":e(d).errors.phone})},null,8,["modelValue","class"]),e(d).errors.phone?(m(),_("span",ps,u(e(d).errors.phone),1)):f("",!0)])]),t(e(z),null,{default:o(()=>[t(e(v),{type:"button",variant:"outline",onClick:s[19]||(s[19]=l=>b.value=!1)},{default:o(()=>s[60]||(s[60]=[n("Cancel",-1)])),_:1,__:[60]}),t(e(v),{type:"submit",disabled:e(d).processing},{default:o(()=>[n(u(e(d).processing?"Updating...":"Update Student"),1)]),_:1},8,["disabled"])]),_:1})],32)):f("",!0)]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{Ns as default};
